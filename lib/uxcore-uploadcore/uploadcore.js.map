{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///uploadcore.js","webpack:///webpack/bootstrap 3f55d4025d4fd24a75f3","webpack:///./src/index.js","webpack:///./src/core.js","webpack:///./src/emitter.js","webpack:///./src/util.js","webpack:///./src/events.js","webpack:///./src/status.js","webpack:///./src/errors.js","webpack:///./src/filerequest.js","webpack:///./src/collector/dnd.js","webpack:///./src/html5/runtime.js","webpack:///./src/runtime.js","webpack:///./src/html5/transport.js","webpack:///./src/file.js","webpack:///./src/collector/paste.js","webpack:///./src/collector/picker.js","webpack:///./src/flash/runtime.js","webpack:///./src/flash/transport.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_core","_core2","_events","_events2","_status","_status2","UploadCore","Events","Status","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x2","_x3","_x4","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","get","getPrototypeOf","_emitter","_emitter2","_errors","_util","_filerequest","_filerequest2","_collectorDnd","_collectorDnd2","_collectorPaste","_collectorPaste2","_collectorPicker","_collectorPicker2","REQUEST_OPTIONS","Core","_Emitter","_this","options","arguments","autoPending","auto","capcity","queueCapcity","multiple","accept","normalizeAccept","sizeLimit","parseSize","fileSizeLimit","pending","Pending","processThreads","stat","Stat","constraints","Constraints","filters","Filters","addConstraint","getTotal","addFilter","file","some","item","extensions","indexOf","ext","FileExtensionError","size","FileSizeError","formatSize","preventDuplicate","getFiles","name","DuplicateError","Array","isArray","fitlers","forEach","filter","request","hasOwnProperty","requestOptions","constraint","add","_this2","isLimit","emit","QUEUE_ERROR","QueueLimitError","error","QUEUE_FILE_FILTERED","setStatus","QUEUED","on","FILE_STATUS_CHANGE","status","CANCELLED","remove","PENDING","setTimeout","QUEUE_UPLOAD_START","QUEUE_STAT_CHANGE","PROCESS","QUEUE_UPLOAD_END","setCore","QUEUE_FILE_ADDED","getStat","flag","picker","dnd","paster","url","setSWF","Set","_set","shift","pop","slice","has","push","splice","files","toArray","getStatus","_this3","fn","every","ret","e","FilterError","Error","toString","threads","heading","_this4","session","always","load","_this5","prepare","process","HookInvoker","hooks","initialData","context","_data","_error","_aborted","Deferred","promise","abort","fail","reject","done","resolve","setData","data","next","hook","res","then","Emitter","event","listener","toLowerCase","that","off","apply","listeners","emitter","propagationTarget","_len","args","_key","applyEmit","pArgs","unshift","parseFloat","prefixesSI","base","index","Math","floor","log","min","powedPrecision","pow","round","units","t","g","k","exec","u","normalizeExtensions","split","map","accepts","ACCEPTs","title","mimeTypes","createOptions","option","match","extend","source","isFunction","Callbacks","fire","_locked","once","_fired","firing","queue","firingIndex","memory","list","stopOnFalse","_arguments","unique","ArrayFrom","empty","disable","disabled","lock","locked","fireWith","fired","Identity","v","Thrower","ex","func","tuples","_state","deferred","_promise","state","catch","pipe","fns","newDefer","tuple","returned","progress","notify","onFulfilled","onRejected","onProgress","depth","handler","special","mightThrow","maxDepth","resolveWith","rejectWith","window","notifyWith","stateString","images","audios","videos","from","arrayLike","FILE_UPLOAD_START","FILE_UPLOAD_PREPARING","FILE_UPLOAD_PREPARED","CHUNK_UPLOAD_PREPARING","CHUNK_UPLOAD_COMPLETING","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_END","FILE_UPLOAD_COMPLETING","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_ERROR","FILE_UPLOAD_COMPLETED","FILE_CANCEL","ALL","INITED","PROGRESS","END","SUCCESS","ERROR","StatusName",1,2,4,8,16,32,64,128,"_x","_Error","_Error2","message","AbortError","_Error3","TimeoutError","_Error4","NetworkError","_Error5","_Error6","_Error7","_FilterError","_FilterError2","_FilterError3","ChunkResponse","rawResponse","chunkRequest","response","getResponse","getJson","JSON","parse","ChunkRequest","blob","fileRequest","getName","getFile","params","getParams","clone","getParam","setParam","getUrl","headers","getHeaders","isWithCredentials","getTimeout","FileResponse","getChunkRequest","isMultiChunk","Params","_name","removeParam","addParam","param","single","encodeURIComponent","join","MIN_CHUNK_SIZE","FileRequest","action","withCredentials","timeout","chunkSize","chunkRetries","chunkEnable","chunkProcessThreads","retries","getChunkSize","getRuntime","canSlice","createReader","collector","dataTransfer","responders","collect","times","_break","readEntry","entry","isFile","isDirectory","readEntries","entries","l","items","MAX_NUM_ONCE","webkitGetAsEntry","document","addEventListener","runtime","_html5Runtime2","getInstance","started","enter","endTimer","dataTransferReader","_file2","total","responder","recieve","start","Collectors","move","dropEffect","preventDefault","end","drag","clearTimeout","isLeave","type","drop","contains","getData","_html5Runtime","_file","Area","area","areaElement","allowed","DndCollector","core","areas","destroy","removeAllListeners","r","isMultiple","_runtime","_runtime2","_transport","_transport2","Html5Runtime","_Runtime","fr","FileReader","timer","onloadend","readyState","DONE","result","readAsDataURL","transport","Blob","mozSlice","webkitSlice","blobSlice","SparkMD5","chunks","ceil","chunk","spark","ArrayBuffer","_loadNext","onload","append","readAsArrayBuffer","Runtime","uploading","Uploading","getSource","useChunk","isChunkEnable","max","getChunkProcessThreads","slots","getActives","reduce","sum","slot","readChunk","req","createChunkRequest","getChunkRetries","getCore","completion","getBlob","invoke","getTransport","generate","createChunkResponse","Html5Transport","xhr","XMLHttpRequest","timeoutTimer","clean","onerror","upload","onprogress","complete","responseText","statusText","open","header","setRequestHeader","formData","FormData","send","guid","uid","toUpperCase","guessExt","RE_EXT","RE_IMAGE","guessType","Progress","change","percentage","File","filename","test","lastModified","Date","setPropagationTarget","prevStatus","_dataUrlPromise","getAsDataUrl","_md5Promise","md5","_sessionPromise","_session","_flows","flow","createFileRequest","getUploading","createFileResponse","cancel","PasteCollector","paste","clipboardData","prevent","addRet","kind","getAsFile","stopPropagation","removeEventListener","_flashRuntime","_flashRuntime2","SWF_URL","createElement","div","html","innerHTML","firstChild","removeChild","FlashTriggerCollection","onFiles","overlay","getAccept","current","hideOverlay","body","appendChild","style","left","top","width","height","trigger","mouseover","rect","getBoundingClientRect","right","bottom","attachEvent","detachEvent","Html5Trigger","label","onChange","destroyInput","createInput","input","setAttribute","Html5TriggerCollection","PickerCollector","triggerCollection","getFlashVersion","version","navigator","plugins","description","e1","ActiveXObject","GetVariable","e2","callFlash","movie","functionName","argumentArray","CallFunction","__flash__argumentsToXML","createFlash","swf","callInterface","attrs","_again2","prefix","_guid","FlashRuntime","display","w","offsetWidth","h","offsetHeight","flash","FlashTransport","flashRuntime"],"mappings":"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","file":"uploadcore.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UploadCore\"] = factory();\n\telse\n\t\troot[\"UploadCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UploadCore\"] = factory();\n\telse\n\t\troot[\"UploadCore\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _core = __webpack_require__(1);\n\t\n\tvar _core2 = _interopRequireDefault(_core);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _status = __webpack_require__(5);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\texports['default'] = _core2['default'];\n\texports.UploadCore = _core2['default'];\n\texports.Events = _events2['default'];\n\texports.Status = _status2['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _status = __webpack_require__(5);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _filerequest = __webpack_require__(7);\n\t\n\tvar _filerequest2 = _interopRequireDefault(_filerequest);\n\t\n\tvar _collectorDnd = __webpack_require__(8);\n\t\n\tvar _collectorDnd2 = _interopRequireDefault(_collectorDnd);\n\t\n\tvar _collectorPaste = __webpack_require__(13);\n\t\n\tvar _collectorPaste2 = _interopRequireDefault(_collectorPaste);\n\t\n\tvar _collectorPicker = __webpack_require__(14);\n\t\n\tvar _collectorPicker2 = _interopRequireDefault(_collectorPicker);\n\t\n\tvar REQUEST_OPTIONS = ['name', 'url', 'params', 'action', 'data', 'headers', 'withCredentials', 'timeout', 'chunkEnable', 'chunkSize', 'chunkRetries', 'chunkProcessThreads'];\n\t\n\tvar Core = (function (_Emitter) {\n\t    _inherits(Core, _Emitter);\n\t\n\t    function Core() {\n\t        var _this = this;\n\t\n\t        var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t        _classCallCheck(this, Core);\n\t\n\t        _get(Object.getPrototypeOf(Core.prototype), 'constructor', this).call(this);\n\t\n\t        this.autoPending = options.autoPending || options.auto;\n\t        this.capcity = options.capcity || options.queueCapcity || 0;\n\t        this.multiple = options.multiple == null ? true : options.multiple;\n\t\n\t        this.accept = (0, _util.normalizeAccept)(options.accept);\n\t        this.sizeLimit = (0, _util.parseSize)(options.sizeLimit || options.fileSizeLimit || 0);\n\t\n\t        this.pending = new Pending(options.processThreads);\n\t        this.stat = new Stat();\n\t        this.constraints = new Constraints();\n\t        this.filters = new Filters();\n\t\n\t        if (!this.multiple) {\n\t            this.capcity = 1;\n\t        }\n\t        if (this.capcity > 0) {\n\t            this.addConstraint(function () {\n\t                return _this.stat.getTotal() >= _this.capcity;\n\t            });\n\t        }\n\t\n\t        if (this.accept && this.accept.length > 0) {\n\t            this.addFilter(function (file) {\n\t                if (!_this.accept.some(function (item) {\n\t                    return item.extensions && item.extensions.indexOf(file.ext) > -1;\n\t                })) {\n\t                    return new _errors.FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n\t                }\n\t            });\n\t        }\n\t\n\t        if (this.sizeLimit > 0) {\n\t            this.addFilter(function (file) {\n\t                if (file.size > _this.sizeLimit) {\n\t                    return new _errors.FileSizeError(file, 'filesize:' + (0, _util.formatSize)(file.size) + ' is greater than limit:' + (0, _util.formatSize)(_this.sizeLimit));\n\t                }\n\t            });\n\t        }\n\t\n\t        if (options.preventDuplicate) {\n\t            this.addFilter(function (file) {\n\t                if (_this.stat.getFiles().some(function (item) {\n\t                    return item.name === file.name && item.size === file.size;\n\t                })) {\n\t                    return new _errors.DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n\t                }\n\t            });\n\t        }\n\t\n\t        if (Array.isArray(options.filters)) {\n\t            options.fitlers.forEach(function (filter) {\n\t                return _this.addFilter(filter);\n\t            });\n\t        }\n\t\n\t        var request = options.request || {};\n\t        REQUEST_OPTIONS.forEach(function (key) {\n\t            if (options.hasOwnProperty(key)) {\n\t                request[key] = options[key];\n\t            }\n\t        });\n\t\n\t        this.requestOptions = request;\n\t    }\n\t\n\t    _createClass(Core, [{\n\t        key: 'createFileRequest',\n\t        value: function createFileRequest(file) {\n\t            return new _filerequest2['default'](file, this.requestOptions);\n\t        }\n\t    }, {\n\t        key: 'isLimit',\n\t        value: function isLimit() {\n\t            return this.constraints.some();\n\t        }\n\t    }, {\n\t        key: 'addConstraint',\n\t        value: function addConstraint(constraint) {\n\t            return this.constraints.add(constraint);\n\t        }\n\t    }, {\n\t        key: 'addFilter',\n\t        value: function addFilter(filter) {\n\t            return this.filters.add(filter);\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this2 = this;\n\t\n\t            if (this.isLimit()) {\n\t                this.emit(_events2['default'].QUEUE_ERROR, new _errors.QueueLimitError());\n\t                return -1;\n\t            }\n\t\n\t            var error = this.filters.filter(file);\n\t            if (!error && !this.stat.add(file)) {\n\t                error = new _errors.DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n\t            }\n\t\n\t            if (error) {\n\t                this.emit(_events2['default'].QUEUE_FILE_FILTERED, file, error);\n\t                this.emit(_events2['default'].QUEUE_ERROR, error);\n\t                return 0;\n\t            }\n\t\n\t            file.setStatus(_status2['default'].QUEUED);\n\t\n\t            file.on(_events2['default'].FILE_STATUS_CHANGE, function (status) {\n\t                if (status === _status2['default'].CANCELLED) {\n\t                    _this2.stat.remove(file);\n\t                } else if (status === _status2['default'].PENDING) {\n\t                    setTimeout(function () {\n\t                        if (_this2.pending.add(file) && _this2.pending.size() === 1) {\n\t                            _this2.emit(_events2['default'].QUEUE_UPLOAD_START);\n\t                        }\n\t                    }, 1);\n\t                }\n\t\n\t                _this2.emit(_events2['default'].QUEUE_STAT_CHANGE, _this2.stat);\n\t\n\t                if (_this2.stat.getFiles(_status2['default'].PROCESS).length < 1) {\n\t                    _this2.emit(_events2['default'].QUEUE_UPLOAD_END);\n\t                }\n\t            });\n\t\n\t            file.setCore(this);\n\t\n\t            this.emit(_events2['default'].QUEUE_FILE_ADDED, file);\n\t\n\t            this.emit(_events2['default'].QUEUE_STAT_CHANGE, this.stat);\n\t\n\t            if (this.autoPending) {\n\t                file.pending();\n\t            }\n\t\n\t            return 1;\n\t        }\n\t    }, {\n\t        key: 'isMultiple',\n\t        value: function isMultiple() {\n\t            return this.multiple;\n\t        }\n\t    }, {\n\t        key: 'isFull',\n\t        value: function isFull() {\n\t            return this.capcity > 0 && this.getTotal() >= this.capcity;\n\t        }\n\t    }, {\n\t        key: 'isEmpty',\n\t        value: function isEmpty() {\n\t            return this.getTotal() < 1;\n\t        }\n\t    }, {\n\t        key: 'getAccept',\n\t        value: function getAccept() {\n\t            return this.accept;\n\t        }\n\t    }, {\n\t        key: 'getStat',\n\t        value: function getStat() {\n\t            return this.stat;\n\t        }\n\t    }, {\n\t        key: 'getTotal',\n\t        value: function getTotal() {\n\t            return this.getStat().getTotal();\n\t        }\n\t    }, {\n\t        key: 'getFiles',\n\t        value: function getFiles(flag) {\n\t            return this.getStat().getFiles(flag);\n\t        }\n\t    }, {\n\t        key: 'stat',\n\t        value: function stat(flag) {\n\t            return this.getStat().stat(flag);\n\t        }\n\t    }, {\n\t        key: 'getPickerCollector',\n\t        value: function getPickerCollector() {\n\t            if (!this.picker) {\n\t                this.picker = new _collectorPicker2['default'](this);\n\t            }\n\t            return this.picker;\n\t        }\n\t    }, {\n\t        key: 'getDndCollector',\n\t        value: function getDndCollector() {\n\t            if (!this.dnd) {\n\t                this.dnd = new _collectorDnd2['default'](this);\n\t            }\n\t            return this.dnd;\n\t        }\n\t    }, {\n\t        key: 'getPasteCollector',\n\t        value: function getPasteCollector() {\n\t            if (!this.paster) {\n\t                this.paster = new _collectorPaste2['default'](this);\n\t            }\n\t            return this.paster;\n\t        }\n\t    }], [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            _collectorPicker2['default'].setSWF(url);\n\t        }\n\t    }]);\n\t\n\t    return Core;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = Core;\n\t\n\tvar Set = (function () {\n\t    function Set() {\n\t        _classCallCheck(this, Set);\n\t\n\t        this._set = [];\n\t    }\n\t\n\t    /**\n\t     * 项目总数\n\t     *\n\t     * @returns {Number}\n\t     */\n\t\n\t    _createClass(Set, [{\n\t        key: 'size',\n\t        value: function size() {\n\t            return this._set.length;\n\t        }\n\t\n\t        /**\n\t         * 从头部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t    }, {\n\t        key: 'shift',\n\t        value: function shift() {\n\t            return this._set.shift();\n\t        }\n\t\n\t        /**\n\t         * 从尾部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t    }, {\n\t        key: 'pop',\n\t        value: function pop() {\n\t            return this._set.pop();\n\t        }\n\t\n\t        /**\n\t         * 获得所有项\n\t         *\n\t         * @returns {Array}\n\t         */\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this._set.slice(0);\n\t        }\n\t\n\t        /**\n\t         * 添加一项\n\t         *\n\t         * @param item\n\t         * @returns {boolean} success if true\n\t         */\n\t    }, {\n\t        key: 'add',\n\t        value: function add(item) {\n\t            if (this.has(item)) {\n\t                return false;\n\t            }\n\t            this._set.push(item);\n\t            return true;\n\t        }\n\t\n\t        /**\n\t         * 是否存在该项\n\t         *\n\t         * @param item\n\t         * @returns {boolean}\n\t         */\n\t    }, {\n\t        key: 'has',\n\t        value: function has(item) {\n\t            return this._set.indexOf(item) > -1;\n\t        }\n\t\n\t        /**\n\t         * 删除某项\n\t         *\n\t         * @returns {boolean} success if true\n\t         */\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(item) {\n\t            var i = this._set.indexOf(item);\n\t            if (i > -1) {\n\t                this._set.splice(i, 1);\n\t                return true;\n\t            }\n\t            return false;\n\t        }\n\t\n\t        /**\n\t         * 清空\n\t         */\n\t    }, {\n\t        key: 'clear',\n\t        value: function clear() {\n\t            this._set = [];\n\t        }\n\t    }]);\n\t\n\t    return Set;\n\t})();\n\t\n\tvar Stat = (function () {\n\t    function Stat() {\n\t        _classCallCheck(this, Stat);\n\t\n\t        this.files = new Set();\n\t    }\n\t\n\t    _createClass(Stat, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            return this.files.add(file);\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(file) {\n\t            this.files.remove(file);\n\t        }\n\t    }, {\n\t        key: 'getTotal',\n\t        value: function getTotal() {\n\t            return this.files.size();\n\t        }\n\t    }, {\n\t        key: 'getFiles',\n\t        value: function getFiles(flag) {\n\t            var files = this.files.toArray();\n\t            if (!flag) {\n\t                return files;\n\t            }\n\t            return files.filter(function (file) {\n\t                return !!(file.getStatus() & flag);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'stat',\n\t        value: function stat(flag) {\n\t            var stat = {},\n\t                files = this.getFiles(flag);\n\t\n\t            files.forEach(function (file) {\n\t                var status = file.getStatus();\n\t                stat[status] = status in stat ? stat[status] + 1 : 1;\n\t            });\n\t\n\t            stat['sum'] = files.length;\n\t\n\t            return stat;\n\t        }\n\t    }]);\n\t\n\t    return Stat;\n\t})();\n\t\n\tvar Constraints = (function () {\n\t    function Constraints() {\n\t        _classCallCheck(this, Constraints);\n\t\n\t        this.constraints = new Set();\n\t    }\n\t\n\t    _createClass(Constraints, [{\n\t        key: 'add',\n\t        value: function add(constraint) {\n\t            this.constraints.add(constraint);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(constraint) {\n\t            this.constraints.remove(constraint);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'some',\n\t        value: function some() {\n\t            var _this3 = this;\n\t\n\t            return this.constraints.toArray().some(function (fn) {\n\t                return fn.call(_this3);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Constraints;\n\t})();\n\t\n\tvar Filters = (function () {\n\t    function Filters() {\n\t        _classCallCheck(this, Filters);\n\t\n\t        this.filters = new Set();\n\t    }\n\t\n\t    _createClass(Filters, [{\n\t        key: 'add',\n\t        value: function add(filter) {\n\t            this.filters.add(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(filter) {\n\t            this.filters.remove(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'filter',\n\t        value: function filter(file) {\n\t            var error = null;\n\t            this.filters.toArray().every(function (filter) {\n\t                var ret = undefined;\n\t                try {\n\t                    ret = filter(file);\n\t                } catch (e) {\n\t                    ret = e;\n\t                }\n\t                if (typeof ret === 'string') {\n\t                    error = new _errors.FilterError(file, ret);\n\t                    return false;\n\t                } else if (ret instanceof Error) {\n\t                    error = ret instanceof _errors.FilterError ? ret : new _errors.FilterError(file, ret.toString());\n\t                    return false;\n\t                }\n\t                return true;\n\t            });\n\t            return error;\n\t        }\n\t    }]);\n\t\n\t    return Filters;\n\t})();\n\t\n\tvar Pending = (function () {\n\t    function Pending(threads) {\n\t        _classCallCheck(this, Pending);\n\t\n\t        this.threads = threads || 2;\n\t        this.heading = new Set();\n\t        this.pending = new Set();\n\t    }\n\t\n\t    _createClass(Pending, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this4 = this;\n\t\n\t            if (!this.pending.add(file)) return false;\n\t\n\t            file.session().always(function () {\n\t                return _this4.pending.remove(file);\n\t            });\n\t\n\t            this.load();\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'size',\n\t        value: function size() {\n\t            return this.pending.size() + this.heading.size();\n\t        }\n\t    }, {\n\t        key: 'process',\n\t        value: function process(file) {\n\t            var _this5 = this;\n\t\n\t            if (!this.heading.add(file)) return;\n\t\n\t            file.session().always(function () {\n\t                _this5.heading.remove(file);\n\t                _this5.load();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'load',\n\t        value: function load() {\n\t            var file;\n\t            while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n\t                if (file.prepare()) {\n\t                    this.process(file);\n\t                }\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return Pending;\n\t})();\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar Emitter = (function () {\n\t    function Emitter() {\n\t        _classCallCheck(this, Emitter);\n\t    }\n\t\n\t    _createClass(Emitter, [{\n\t        key: 'on',\n\t        value: function on(event, listener) {\n\t            event = event.toLowerCase();\n\t            if (!this._events) {\n\t                this._events = {};\n\t            }\n\t\n\t            if (!this._events[event]) {\n\t                this._events[event] = [];\n\t            }\n\t\n\t            this._events[event].push(listener);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'once',\n\t        value: function once(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var that = this;\n\t\n\t            function fn() {\n\t                that.off(event, fn);\n\t                listener.apply(this, arguments);\n\t            }\n\t\n\t            fn.listener = listener;\n\t\n\t            this.on(event, fn);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'off',\n\t        value: function off(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                return this;\n\t            }\n\t\n\t            var i = listeners.length;\n\t            while (i-- > 0) {\n\t                if (listeners[i] === listener || listeners[i].listener === listener) {\n\t                    listeners.splice(i, 1);\n\t                    break;\n\t                }\n\t            }\n\t\n\t            if (listeners.length === 0) {\n\t                delete this._events[event];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'removeAllListeners',\n\t        value: function removeAllListeners(event) {\n\t            if (!event) {\n\t                this._events = [];\n\t            } else {\n\t                delete this._events[event.toLowerCase()];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setPropagationTarget',\n\t        value: function setPropagationTarget(emitter) {\n\t            if (emitter instanceof Emitter) {\n\t                this.propagationTarget = emitter;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'emit',\n\t        value: function emit(event) {\n\t            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t                args[_key - 1] = arguments[_key];\n\t            }\n\t\n\t            this.applyEmit(event, args);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'applyEmit',\n\t        value: function applyEmit(event, args) {\n\t            var _this = this;\n\t\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (this._events && (listeners = this._events[event])) {\n\t                listeners.slice(0).forEach(function (fn) {\n\t                    return fn.apply(_this, args);\n\t                });\n\t            }\n\t\n\t            if (this.propagationTarget) {\n\t                var pArgs = args.slice(0);\n\t                pArgs.unshift(this);\n\t                this.propagationTarget.applyEmit(event, pArgs);\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'invoke',\n\t        value: function invoke(event, data) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                listeners = [];\n\t            }\n\t\n\t            return HookInvoker(listeners.slice(0), data, this);\n\t        }\n\t    }]);\n\t\n\t    return Emitter;\n\t})();\n\t\n\texports['default'] = Emitter;\n\t\n\tfunction HookInvoker(hooks, initialData, context) {\n\t    var _data = initialData;\n\t    var _error = null;\n\t    var _aborted = undefined;\n\t\n\t    var i = (0, _util.Deferred)();\n\t    var ret = i.promise();\n\t\n\t    ret.abort = function () {\n\t        _aborted = true;\n\t    };\n\t\n\t    var fail = function fail(e) {\n\t        if (_aborted) return;\n\t        if (e) {\n\t            _error = e instanceof Error ? e : new Error(e);\n\t        }\n\t        i.reject(_error || new Error('Unknown'));\n\t    };\n\t\n\t    var done = function done() {\n\t        if (_aborted) return;\n\t        if (_error != null) {\n\t            fail();\n\t        } else {\n\t            i.resolve(_data);\n\t        }\n\t    };\n\t\n\t    var setData = function setData(data) {\n\t        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n\t            _data = data;\n\t        }\n\t    };\n\t\n\t    var next = function next(data) {\n\t        if (_aborted) return;\n\t\n\t        if (data instanceof Error) {\n\t            _error = data;\n\t        }\n\t\n\t        if (_error != null) {\n\t            return fail();\n\t        }\n\t\n\t        setData(data);\n\t\n\t        var hook = hooks.shift();\n\t        if (!hook) {\n\t            return done();\n\t        }\n\t        var res = undefined;\n\t        try {\n\t            res = hook.call(context, _data);\n\t        } catch (e) {\n\t            return fail(e);\n\t        }\n\t\n\t        if (res && res.then) {\n\t            res.then(next, fail);\n\t        } else {\n\t            next(res);\n\t        }\n\t    };\n\t\n\t    setTimeout(next, 1);\n\t\n\t    return ret;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.formatSize = formatSize;\n\texports.parseSize = parseSize;\n\texports.normalizeAccept = normalizeAccept;\n\texports.extend = extend;\n\texports.Callbacks = Callbacks;\n\texports.Deferred = Deferred;\n\t\n\tfunction formatSize(size) {\n\t    size = parseFloat(size);\n\t    var prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n\t        base = 1024;\n\t    var index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n\t    index = Math.min(index, prefixesSI.length - 1);\n\t    var powedPrecision = Math.pow(10, index < 2 ? 0 : index > 2 ? 2 : 1);\n\t    size = size / Math.pow(base, index);\n\t    size = Math.round(size * powedPrecision) / powedPrecision;\n\t    return size + prefixesSI[index] + 'B';\n\t}\n\t\n\tfunction parseSize(size) {\n\t    if (typeof size !== 'string') {\n\t        return size;\n\t    }\n\t\n\t    var units = {\n\t        t: 1099511627776,\n\t        g: 1073741824,\n\t        m: 1048576,\n\t        k: 1024\n\t    };\n\t\n\t    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n\t    var u = size[2];\n\t    size = +size[1];\n\t\n\t    if (units.hasOwnProperty(u)) {\n\t        size *= units[u];\n\t    }\n\t    return size;\n\t}\n\t\n\tvar ACCEPTs = {\n\t    images: {\n\t        title: 'Images',\n\t        extensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'svg', 'tiff', 'tif', 'ico', 'jpe', 'svgz', 'pct', 'psp', 'ai', 'psd', 'raw', 'webp']\n\t    },\n\t\n\t    audios: {\n\t        title: 'Audios',\n\t        extensions: ['aac', 'aif', 'flac', 'iff', 'm4a', 'm4b', 'mid', 'midi', 'mp3', 'mpa', 'mpc', 'oga', 'ogg', 'ra', 'ram', 'snd', 'wav', 'wma']\n\t    },\n\t\n\t    videos: {\n\t        title: 'Videos',\n\t        extensions: ['avi', 'divx', 'flv', 'm4v', 'mkv', 'mov', 'mp4', 'mpeg', 'mpg', 'ogm', 'ogv', 'ogx', 'rm', 'rmvb', 'smil', 'webm', 'wmv', 'xvid']\n\t    }\n\t};\n\t\n\tfunction normalizeExtensions(extensions) {\n\t    if (typeof extensions !== 'string') {\n\t        return '';\n\t    }\n\t\n\t    return extensions.toLowerCase().split(/ *[ ,;|+] */).map(function (ext) {\n\t        var m = /^\\*?\\.?(\\w+)$/.exec(ext);\n\t        return m ? m[1] : null;\n\t    }).filter(function (ext) {\n\t        return ext !== null;\n\t    });\n\t}\n\t\n\tfunction normalizeAccept(accepts) {\n\t    if (!accepts) return null;\n\t\n\t    if (!Array.isArray(accepts)) {\n\t        accepts = [accepts];\n\t    }\n\t\n\t    return accepts.map(function (accept) {\n\t        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n\t            return ACCEPTs[accept];\n\t        } else {\n\t            var extensions = normalizeExtensions(accept.extensions || accept);\n\t\n\t            return extensions.length ? {\n\t                title: accept.title || '',\n\t                extensions: extensions,\n\t                mimeTypes: accept.mimeTypes || ''\n\t            } : null;\n\t        }\n\t    }).filter(function (accept) {\n\t        return accept !== null;\n\t    });\n\t}\n\t\n\tfunction createOptions(option) {\n\t    var options = {};\n\t    (option.match(/\\S+/g) || []).forEach(function (flag) {\n\t        options[flag] = true;\n\t    });\n\t    return options;\n\t}\n\t\n\tfunction extend(target, source) {\n\t    for (var key in source) {\n\t        target[key] = source[key];\n\t    }\n\t    return target;\n\t}\n\t\n\tfunction isFunction(obj) {\n\t    return typeof obj === 'function';\n\t}\n\t\n\tvar ArrayFrom = Array.from || function (arrayLike) {\n\t    return [].slice.call(arrayLike);\n\t};\n\t\n\tfunction Callbacks(options) {\n\t    options = typeof options === \"string\" ? createOptions(options) : extend({}, options);\n\t\n\t    var firing = undefined,\n\t        memory = undefined,\n\t        _fired = undefined,\n\t        _locked = undefined,\n\t        list = [],\n\t        queue = [],\n\t        firingIndex = -1,\n\t        _this = undefined;\n\t\n\t    function fire() {\n\t        _locked = options.once;\n\t\n\t        _fired = firing = true;\n\t        for (; queue.length; firingIndex = -1) {\n\t            memory = queue.shift();\n\t            while (++firingIndex < list.length) {\n\t                if (list[firingIndex].apply(memory[0], memory[1]) === false && options.stopOnFalse) {\n\t                    firingIndex = list.length;\n\t                    memory = false;\n\t                }\n\t            }\n\t        }\n\t\n\t        if (!options.memory) {\n\t            memory = false;\n\t        }\n\t\n\t        firing = false;\n\t\n\t        if (_locked) {\n\t            if (memory) {\n\t                list = [];\n\t            } else {\n\t                list = \"\";\n\t            }\n\t        }\n\t    }\n\t\n\t    _this = {\n\t        add: function add() {\n\t            var _arguments = arguments;\n\t\n\t            if (list) {\n\t                (function () {\n\t                    var add = function add(args) {\n\t                        args.forEach(function (fn) {\n\t                            if (isFunction(fn)) {\n\t                                if (!options.unique || !_this.has(fn)) {\n\t                                    list.push(fn);\n\t                                }\n\t                            } else if (Array.isArray(fn)) {\n\t                                add(fn);\n\t                            }\n\t                        });\n\t                    };\n\t\n\t                    if (memory && !firing) {\n\t                        firingIndex = list.length - 1;\n\t                        queue.push(memory);\n\t                    }\n\t\n\t                    add(ArrayFrom(_arguments));\n\t\n\t                    if (memory && !firing) {\n\t                        fire();\n\t                    }\n\t                })();\n\t            }\n\t            return this;\n\t        },\n\t\n\t        remove: function remove() {\n\t            ArrayFrom(arguments).forEach(function (fn) {\n\t                var i = list.length;\n\t                while (--i >= 0) {\n\t                    if (list[i] === fn) {\n\t                        list.splice(i, 1);\n\t\n\t                        if (i <= firingIndex) {\n\t                            firingIndex--;\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t            return this;\n\t        },\n\t\n\t        has: function has(fn) {\n\t            return fn ? list.indexOf(fn) > -1 : list.length > 0;\n\t        },\n\t\n\t        empty: function empty() {\n\t            if (list) {\n\t                list = [];\n\t            }\n\t            return this;\n\t        },\n\t\n\t        disable: function disable() {\n\t            _locked = queue = [];\n\t            list = memory = \"\";\n\t            return this;\n\t        },\n\t\n\t        disabled: function disabled() {\n\t            return !list;\n\t        },\n\t\n\t        lock: function lock() {\n\t            _locked = queue = [];\n\t            if (!memory && !firing) {\n\t                list = memory = \"\";\n\t            }\n\t            return this;\n\t        },\n\t\n\t        locked: function locked() {\n\t            return !!_locked;\n\t        },\n\t\n\t        fireWith: function fireWith(context, args) {\n\t            if (!_locked) {\n\t                args = args || [];\n\t                args = [context, args.slice ? args.slice() : args];\n\t                queue.push(args);\n\t                if (!firing) {\n\t                    fire();\n\t                }\n\t            }\n\t            return this;\n\t        },\n\t\n\t        fire: function fire() {\n\t            _this.fireWith(this, arguments);\n\t            return this;\n\t        },\n\t\n\t        fired: function fired() {\n\t            return !!_fired;\n\t        }\n\t    };\n\t\n\t    return _this;\n\t}\n\t\n\t;\n\t\n\tfunction Identity(v) {\n\t    return v;\n\t}\n\tfunction Thrower(ex) {\n\t    throw ex;\n\t}\n\t\n\tfunction Deferred(func) {\n\t    var tuples = [[\"notify\", \"progress\", Callbacks(\"memory\"), Callbacks(\"memory\"), 2], [\"resolve\", \"done\", Callbacks(\"once memory\"), Callbacks(\"once memory\"), 0, \"resolved\"], [\"reject\", \"fail\", Callbacks(\"once memory\"), Callbacks(\"once memory\"), 1, \"rejected\"]],\n\t        _state = \"pending\",\n\t        deferred = {},\n\t        _promise = {\n\t        state: function state() {\n\t            return _state;\n\t        },\n\t\n\t        always: function always() {\n\t            var args = ArrayFrom(arguments);\n\t            deferred.done(args).fail(args);\n\t            return this;\n\t        },\n\t\n\t        \"catch\": function _catch(fn) {\n\t            return _promise.then(null, fn);\n\t        },\n\t\n\t        pipe: function pipe() /* fnDone, fnFail, fnProgress */{\n\t            var fns = arguments;\n\t\n\t            return Deferred(function (newDefer) {\n\t                tuples.forEach(function (tuple) {\n\t                    var fn = typeof fns[tuple[4]] === 'function' && fns[tuple[4]];\n\t\n\t                    deferred[tuple[1]](function () {\n\t                        var returned = fn && fn.apply(this, arguments);\n\t                        if (returned && isFunction(returned.promise)) {\n\t                            returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);\n\t                        } else {\n\t                            newDefer[tuple[0] + \"With\"](this === _promise ? newDefer.promise() : this, fn ? [returned] : arguments);\n\t                        }\n\t                    });\n\t                });\n\t                fns = null;\n\t            }).promise();\n\t        },\n\t\n\t        then: function then(onFulfilled, onRejected, onProgress) {\n\t            var maxDepth = 0;\n\t\n\t            function resolve(depth, deferred, handler, special) {\n\t                return function () {\n\t                    var _this = this === _promise ? undefined : this,\n\t                        args = arguments,\n\t                        mightThrow = function mightThrow() {\n\t                        var returned = undefined,\n\t                            then = undefined;\n\t\n\t                        if (depth < maxDepth) {\n\t                            return;\n\t                        }\n\t\n\t                        returned = handler.apply(_this, args);\n\t\n\t                        if (returned === deferred.promise()) {\n\t                            throw new TypeError(\"Thenable self-resolution\");\n\t                        }\n\t\n\t                        then = returned && (typeof returned === \"object\" || typeof returned === \"function\") && returned.then;\n\t\n\t                        if (isFunction(then)) {\n\t                            if (special) {\n\t                                then.call(returned, resolve(maxDepth, deferred, Identity, special), resolve(maxDepth, deferred, Thrower, special));\n\t                            } else {\n\t                                maxDepth++;\n\t\n\t                                then.call(returned, resolve(maxDepth, deferred, Identity, special), resolve(maxDepth, deferred, Thrower, special), resolve(maxDepth, deferred, Identity, deferred.notify));\n\t                            }\n\t                        } else {\n\t                            if (handler !== Identity) {\n\t                                _this = undefined;\n\t                                args = [returned];\n\t                            }\n\t\n\t                            (special || deferred.resolveWith)(_this || deferred.promise(), args);\n\t                        }\n\t                    },\n\t                        process = special ? mightThrow : function () {\n\t                        try {\n\t                            mightThrow();\n\t                        } catch (e) {\n\t                            if (depth + 1 >= maxDepth) {\n\t                                if (handler !== Thrower) {\n\t                                    _this = undefined;\n\t                                    args = [e];\n\t                                }\n\t\n\t                                deferred.rejectWith(_this || deferred.promise(), args);\n\t                            }\n\t                        }\n\t                    };\n\t\n\t                    if (depth) {\n\t                        process();\n\t                    } else {\n\t                        window.setTimeout(process, 0);\n\t                    }\n\t                };\n\t            }\n\t\n\t            return Deferred(function (newDefer) {\n\t                // progress\n\t                tuples[0][3].add(resolve(0, newDefer, isFunction(onProgress) ? onProgress : Identity, newDefer.notifyWith));\n\t\n\t                // fulfilled\n\t                tuples[1][3].add(resolve(0, newDefer, isFunction(onFulfilled) ? onFulfilled : Identity));\n\t\n\t                // rejected\n\t                tuples[2][3].add(resolve(0, newDefer, isFunction(onRejected) ? onRejected : Thrower));\n\t            }).promise();\n\t        },\n\t\n\t        promise: function promise(obj) {\n\t            return obj != null ? extend(obj, _promise) : _promise;\n\t        }\n\t    };\n\t\n\t    tuples.forEach(function (tuple, i) {\n\t        var list = tuple[2],\n\t            stateString = tuple[5];\n\t\n\t        _promise[tuple[1]] = list.add;\n\t\n\t        if (stateString) {\n\t            list.add(function () {\n\t                _state = stateString;\n\t            }, tuples[3 - i][2].disable, tuples[0][2].lock);\n\t        }\n\t\n\t        list.add(tuple[3].fire);\n\t\n\t        deferred[tuple[0]] = function () {\n\t            deferred[tuple[0] + \"With\"](this === deferred ? _promise : this, arguments);\n\t            return this;\n\t        };\n\t\n\t        deferred[tuple[0] + \"With\"] = list.fireWith;\n\t    });\n\t\n\t    _promise.promise(deferred);\n\t\n\t    if (func) {\n\t        func.call(deferred, deferred);\n\t    }\n\t\n\t    return deferred;\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n\t    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n\t    QUEUE_FILE_ADDED: 'queuefileadded', // 队列添加了一个文件\n\t    QUEUE_FILE_FILTERED: 'queuefilefiltered', // 队列过滤了一个文件\n\t    QUEUE_ERROR: 'queueerror', // 队列错误\n\t    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\t\n\t    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n\t    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n\t    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n\t    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n\t    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n\t    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n\t    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n\t    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n\t    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n\t    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n\t    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\t\n\t    FILE_CANCEL: 'filecancel', // 文件退出\n\t    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    ALL: 255, // 所有状态\n\t\n\t    PROCESS: 31, // INITED -> END\n\t    INITED: 1, // 初始状态\n\t    QUEUED: 2, // 进入队列\n\t    PENDING: 4, // 队列中等待\n\t    PROGRESS: 8, // 上传中\n\t    END: 16, // 上传完成, 等待后续处理\n\t\n\t    SUCCESS: 32, // 上传成功\n\t    ERROR: 64, // 上传出错\n\t    CANCELLED: 128 // 上传取消 和 queued 相反, 退出队列\n\t};\n\tvar StatusName = {\n\t    1: 'inited',\n\t    2: 'queued',\n\t    4: 'pending',\n\t    8: 'progress',\n\t    16: 'end',\n\t    32: 'success',\n\t    64: 'error',\n\t    128: 'cancelled'\n\t};\n\texports.StatusName = StatusName;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Error = (function (_Error2) {\n\t    _inherits(_Error, _Error2);\n\t\n\t    function _Error(message) {\n\t        _classCallCheck(this, _Error);\n\t\n\t        _get(Object.getPrototypeOf(_Error.prototype), 'constructor', this).call(this, message);\n\t        this.message = message;\n\t    }\n\t\n\t    return _Error;\n\t})(Error);\n\t\n\tvar AbortError = (function (_Error3) {\n\t    _inherits(AbortError, _Error3);\n\t\n\t    function AbortError(message) {\n\t        _classCallCheck(this, AbortError);\n\t\n\t        _get(Object.getPrototypeOf(AbortError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'AbortError';\n\t    }\n\t\n\t    return AbortError;\n\t})(_Error);\n\t\n\texports.AbortError = AbortError;\n\t\n\tvar TimeoutError = (function (_Error4) {\n\t    _inherits(TimeoutError, _Error4);\n\t\n\t    function TimeoutError(message) {\n\t        _classCallCheck(this, TimeoutError);\n\t\n\t        _get(Object.getPrototypeOf(TimeoutError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'TimeoutError';\n\t    }\n\t\n\t    return TimeoutError;\n\t})(_Error);\n\t\n\texports.TimeoutError = TimeoutError;\n\t\n\tvar NetworkError = (function (_Error5) {\n\t    _inherits(NetworkError, _Error5);\n\t\n\t    function NetworkError(status, message) {\n\t        _classCallCheck(this, NetworkError);\n\t\n\t        _get(Object.getPrototypeOf(NetworkError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'NetworkError';\n\t        this.status = status;\n\t    }\n\t\n\t    return NetworkError;\n\t})(_Error);\n\t\n\texports.NetworkError = NetworkError;\n\t\n\tvar QueueLimitError = (function (_Error6) {\n\t    _inherits(QueueLimitError, _Error6);\n\t\n\t    function QueueLimitError() {\n\t        _classCallCheck(this, QueueLimitError);\n\t\n\t        _get(Object.getPrototypeOf(QueueLimitError.prototype), 'constructor', this).call(this, 'queue limit');\n\t        this.name = 'QueueLimitError';\n\t    }\n\t\n\t    return QueueLimitError;\n\t})(_Error);\n\t\n\texports.QueueLimitError = QueueLimitError;\n\t\n\tvar FilterError = (function (_Error7) {\n\t    _inherits(FilterError, _Error7);\n\t\n\t    function FilterError(file, message) {\n\t        _classCallCheck(this, FilterError);\n\t\n\t        _get(Object.getPrototypeOf(FilterError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'FilterError';\n\t        this.file = file;\n\t    }\n\t\n\t    return FilterError;\n\t})(_Error);\n\t\n\texports.FilterError = FilterError;\n\t\n\tvar DuplicateError = (function (_FilterError) {\n\t    _inherits(DuplicateError, _FilterError);\n\t\n\t    function DuplicateError(file, message) {\n\t        _classCallCheck(this, DuplicateError);\n\t\n\t        _get(Object.getPrototypeOf(DuplicateError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'DuplicateError';\n\t    }\n\t\n\t    return DuplicateError;\n\t})(FilterError);\n\t\n\texports.DuplicateError = DuplicateError;\n\t\n\tvar FileExtensionError = (function (_FilterError2) {\n\t    _inherits(FileExtensionError, _FilterError2);\n\t\n\t    function FileExtensionError(file, message) {\n\t        _classCallCheck(this, FileExtensionError);\n\t\n\t        _get(Object.getPrototypeOf(FileExtensionError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'FileExtensionError';\n\t    }\n\t\n\t    return FileExtensionError;\n\t})(FilterError);\n\t\n\texports.FileExtensionError = FileExtensionError;\n\t\n\tvar FileSizeError = (function (_FilterError3) {\n\t    _inherits(FileSizeError, _FilterError3);\n\t\n\t    function FileSizeError(file, message) {\n\t        _classCallCheck(this, FileSizeError);\n\t\n\t        _get(Object.getPrototypeOf(FileSizeError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'FileSizeError';\n\t    }\n\t\n\t    return FileSizeError;\n\t})(FilterError);\n\t\n\texports.FileSizeError = FileSizeError;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar ChunkResponse = (function () {\n\t    /**\n\t     * @param {string|null} rawResponse\n\t     * @param {ChunkRequest} chunkRequest\n\t     */\n\t\n\t    function ChunkResponse(rawResponse, chunkRequest) {\n\t        _classCallCheck(this, ChunkResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.chunkRequest = chunkRequest;\n\t    }\n\t\n\t    _createClass(ChunkResponse, [{\n\t        key: 'getChunkRequest',\n\t        value: function getChunkRequest() {\n\t            return this.chunkRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            return this.response || this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getJson',\n\t        value: function getJson() {\n\t            var response = this.getResponse();\n\t            if (response == null) {\n\t                return null;\n\t            }\n\t            if (typeof response.getJson === 'function') {\n\t                return response.getJson();\n\t            }\n\t            if (typeof response === 'string') {\n\t                return response === '' ? null : JSON.parse(response);\n\t            }\n\t            return response;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return ChunkResponse;\n\t})();\n\t\n\tvar ChunkRequest = (function () {\n\t    /**\n\t     *\n\t     * @param {int} index\n\t     * @param {Blob} blob\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function ChunkRequest(index, blob, fileRequest) {\n\t        _classCallCheck(this, ChunkRequest);\n\t\n\t        this.index = index;\n\t        this.blob = blob;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(ChunkRequest, [{\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.fileRequest.getName();\n\t        }\n\t    }, {\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.fileRequest.getFile();\n\t        }\n\t    }, {\n\t        key: 'getBlob',\n\t        value: function getBlob() {\n\t            return this.blob;\n\t        }\n\t    }, {\n\t        key: 'getIndex',\n\t        value: function getIndex() {\n\t            return this.index;\n\t        }\n\t    }, {\n\t        key: 'isMultiChunk',\n\t        value: function isMultiChunk() {\n\t            return this.getFile().source !== this.blob;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            if (!this.params) {\n\t                this.params = this.fileRequest.getParams().clone();\n\t            }\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.getParams().setParam(name, value);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || this.fileRequest.getUrl();\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            if (!this.headers) {\n\t                this.headers = this.fileRequest.getHeaders().slice(0);\n\t            }\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            var headers = this.getHeaders();\n\t            headers.push({ name: name, value: value });\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.fileRequest.isWithCredentials();\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.fileRequest.getTimeout();\n\t        }\n\t    }, {\n\t        key: 'createChunkResponse',\n\t        value: function createChunkResponse(response) {\n\t            return new ChunkResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return ChunkRequest;\n\t})();\n\t\n\tvar FileResponse = (function () {\n\t    /**\n\t     * @param {ChunkResponse|Object|string} rawResponse\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function FileResponse(rawResponse, fileRequest) {\n\t        _classCallCheck(this, FileResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(FileResponse, [{\n\t        key: 'isFromMultiChunkResponse',\n\t        value: function isFromMultiChunkResponse() {\n\t            if (this.rawResponse instanceof ChunkResponse) {\n\t                return this.rawResponse.getChunkRequest().isMultiChunk();\n\t            }\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            if (this.response != null) {\n\t                return this.response;\n\t            }\n\t            if (this.rawResponse instanceof ChunkResponse) {\n\t                return this.rawResponse.getResponse();\n\t            } else {\n\t                return this.rawResponse;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getJson',\n\t        value: function getJson() {\n\t            var response = this.getResponse();\n\t            if (response == null) {\n\t                return null;\n\t            }\n\t            if (typeof response.getJson === 'function') {\n\t                return response.getJson();\n\t            }\n\t            if (typeof response === 'string') {\n\t                return response === '' ? null : JSON.parse(response);\n\t            }\n\t            return response;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return FileResponse;\n\t})();\n\t\n\tvar Params = (function () {\n\t    function Params(params) {\n\t        _classCallCheck(this, Params);\n\t\n\t        if (Array.isArray(params)) {\n\t            this.params = params.slice(0);\n\t        } else if (typeof params === 'object') {\n\t            this.params = [];\n\t            for (var _name in params) {\n\t                if (params.hasOwnProperty(_name)) {\n\t                    this.params.push({ name: _name, value: params[_name] });\n\t                }\n\t            }\n\t        } else {\n\t            this.params = [];\n\t        }\n\t    }\n\t\n\t    _createClass(Params, [{\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.removeParam(name);\n\t            this.addParam(name, value);\n\t        }\n\t    }, {\n\t        key: 'addParam',\n\t        value: function addParam(name, value) {\n\t            this.params.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'removeParam',\n\t        value: function removeParam(name) {\n\t            this.params = this.params.filter(function (param) {\n\t                return param.name !== name;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name, single) {\n\t            var ret = this.params.filter(function (param) {\n\t                return param.name === name;\n\t            }).map(function (param) {\n\t                return param.value;\n\t            });\n\t\n\t            if (single) {\n\t                return ret.shift();\n\t            }\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'clone',\n\t        value: function clone() {\n\t            return new Params(this.params);\n\t        }\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'toString',\n\t        value: function toString() {\n\t            var params = this.params.map(function (param) {\n\t                return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n\t            });\n\t\n\t            return params.join('&'); //.replace( /%20/g, '+');\n\t        }\n\t    }]);\n\t\n\t    return Params;\n\t})();\n\t\n\tvar MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\t\n\tvar FileRequest = (function () {\n\t    function FileRequest(file) {\n\t        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t        _classCallCheck(this, FileRequest);\n\t\n\t        this.file = file;\n\t        this.name = options.name || 'file';\n\t        this.url = options.url || options.action;\n\t        this.params = new Params(options.params || options.data);\n\t        this.headers = options.headers || [];\n\t        this.withCredentials = options.withCredentials;\n\t        this.timeout = options.timeout || 0;\n\t        this.chunkSize = options.chunkSize || 0;\n\t        this.chunkRetries = options.chunkRetries || 0;\n\t        this.chunkEnable = options.chunkEnable || false;\n\t        this.chunkProcessThreads = options.chunkProcessThreads || 2;\n\t    }\n\t\n\t    _createClass(FileRequest, [{\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.file;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || '';\n\t        }\n\t    }, {\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.name;\n\t        }\n\t    }, {\n\t        key: 'setName',\n\t        value: function setName(name) {\n\t            this.name = name;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.params.setParam(name, value);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            this.headers.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.withCredentials;\n\t        }\n\t    }, {\n\t        key: 'setWithCredentials',\n\t        value: function setWithCredentials(flag) {\n\t            this.withCredentials = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.timeout;\n\t        }\n\t    }, {\n\t        key: 'setTimeout',\n\t        value: function setTimeout(timeout) {\n\t            this.timeout = timeout;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkSize',\n\t        value: function getChunkSize() {\n\t            return (0, _util.parseSize)(this.chunkSize);\n\t        }\n\t    }, {\n\t        key: 'setChunkSize',\n\t        value: function setChunkSize(chunkSize) {\n\t            this.chunkSize = chunkSize;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkRetries',\n\t        value: function getChunkRetries() {\n\t            return this.chunkRetries;\n\t        }\n\t    }, {\n\t        key: 'setChunkRetries',\n\t        value: function setChunkRetries(retries) {\n\t            this.chunkRetries = retries;\n\t            return 0;\n\t        }\n\t    }, {\n\t        key: 'isChunkEnable',\n\t        value: function isChunkEnable() {\n\t            var chunkSize = this.getChunkSize();\n\t            return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n\t        }\n\t    }, {\n\t        key: 'setChunkEnable',\n\t        value: function setChunkEnable(flag) {\n\t            this.chunkEnable = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkProcessThreads',\n\t        value: function getChunkProcessThreads() {\n\t            return this.chunkProcessThreads;\n\t        }\n\t    }, {\n\t        key: 'setChunkProcessThreads',\n\t        value: function setChunkProcessThreads(threads) {\n\t            this.chunkProcessThreads = threads;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'createChunkRequest',\n\t        value: function createChunkRequest(index, blob) {\n\t            return new ChunkRequest(index, blob, this);\n\t        }\n\t    }, {\n\t        key: 'createFileResponse',\n\t        value: function createFileResponse(response) {\n\t            return new FileResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return FileRequest;\n\t})();\n\t\n\texports['default'] = FileRequest;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(9);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _file = __webpack_require__(12);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar MAX_NUM_ONCE = 100;\n\t\n\tfunction createReader(collector) {\n\t    return function (dataTransfer, responders) {\n\t        var items = dataTransfer.items,\n\t            files = dataTransfer.files;\n\t        var item = undefined,\n\t            times = MAX_NUM_ONCE;\n\t        var _break = false;\n\t\n\t        function collect(file) {\n\t            if (--times < 0 || !collector(file, responders)) {\n\t                _break = true;\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t\n\t        function readEntry(entry) {\n\t            if (_break) return;\n\t            if (entry.isFile) {\n\t                entry.file(function (file) {\n\t                    if (!_break) {\n\t                        collect(file);\n\t                    }\n\t                });\n\t            } else if (entry.isDirectory) {\n\t                entry.createReader().readEntries(function (entries) {\n\t                    if (_break) return;\n\t                    for (var i = 0, l = entries.length; i < l; i++) {\n\t                        if (_break) break;\n\t                        readEntry(entries[i]);\n\t                    }\n\t                });\n\t            }\n\t        }\n\t\n\t        for (var i = 0, l = files.length; i < l; i++) {\n\t            if (_break) break;\n\t            item = items && items[i];\n\t\n\t            var entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\t\n\t            if (entry && entry.isDirectory) {\n\t                readEntry(entry);\n\t            } else {\n\t                if (!collect(files[i])) {\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t    };\n\t}\n\t\n\tvar Area = (function (_Emitter) {\n\t    _inherits(Area, _Emitter);\n\t\n\t    function Area(area) {\n\t        _classCallCheck(this, Area);\n\t\n\t        _get(Object.getPrototypeOf(Area.prototype), 'constructor', this).call(this);\n\t\n\t        this.areaElement = area;\n\t    }\n\t\n\t    _createClass(Area, [{\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areaElement.contains(target);\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e, allowed) {\n\t            this.emit('start', e, allowed);\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e, allowed) {\n\t            allowed = allowed && this.contains(e.target);\n\t            this.emit('response', e, allowed);\n\t            return allowed;\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.emit('end', e);\n\t        }\n\t    }]);\n\t\n\t    return Area;\n\t})(_emitter2['default']);\n\t\n\tvar Collectors = [];\n\t\n\tfunction prepare() {\n\t    if (!('DataTransfer' in window) || !('FileList' in window) || !document.addEventListener) {\n\t        return;\n\t    }\n\t\n\t    var runtime = _html5Runtime2['default'].getInstance();\n\t\n\t    var started = 0,\n\t        enter = 0,\n\t        endTimer = undefined;\n\t    var dataTransferReader = createReader(function (file, responders) {\n\t        if (!responders || responders.length < 1) {\n\t            return false;\n\t        }\n\t        file = new _file2['default'](runtime, file);\n\t        var total = responders.length;\n\t        return responders.some(function (responder) {\n\t            var ret = responder.recieve(file);\n\t            if (ret > 0) {\n\t                return true;\n\t            }\n\t            if (ret < 0) {\n\t                total -= 1;\n\t            }\n\t            return false;\n\t        }) || total > 0;\n\t    });\n\t\n\t    var start = function start(e) {\n\t        started = 1;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.start(e);\n\t        });\n\t    };\n\t\n\t    var move = function move(e) {\n\t        var has = Collectors.filter(function (responder) {\n\t            return responder.response(e);\n\t        }).length > 0;\n\t\n\t        var dataTransfer = e.dataTransfer;\n\t\n\t        if (dataTransfer) {\n\t            dataTransfer.dropEffect = has ? 'copy' : 'none';\n\t        }\n\t        e.preventDefault();\n\t    };\n\t\n\t    var end = function end(e) {\n\t        started = 0;\n\t        enter = 0;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.end(e);\n\t        });\n\t    };\n\t\n\t    var drag = function drag(e) {\n\t        clearTimeout(endTimer);\n\t        var isLeave = e.type === 'dragleave';\n\t        if (!isLeave && !started) {\n\t            start(e);\n\t        }\n\t        move(e);\n\t        if (isLeave) {\n\t            endTimer = setTimeout(function () {\n\t                return end(e);\n\t            }, 100);\n\t        }\n\t    };\n\t    var drop = function drop(e) {\n\t        e.preventDefault();\n\t\n\t        clearTimeout(endTimer);\n\t        end(e);\n\t\n\t        var responders = Collectors.filter(function (responder) {\n\t            return responder.contains(e.target);\n\t        });\n\t\n\t        if (responders.length < 1) {\n\t            return;\n\t        }\n\t\n\t        var dataTransfer = e.dataTransfer;\n\t\n\t        try {\n\t            if (dataTransfer.getData('text/html')) {\n\t                return;\n\t            }\n\t        } catch (ex) {}\n\t\n\t        dataTransferReader(dataTransfer, responders);\n\t    };\n\t\n\t    document.addEventListener('dragenter', drag, false);\n\t    document.addEventListener('dragover', drag, false);\n\t    document.addEventListener('dragleave', drag, false);\n\t    document.addEventListener('drop', drop, false);\n\t}\n\t\n\tvar DndCollector = (function () {\n\t    function DndCollector(core) {\n\t        _classCallCheck(this, DndCollector);\n\t\n\t        if (Collectors.length < 1) {\n\t            prepare();\n\t        }\n\t        Collectors.push(this);\n\t\n\t        this.core = core;\n\t        this.areas = [];\n\t    }\n\t\n\t    _createClass(DndCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            var _this = this;\n\t\n\t            area = new Area(area);\n\t            this.areas.push(area);\n\t            area.destroy = function () {\n\t                area.removeAllListeners();\n\t                var i = _this.areas.indexOf(area);\n\t                if (i > -1) {\n\t                    _this.areas.splice(i, 1);\n\t                }\n\t            };\n\t\n\t            return area;\n\t        }\n\t    }, {\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areas.some(function (area) {\n\t                return area.contains(target);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.start(e);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e) {\n\t            return this.areas.map(function (area) {\n\t                return area.response(e);\n\t            }).some(function (r) {\n\t                return r !== false;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'recieve',\n\t        value: function recieve(file) {\n\t            var ret = this.core.add(file);\n\t            if (ret > 0 && !this.core.isMultiple()) {\n\t                return -1;\n\t            } else {\n\t                return ret;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.end(e);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return DndCollector;\n\t})();\n\t\n\texports['default'] = DndCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _runtime = __webpack_require__(10);\n\t\n\tvar _runtime2 = _interopRequireDefault(_runtime);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _transport = __webpack_require__(11);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tvar instance = undefined;\n\t\n\tvar Html5Runtime = (function (_Runtime) {\n\t    _inherits(Html5Runtime, _Runtime);\n\t\n\t    function Html5Runtime() {\n\t        _classCallCheck(this, Html5Runtime);\n\t\n\t        _get(Object.getPrototypeOf(Html5Runtime.prototype), 'constructor', this).apply(this, arguments);\n\t    }\n\t\n\t    _createClass(Html5Runtime, [{\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(blob, timeout) {\n\t            var i = (0, _util.Deferred)(),\n\t                fr = new FileReader(),\n\t                timer = undefined;\n\t\n\t            fr.onloadend = function () {\n\t                if (fr.readyState == FileReader.DONE) {\n\t                    i.resolve(fr.result);\n\t                } else {\n\t                    i.reject();\n\t                }\n\t                clearTimeout(timer);\n\t                fr.onloadend = null;\n\t            };\n\t            fr.readAsDataURL(blob);\n\t\n\t            var abort = function abort() {\n\t                fr && fr.abort();\n\t                fr = null;\n\t            };\n\t            if (timeout) {\n\t                timer = setTimeout(abort, timeout);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            if (!this.transport) {\n\t                this.transport = new _transport2['default'](this);\n\t            }\n\t            return this.transport;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob, start, end) {\n\t            var blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\t\n\t            return blobSlice.call(blob, start, end);\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = (0, _util.Deferred)();\n\t\n\t            if (!window.SparkMD5) {\n\t                i.reject();\n\t                return i.promise();\n\t            }\n\t\n\t            var chunkSize = 2 * 1024 * 1024,\n\t                chunks = Math.ceil(blob.size / chunkSize),\n\t                chunk = 0,\n\t                spark = new SparkMD5.ArrayBuffer(),\n\t                blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\t\n\t            var fr = new FileReader();\n\t\n\t            var _loadNext = function loadNext() {\n\t                if (!fr) return;\n\t                var start = undefined,\n\t                    end = undefined;\n\t\n\t                start = chunk * chunkSize;\n\t                end = Math.min(start + chunkSize, blob.size);\n\t\n\t                fr.onload = function () {\n\t                    spark && spark.append(fr.result);\n\t                };\n\t\n\t                fr.onloadend = function () {\n\t                    if (!fr) return;\n\t                    if (fr.readyState == FileReader.DONE) {\n\t                        if (++chunk < chunks) {\n\t                            setTimeout(_loadNext, 1);\n\t                        } else {\n\t                            setTimeout(function () {\n\t                                spark && i.resolve(spark.end());\n\t                                _loadNext = blob = spark = null;\n\t                            }, 50);\n\t                        }\n\t                    } else {\n\t                        i.reject();\n\t                    }\n\t                    fr.onloadend = fr.onload = null;\n\t                };\n\t\n\t                fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n\t            };\n\t\n\t            _loadNext();\n\t\n\t            var ret = i.promise();\n\t            ret.abort = function () {\n\t                fr && fr.abort();\n\t                spark = null;\n\t                fr = null;\n\t            };\n\t\n\t            return ret;\n\t        }\n\t    }], [{\n\t        key: 'getInstance',\n\t        value: function getInstance() {\n\t            if (!instance) {\n\t                instance = new Html5Runtime();\n\t            }\n\t            return instance;\n\t        }\n\t    }]);\n\t\n\t    return Html5Runtime;\n\t})(_runtime2['default']);\n\t\n\texports['default'] = Html5Runtime;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar Runtime = (function (_Emitter) {\n\t    _inherits(Runtime, _Emitter);\n\t\n\t    function Runtime() {\n\t        _classCallCheck(this, Runtime);\n\t\n\t        _get(Object.getPrototypeOf(Runtime.prototype), 'constructor', this).apply(this, arguments);\n\t    }\n\t\n\t    _createClass(Runtime, [{\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = (0, _util.Deferred)();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(file, timeout) {\n\t            var i = (0, _util.Deferred)();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            return null;\n\t        }\n\t    }, {\n\t        key: 'getUploading',\n\t        value: function getUploading() {\n\t            if (!this.uploading) {\n\t                this.uploading = new Uploading(this);\n\t            }\n\t            return this.uploading;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob) {\n\t            throw new Error('this runtime current not support slice');\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {}\n\t    }]);\n\t\n\t    return Runtime;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = Runtime;\n\t\n\tvar Uploading = (function () {\n\t    function Uploading(runtime) {\n\t        _classCallCheck(this, Uploading);\n\t\n\t        this.runtime = runtime;\n\t    }\n\t\n\t    /**\n\t     * @param {FileRequest} request\n\t     * @returns {*}\n\t     */\n\t\n\t    _createClass(Uploading, [{\n\t        key: 'generate',\n\t        value: function generate(request) {\n\t            var _this = this;\n\t\n\t            var i = (0, _util.Deferred)(),\n\t                file = request.getFile(),\n\t                runtime = this.runtime;\n\t\n\t            var source = file.getSource(),\n\t                size = file.size,\n\t                chunkSize = request.getChunkSize(),\n\t                useChunk = request.isChunkEnable(),\n\t                threads = Math.max(request.getChunkProcessThreads(), 1),\n\t                start = 0,\n\t                end = 0,\n\t                slots = [];\n\t\n\t            var getActives = function getActives() {\n\t                return slots.reduce(function (sum, slot) {\n\t                    return sum + (slot.state() === 'pending' ? 1 : 0);\n\t                }, 0);\n\t            };\n\t\n\t            var readChunk = function readChunk() {\n\t                var slot = undefined,\n\t                    req = undefined,\n\t                    blob = undefined;\n\t                while (end < size && getActives() < threads) {\n\t                    start = end;\n\t                    end = Math.min(end + chunkSize, size);\n\t                    blob = runtime.slice(source, start, end);\n\t                    req = request.createChunkRequest(slots.length, blob);\n\t                    slot = _this.slot(req, request.getChunkRetries());\n\t                    slot.progress(progress).done(done).fail(fail);\n\t                    slots.push(slot);\n\t                }\n\t            };\n\t\n\t            var progress = function progress() {\n\t                var total = size - end,\n\t                    loaded = 0;\n\t                slots.forEach(function (slot) {\n\t                    total += slot.total;\n\t                    loaded += slot.loaded;\n\t                });\n\t                i.notify({ total: total, loaded: loaded });\n\t            };\n\t\n\t            var done = function done(res) {\n\t                useChunk && readChunk();\n\t\n\t                if (end >= size && slots.every(function (slot) {\n\t                    return slot.state() === 'resolved';\n\t                })) {\n\t                    i.resolve(res);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                slots.forEach(function (slot) {\n\t                    return slot.abort();\n\t                });\n\t            };\n\t\n\t            var fail = function fail(error) {\n\t                i.reject(error);\n\t                abort();\n\t            };\n\t\n\t            if (useChunk) {\n\t                readChunk();\n\t            } else {\n\t                end = size;\n\t                var slot = this.slot(request.createChunkRequest(0, source), 0);\n\t                slot.progress(progress).done(done).fail(fail);\n\t                slots.push(slot);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'slot',\n\t        value: function slot(request, retries) {\n\t            var i = (0, _util.Deferred)(),\n\t                runtime = this.runtime,\n\t                core = request.getFile().getCore();\n\t\n\t            var slot = i.promise();\n\t\n\t            var progress = function progress(e) {\n\t                if (e.total) {\n\t                    slot.total = e.total;\n\t                }\n\t                if (e.loaded) {\n\t                    slot.loaded = e.loaded;\n\t                }\n\t                i.notify(e);\n\t            };\n\t\n\t            var process = function process() {\n\t                var prepare, transport, completion;\n\t                slot.abort = function () {\n\t                    prepare && prepare.abort();\n\t                    transport && transport.abort();\n\t                    completion && completion.abort();\n\t                };\n\t                slot.total = request.getBlob().size;\n\t                slot.loaded = 0;\n\t\n\t                prepare = core.invoke(_events2['default'].CHUNK_UPLOAD_PREPARING, request);\n\t\n\t                prepare.then(function (request) {\n\t                    transport = runtime.getTransport().generate(request);\n\t                    transport.progress(progress);\n\t                    return transport;\n\t                }).then(function (response) {\n\t                    completion = core.invoke(_events2['default'].CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n\t                    return completion;\n\t                }).done(i.resolve).fail(error);\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e instanceof _errors.NetworkError && retries-- > 0) {\n\t                    // retry\n\t                    setTimeout(process, 500);\n\t                } else {\n\t                    i.reject(e);\n\t                }\n\t                slot.abort();\n\t            };\n\t\n\t            process();\n\t\n\t            return slot;\n\t        }\n\t    }]);\n\t\n\t    return Uploading;\n\t})();\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar Html5Transport = (function () {\n\t    function Html5Transport() {\n\t        _classCallCheck(this, Html5Transport);\n\t    }\n\t\n\t    _createClass(Html5Transport, [{\n\t        key: 'generate',\n\t\n\t        /**\n\t         * @param {ChunkRequest} request\n\t         * @returns {*}\n\t         */\n\t        value: function generate(request) {\n\t            var i = (0, _util.Deferred)();\n\t            var xhr = new XMLHttpRequest();\n\t\n\t            var timeoutTimer = undefined;\n\t\n\t            var clean = function clean() {\n\t                xhr.onload = xhr.onerror = null;\n\t                if (xhr.upload) {\n\t                    xhr.upload.onprogress = null;\n\t                }\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                clean();\n\t                try {\n\t                    xhr.abort();\n\t                } catch (e) {}\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                clean();\n\t                if (!xhr.status && e.type === 'error') {\n\t                    return i.reject(new _errors.AbortError(e.message));\n\t                }\n\t                if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n\t                    return i.resolve(xhr.responseText);\n\t                }\n\t                return i.reject(new _errors.NetworkError(xhr.status, xhr.statusText));\n\t            };\n\t\n\t            if (xhr.upload) {\n\t                xhr.upload.onprogress = function (e) {\n\t                    return i.notify(e);\n\t                };\n\t            }\n\t            xhr.onerror = complete;\n\t            xhr.onload = complete;\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new _errors.TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                (function () {\n\t                    xhr.open('POST', request.getUrl(), true);\n\t                    if (request.isWithCredentials()) {\n\t                        xhr.withCredentials = true;\n\t                    }\n\t\n\t                    request.getHeaders().forEach(function (header) {\n\t                        return xhr.setRequestHeader(header.name, header.value);\n\t                    });\n\t\n\t                    var formData = new FormData(),\n\t                        blob = request.getBlob();\n\t\n\t                    request.getParams().toArray().forEach(function (param) {\n\t                        return formData.append(param.name, param.value);\n\t                    });\n\t\n\t                    formData.append(request.getName(), blob, blob.name || 'blob');\n\t\n\t                    xhr.send(formData);\n\t                })();\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return Html5Transport;\n\t})();\n\t\n\texports['default'] = Html5Transport;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _status = __webpack_require__(5);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar uid = 0;\n\tfunction guid() {\n\t    return 'FILE-' + (uid++).toString(16).toUpperCase();\n\t}\n\t\n\tvar RE_EXT = /\\.([^.]+)$/,\n\t    RE_IMAGE = /^image\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\n\tfunction guessExt(blob) {\n\t    var m = blob.name && RE_EXT.exec(blob.name);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    m = blob.type && RE_IMAGE.exec(blob.type);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    return '';\n\t}\n\t\n\tfunction guessType(ext) {\n\t    if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'].indexOf(ext.toLowerCase()) > -1) {\n\t        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n\t    }\n\t    return null;\n\t}\n\t\n\tvar Progress = (function () {\n\t    function Progress(total, loaded) {\n\t        _classCallCheck(this, Progress);\n\t\n\t        this.change(total, loaded);\n\t    }\n\t\n\t    _createClass(Progress, [{\n\t        key: 'change',\n\t        value: function change(total, loaded) {\n\t            this.total = total;\n\t            this.loaded = loaded || 0;\n\t            this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100);\n\t        }\n\t    }, {\n\t        key: 'done',\n\t        value: function done() {\n\t            this.change(this.total, this.total);\n\t        }\n\t    }]);\n\t\n\t    return Progress;\n\t})();\n\t\n\texports['default'] = Progress;\n\t\n\tvar File = (function (_Emitter) {\n\t    _inherits(File, _Emitter);\n\t\n\t    function File(runtime, source, filename) {\n\t        _classCallCheck(this, File);\n\t\n\t        _get(Object.getPrototypeOf(File.prototype), 'constructor', this).call(this);\n\t\n\t        this.id = guid();\n\t\n\t        this.name = source.name || filename || this.id;\n\t\n\t        var ext = guessExt(source).toLowerCase();\n\t\n\t        if (ext && !RE_EXT.test(this.name)) {\n\t            this.name += '.' + ext;\n\t        }\n\t\n\t        this.ext = ext;\n\t\n\t        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\t\n\t        this.lastModified = source.lastModified || +new Date();\n\t\n\t        this.size = source.size || 0;\n\t\n\t        this.runtime = runtime;\n\t\n\t        this.source = source;\n\t\n\t        this.status = _status2['default'].INITED;\n\t\n\t        this.progress = new Progress(this.size, 0);\n\t    }\n\t\n\t    _createClass(File, [{\n\t        key: 'getCore',\n\t        value: function getCore() {\n\t            return this.core;\n\t        }\n\t    }, {\n\t        key: 'setCore',\n\t        value: function setCore(core) {\n\t            this.core = core;\n\t            this.setPropagationTarget(core);\n\t        }\n\t    }, {\n\t        key: 'getRuntime',\n\t        value: function getRuntime() {\n\t            return this.runtime;\n\t        }\n\t    }, {\n\t        key: 'isImage',\n\t        value: function isImage() {\n\t            return RE_IMAGE.test(this.type);\n\t        }\n\t    }, {\n\t        key: 'setStatus',\n\t        value: function setStatus(status) {\n\t            var prevStatus = this.status;\n\t\n\t            if (prevStatus !== _status2['default'].CANCELLED && status !== prevStatus) {\n\t                this.status = status;\n\t                this.emit(_events2['default'].FILE_STATUS_CHANGE, status, prevStatus);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getStatus',\n\t        value: function getStatus() {\n\t            return this.status;\n\t        }\n\t    }, {\n\t        key: 'getStatusName',\n\t        value: function getStatusName() {\n\t            if (this.status in _status.StatusName) {\n\t                return _status.StatusName[this.status];\n\t            } else {\n\t                return 'unknow';\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getSource',\n\t        value: function getSource() {\n\t            return this.source;\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(timeout) {\n\t            if (!this._dataUrlPromise) {\n\t                this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n\t            }\n\t            return this._dataUrlPromise;\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5() {\n\t            if (!this._md5Promise) {\n\t                this._md5Promise = this.runtime.md5(this.source);\n\t            }\n\t            return this._md5Promise;\n\t        }\n\t    }, {\n\t        key: 'session',\n\t        value: function session() {\n\t            var _this = this;\n\t\n\t            if (this._sessionPromise) {\n\t                return this._sessionPromise;\n\t            }\n\t\n\t            var session = (0, _util.Deferred)();\n\t\n\t            session.progress(function (progress) {\n\t                _this.setStatus(_status2['default'].PROGRESS);\n\t                _this.emit(_events2['default'].FILE_UPLOAD_PROGRESS, progress);\n\t            }).done(function (response) {\n\t                _this.response = response;\n\t                _this._session = null;\n\t                _this._sessionPromise = null;\n\t                _this._flows = [];\n\t                _this.setStatus(_status2['default'].SUCCESS);\n\t                _this.emit(_events2['default'].FILE_UPLOAD_SUCCESS, response);\n\t            }).fail(function (error) {\n\t                _this._session = null;\n\t                _this._sessionPromise = null;\n\t                var flow = undefined;\n\t                while (flow = _this._flows.shift()) {\n\t                    flow.abort();\n\t                }\n\t\n\t                if (error instanceof Error) {\n\t                    _this.setStatus(_status2['default'].ERROR);\n\t                    _this.emit(_events2['default'].FILE_UPLOAD_ERROR, error);\n\t                }\n\t            }).always(function () {\n\t                _this.emit(_events2['default'].FILE_UPLOAD_COMPLETED, _this.getStatus());\n\t            });\n\t\n\t            this._flows = [];\n\t            this._session = session;\n\t            this._sessionPromise = session.promise();\n\t\n\t            return this._sessionPromise;\n\t        }\n\t    }, {\n\t        key: 'prepare',\n\t        value: function prepare() {\n\t            var _this2 = this;\n\t\n\t            if (this.status !== _status2['default'].PENDING || !this.core) {\n\t                return false;\n\t            }\n\t\n\t            this.session();\n\t            this.setStatus(_status2['default'].PROGRESS);\n\t\n\t            this.emit(_events2['default'].FILE_UPLOAD_START);\n\t\n\t            this.request = this.core.createFileRequest(this);\n\t\n\t            var prepare = this.core.invoke(_events2['default'].FILE_UPLOAD_PREPARING, this.request);\n\t\n\t            this._flows.push(prepare);\n\t\n\t            prepare.then(function (request) {\n\t                _this2.emit(_events2['default'].FILE_UPLOAD_PREPARED, request);\n\t\n\t                var upload = _this2.runtime.getUploading().generate(request);\n\t\n\t                _this2._flows.push(upload);\n\t\n\t                upload.progress(function (e) {\n\t                    _this2.progress.change(e.total, e.loaded);\n\t                    _this2._session.notify(_this2.progress);\n\t                });\n\t\n\t                return upload;\n\t            }).then(function (response) {\n\t                return _this2.complete(response);\n\t            }, this._session.reject);\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'complete',\n\t        value: function complete(response) {\n\t            if (this.status !== _status2['default'].PROGRESS) return;\n\t\n\t            var flow = undefined;\n\t            while (flow = this._flows.shift()) {\n\t                flow.abort();\n\t            }\n\t\n\t            this.progress.done();\n\t            this._session.notify(this.progress);\n\t\n\t            response = this.request.createFileResponse(response);\n\t\n\t            this.setStatus(_status2['default'].END);\n\t            this.emit(_events2['default'].FILE_UPLOAD_END);\n\t\n\t            var complete = this.core.invoke(_events2['default'].FILE_UPLOAD_COMPLETING, response);\n\t\n\t            this._flows.push(complete);\n\t\n\t            complete.then(this._session.resolve, this._session.reject);\n\t        }\n\t    }, {\n\t        key: 'pending',\n\t        value: function pending() {\n\t            if (this.status === _status2['default'].ERROR || this.status === _status2['default'].QUEUED) {\n\t                this.progress.change(this.size, 0);\n\t                this.setStatus(_status2['default'].PENDING);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort() {\n\t            this._session && this._session.reject();\n\t            this._session = null;\n\t            this._sessionPromise = null;\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel() {\n\t            this.setStatus(_status2['default'].CANCELLED);\n\t            this.emit(_events2['default'].FILE_CANCEL);\n\t            this.abort();\n\t            this.runtime.cancel(this.source);\n\t            this._dataUrlPromise && this._dataUrlPromise.abort();\n\t            this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n\t            this.removeAllListeners();\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this.cancel();\n\t        }\n\t    }]);\n\t\n\t    return File;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = File;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(9);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _file = __webpack_require__(12);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar PasteCollector = (function () {\n\t    function PasteCollector(core) {\n\t        _classCallCheck(this, PasteCollector);\n\t\n\t        this.core = core;\n\t        this.runtime = _html5Runtime2['default'].getInstance();\n\t    }\n\t\n\t    _createClass(PasteCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            var core = this.core,\n\t                runtime = this.runtime,\n\t                emitter = new _emitter2['default']();\n\t\n\t            var paste = function paste(e) {\n\t\n\t                var clipboardData = e.clipboardData || window.clipboardData,\n\t                    items = clipboardData.items,\n\t                    files = clipboardData.files;\n\t\n\t                if (!files && !items) {\n\t                    return;\n\t                }\n\t\n\t                var prevent = undefined,\n\t                    i = undefined,\n\t                    l = undefined,\n\t                    file = undefined,\n\t                    item = undefined,\n\t                    addRet = undefined;\n\t\n\t                if (files && files.length) {\n\t                    // safari has files\n\t                    prevent = files.length > 0;\n\t                    for (i = 0, l = files.length; i < l; i++) {\n\t                        file = new _file2['default'](runtime, files[i]);\n\t\n\t                        prevent = 1;\n\t\n\t                        addRet = core.add(file);\n\t                        if (addRet < 0 || addRet > 0 && !core.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                } else if (items && items.length) {\n\t                    // chrome has items\n\t                    var filename = clipboardData.getData('text/plain');\n\t                    for (i = 0, l = items.length; i < l && !core.isLimit(); i++) {\n\t                        item = items[i];\n\t\n\t                        if (item.kind !== 'file' || !(file = item.getAsFile())) {\n\t                            continue;\n\t                        }\n\t\n\t                        file = new _file2['default'](runtime, file, filename);\n\t                        filename = null;\n\t\n\t                        prevent = 1;\n\t\n\t                        addRet = core.add(file);\n\t                        if (addRet < 0 || addRet > 0 && !core.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                if (prevent) {\n\t                    e.preventDefault();\n\t                    e.stopPropagation();\n\t                    emitter.emit('paste', clipboardData);\n\t                }\n\t            };\n\t\n\t            if ('DataTransfer' in window && 'FileList' in window && area.addEventListener) {\n\t                area.addEventListener('paste', paste, false);\n\t            }\n\t\n\t            emitter.destroy = function () {\n\t                emitter.removeAllListeners();\n\t                if (area.removeEventListener) {\n\t                    area.removeEventListener('paste', paste, false);\n\t                }\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return PasteCollector;\n\t})();\n\t\n\texports['default'] = PasteCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(9);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _flashRuntime = __webpack_require__(15);\n\t\n\tvar _flashRuntime2 = _interopRequireDefault(_flashRuntime);\n\t\n\tvar _file = __webpack_require__(12);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar SWF_URL = '';\n\t\n\tvar createElement = (function () {\n\t    var div = document.createElement('div');\n\t    return function (html) {\n\t        div.innerHTML = html;\n\t        html = div.firstChild;\n\t        div.removeChild(html);\n\t        return html;\n\t    };\n\t})();\n\t\n\tvar FlashTriggerCollection = (function () {\n\t    function FlashTriggerCollection(core, onFiles) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, FlashTriggerCollection);\n\t\n\t        var overlay = createElement('<label style=\"position:fixed;left:-100px;top:-100px;width:50px;height:50px;display:block;cursor:pointer;overflow:hidden;z-index:99999;opacity:0;filter:alpha(opacity=0)\"></label>');\n\t\n\t        var runtime = new _flashRuntime2['default'](overlay, SWF_URL, function () {\n\t            return {\n\t                accept: core.getAccept(),\n\t                multiple: core.isMultiple()\n\t            };\n\t        });\n\t\n\t        runtime.on('select', function (e) {\n\t            onFiles(e.files, runtime);\n\t            _this.current && _this.current.emit('files', e.files, runtime);\n\t        });\n\t\n\t        runtime.on('rollOut', function () {\n\t            return _this.hideOverlay();\n\t        });\n\t\n\t        document.body.appendChild(overlay);\n\t        this.overlay = overlay;\n\t    }\n\t\n\t    _createClass(FlashTriggerCollection, [{\n\t        key: 'hideOverlay',\n\t        value: function hideOverlay() {\n\t            (0, _util.extend)(this.overlay.style, {\n\t                left: '-100px',\n\t                top: '-100px',\n\t                width: '50px',\n\t                height: '50px'\n\t            });\n\t            if (this.current) {\n\t                this.current.emit('rollOut');\n\t                this.current = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            var _this2 = this;\n\t\n\t            var overlay = this.overlay,\n\t                emitter = new _emitter2['default']();\n\t            var mouseover = function mouseover() {\n\t                var rect = trigger.getBoundingClientRect();\n\t                (0, _util.extend)(overlay.style, {\n\t                    left: rect.left + 'px',\n\t                    top: rect.top + 'px',\n\t                    width: rect.right - rect.left + 'px',\n\t                    height: rect.bottom - rect.top + 'px'\n\t                });\n\t                emitter.emit('rollOver');\n\t                if (_this2.current && _this2.current !== emitter) {\n\t                    _this2.current.emit('rollOut');\n\t                }\n\t                _this2.current = emitter;\n\t            };\n\t\n\t            if (trigger.addEventListener) {\n\t                trigger.addEventListener('mouseover', mouseover, false);\n\t            } else if (trigger.attachEvent) {\n\t                trigger.attachEvent(\"onmouseover\", mouseover);\n\t            }\n\t\n\t            emitter.destroy = function () {\n\t                if (_this2.current === emitter) {\n\t                    _this2.hideOverlay();\n\t                }\n\t                emitter.removeAllListeners();\n\t                if (trigger.removeEventListener) {\n\t                    trigger.removeEventListener('mouseover', mouseover, false);\n\t                } else if (trigger.detachEvent) {\n\t                    trigger.detachEvent(\"onmouseover\", mouseover);\n\t                }\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return FlashTriggerCollection;\n\t})();\n\t\n\tvar Html5Trigger = (function (_Emitter) {\n\t    _inherits(Html5Trigger, _Emitter);\n\t\n\t    function Html5Trigger(trigger, core, onFiles) {\n\t        var _this3 = this;\n\t\n\t        _classCallCheck(this, Html5Trigger);\n\t\n\t        _get(Object.getPrototypeOf(Html5Trigger.prototype), 'constructor', this).call(this);\n\t\n\t        this.trigger = trigger;\n\t        this.core = core;\n\t        this.label = createElement('<label style=\"position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;cursor:pointer;background:#fff;overflow:hidden;opacity:0\"></label>');\n\t\n\t        this.onChange = function (e) {\n\t            onFiles(e.target.files);\n\t            _this3.destroyInput();\n\t            _this3.createInput();\n\t        };\n\t        trigger.appendChild(this.label);\n\t        this.createInput();\n\t    }\n\t\n\t    _createClass(Html5Trigger, [{\n\t        key: 'createInput',\n\t        value: function createInput() {\n\t            var input = createElement('<input type=\"file\" style=\"position:absolute;clip:rect(1px 1px 1px 1px);\" />');\n\t\n\t            var accept = this.core.getAccept();\n\t            if (accept && accept.length > 0) {\n\t                accept = accept.map(function (item) {\n\t                    return item.mimeTypes || '.' + item.extensions.join(',.');\n\t                });\n\t\n\t                input.setAttribute('accept', accept.join(','));\n\t            }\n\t            if (this.core.isMultiple()) {\n\t                input.setAttribute('multiple', 'multiple');\n\t            }\n\t\n\t            input.addEventListener('change', this.onChange, false);\n\t\n\t            this.label.appendChild(input);\n\t            this.input = input;\n\t        }\n\t    }, {\n\t        key: 'destroyInput',\n\t        value: function destroyInput() {\n\t            if (!this.input) return;\n\t            this.input.removeEventListener('change', this.onChange, false);\n\t            this.label.removeChild(this.input);\n\t            this.input = null;\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this.destroyInput();\n\t            this.removeAllListeners();\n\t            this.trigger.removeChild(this.label);\n\t        }\n\t    }]);\n\t\n\t    return Html5Trigger;\n\t})(_emitter2['default']);\n\t\n\tvar Html5TriggerCollection = (function () {\n\t    function Html5TriggerCollection(core, onFiles) {\n\t        _classCallCheck(this, Html5TriggerCollection);\n\t\n\t        var runtime = _html5Runtime2['default'].getInstance();\n\t        this.core = core;\n\t        this.onFiles = function (files) {\n\t            onFiles(files, runtime);\n\t        };\n\t    }\n\t\n\t    _createClass(Html5TriggerCollection, [{\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            return new Html5Trigger(trigger, this.core, this.onFiles);\n\t        }\n\t    }]);\n\t\n\t    return Html5TriggerCollection;\n\t})();\n\t\n\tvar PickerCollector = (function () {\n\t    _createClass(PickerCollector, null, [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            SWF_URL = url;\n\t        }\n\t    }]);\n\t\n\t    function PickerCollector(core) {\n\t        _classCallCheck(this, PickerCollector);\n\t\n\t        var onFiles = function onFiles(files, runtime) {\n\t            for (var i = 0, l = files.length; i < l; i++) {\n\t                if (core.add(new _file2['default'](runtime, files[i])) < 0) {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t\n\t        if ('DataTransfer' in window && 'FileList' in window) {\n\t            this.triggerCollection = new Html5TriggerCollection(core, onFiles);\n\t        } else {\n\t            this.triggerCollection = new FlashTriggerCollection(core, onFiles);\n\t        }\n\t    }\n\t\n\t    _createClass(PickerCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            return this.triggerCollection.add(area);\n\t        }\n\t    }]);\n\t\n\t    return PickerCollector;\n\t})();\n\t\n\texports['default'] = PickerCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _runtime = __webpack_require__(10);\n\t\n\tvar _runtime2 = _interopRequireDefault(_runtime);\n\t\n\tvar _transport = __webpack_require__(16);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tfunction getFlashVersion() {\n\t    var version = undefined;\n\t\n\t    try {\n\t        version = navigator.plugins['Shockwave Flash'];\n\t        version = version.description;\n\t    } catch (e1) {\n\t        try {\n\t            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t        } catch (e2) {\n\t            version = '0.0';\n\t        }\n\t    }\n\t    version = version.match(/\\d+/g);\n\t    return parseFloat(version[0] + '.' + version[1]);\n\t}\n\t\n\tfunction callFlash(movie, functionName, argumentArray) {\n\t    try {\n\t        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n\t    } catch (ex) {\n\t        throw \"Call to \" + functionName + \" failed\";\n\t    }\n\t}\n\t\n\tfunction createFlash(swf, callInterface) {\n\t    if (getFlashVersion() < 11.4) {\n\t        throw 'flash player is not available';\n\t    }\n\t    var div = document.createElement('div');\n\t    var url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n\t    var attrs = ['id=\"' + callInterface + '-Picker\"', 'type=\"application/x-shockwave-flash\"', 'data=\"' + url + '\"', 'width=\"100%\" height=\"100%\"', 'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'];\n\t    if (window.ActiveXObject) {\n\t        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n\t    }\n\t    div.innerHTML = '<object ' + attrs.join(' ') + '>' + '<param name=\"movie\" value=\"' + url + '\" />' + '<param name=\"wmode\" value=\"transparent\" />' + '<param name=\"allowscriptaccess\" value=\"always\" />' + '</object>';\n\t\n\t    return div.firstChild;\n\t}\n\t\n\tvar _guid = +new Date();\n\tfunction guid(_x4) {\n\t    var _again2 = true;\n\t\n\t    _function2: while (_again2) {\n\t        var prefix = _x4;\n\t        ret = undefined;\n\t        _again2 = false;\n\t\n\t        var ret = prefix + (_guid++).toString(16);\n\t        if (ret in window) {\n\t            _x4 = prefix;\n\t            _again2 = true;\n\t            continue _function2;\n\t        }\n\t        return ret;\n\t    }\n\t}\n\t\n\tvar FlashRuntime = (function (_Runtime) {\n\t    _inherits(FlashRuntime, _Runtime);\n\t\n\t    function FlashRuntime(trigger, swf, options) {\n\t        _classCallCheck(this, FlashRuntime);\n\t\n\t        _get(Object.getPrototypeOf(FlashRuntime.prototype), 'constructor', this).call(this);\n\t\n\t        var callInterface = guid('FlashRuntime');\n\t\n\t        this.callInterface = callInterface;\n\t        window[callInterface] = this;\n\t\n\t        this.options = options;\n\t\n\t        var _this = this;\n\t        function display() {\n\t            var w = trigger.offsetWidth,\n\t                h = trigger.offsetHeight,\n\t                flash = undefined;\n\t            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n\t                setTimeout(display, 1000);\n\t                return;\n\t            }\n\t\n\t            trigger.appendChild(_this.flash = flash);\n\t        }\n\t\n\t        display();\n\t    }\n\t\n\t    _createClass(FlashRuntime, [{\n\t        key: 'getOptions',\n\t        value: function getOptions() {\n\t            var options = this.options;\n\t            if (typeof options === 'function') {\n\t                options = options();\n\t            }\n\t            return options;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport(name, blob, options) {\n\t            return new _transport2['default'](this, name, blob, options);\n\t        }\n\t    }, {\n\t        key: 'send',\n\t        value: function send(name, blob, url, params) {\n\t            callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort(blob) {\n\t            try {\n\t                callFlash(this.flash, 'exec', ['abort', blob.id]);\n\t            } catch (e) {}\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {\n\t            callFlash(this.flash, 'exec', ['cancel', blob.id]);\n\t        }\n\t    }, {\n\t        key: 'ping',\n\t        value: function ping() {\n\t            callFlash(this.flash, 'exec', ['pang']);\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            delete window[this.callInterface];\n\t        }\n\t    }]);\n\t\n\t    return FlashRuntime;\n\t})(_runtime2['default']);\n\t\n\texports['default'] = FlashRuntime;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar FlashTransport = (function () {\n\t    function FlashTransport(flashRuntime) {\n\t        _classCallCheck(this, FlashTransport);\n\t\n\t        this.flashRuntime = flashRuntime;\n\t    }\n\t\n\t    /**\n\t     * @param {ChunkRequest} request\n\t     * @returns {*}\n\t     */\n\t\n\t    _createClass(FlashTransport, [{\n\t        key: 'generate',\n\t        value: function generate(request) {\n\t            var i = (0, _util.Deferred)(),\n\t                flashRuntime = this.flashRuntime,\n\t                blob = request.getBlob();\n\t\n\t            var timeoutTimer = undefined;\n\t\n\t            var clean = function clean() {\n\t                flashRuntime.off('uploadprogress', progress);\n\t                flashRuntime.off('uploadcomplete', complete);\n\t                flashRuntime.off('uploaderror', error);\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t            var abort = function abort() {\n\t                clean();\n\t                flashRuntime.abort(blob.id);\n\t            };\n\t\n\t            var progress = function progress(e) {\n\t                if (e.id !== blob.id) return;\n\t                i.notify(e);\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                if (e.status === 304 || e.status >= 200 && e.status < 300) {\n\t                    flashRuntime.cancel(blob);\n\t                    return i.resolve(e.response);\n\t                }\n\t                return i.reject(new _errors.NetworkError(e.status, e.response));\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            };\n\t            flashRuntime.on('uploadprogress', progress);\n\t            flashRuntime.on('uploadcomplete', complete);\n\t            flashRuntime.on('uploaderror', error);\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new _errors.TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return FlashTransport;\n\t})();\n\t\n\texports['default'] = FlashTransport;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** uploadcore.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3f55d4025d4fd24a75f3\n **/","import UploadCore from './core';\nimport Events from './events';\nimport Status from './status';\n\nexport default UploadCore;\nexport {UploadCore, Events, Status};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport Status from './status';\nimport {QueueLimitError, FilterError, DuplicateError, FileExtensionError, FileSizeError} from './errors';\nimport {formatSize, parseSize, normalizeAccept} from './util';\nimport FileRequest from './filerequest';\nimport DndCollector from './collector/dnd';\nimport PasteCollector from './collector/paste';\nimport PickerCollector from './collector/picker';\n\nconst REQUEST_OPTIONS = ['name', 'url', 'params', 'action', 'data', 'headers', 'withCredentials', 'timeout', 'chunkEnable', 'chunkSize', 'chunkRetries', 'chunkProcessThreads'];\n\nexport default class Core extends Emitter {\n\n    constructor(options = {}) {\n        super();\n\n        this.autoPending = options.autoPending || options.auto;\n        this.capcity = options.capcity || options.queueCapcity || 0;\n        this.multiple = options.multiple == null ? true : options.multiple;\n\n        this.accept = normalizeAccept(options.accept);\n        this.sizeLimit = parseSize(options.sizeLimit || options.fileSizeLimit || 0);\n\n        this.pending = new Pending(options.processThreads);\n        this.stat = new Stat;\n        this.constraints = new Constraints;\n        this.filters = new Filters;\n\n        if (!this.multiple) {\n            this.capcity = 1;\n        }\n        if (this.capcity > 0) {\n            this.addConstraint(() => this.stat.getTotal() >= this.capcity);\n        }\n\n        if (this.accept && this.accept.length > 0) {\n            this.addFilter((file) => {\n                if (!this.accept.some((item) => {\n                    return item.extensions && item.extensions.indexOf(file.ext) > -1\n                }))\n                {\n                    return new FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n                }\n            });\n        }\n\n        if (this.sizeLimit > 0) {\n            this.addFilter((file) => {\n                if (file.size > this.sizeLimit) {\n                    return new FileSizeError(file, 'filesize:' + formatSize(file.size) + ' is greater than limit:' + formatSize(this.sizeLimit));\n                }\n            });\n        }\n\n        if (options.preventDuplicate) {\n            this.addFilter((file) => {\n                if (this.stat.getFiles().some((item) => item.name === file.name && item.size === file.size)) {\n                    return new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n                }\n            });\n        }\n\n        if (Array.isArray(options.filters)) {\n            options.fitlers.forEach(filter => this.addFilter(filter));\n        }\n\n        const request = options.request || {};\n        REQUEST_OPTIONS.forEach((key) => {\n            if (options.hasOwnProperty(key)) {\n                request[key] = options[key];\n            }\n        });\n\n        this.requestOptions = request;\n    }\n\n    createFileRequest(file) {\n        return new FileRequest(file, this.requestOptions);\n    }\n\n    isLimit() {\n        return this.constraints.some();\n    }\n\n    addConstraint(constraint) {\n        return this.constraints.add(constraint);\n    }\n\n    addFilter(filter) {\n        return this.filters.add(filter);\n    }\n\n    add(file) {\n        if (this.isLimit()) {\n            this.emit(Events.QUEUE_ERROR, new QueueLimitError);\n            return -1;\n        }\n\n        let error = this.filters.filter(file);\n        if (!error && !this.stat.add(file)) {\n            error = new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n        }\n\n        if (error) {\n            this.emit(Events.QUEUE_FILE_FILTERED, file, error);\n            this.emit(Events.QUEUE_ERROR, error);\n            return 0;\n        }\n\n        file.setStatus(Status.QUEUED);\n\n        file.on(Events.FILE_STATUS_CHANGE, (status) => {\n            if (status === Status.CANCELLED) {\n                this.stat.remove(file);\n            } else if (status === Status.PENDING) {\n                setTimeout(() => {\n                    if (this.pending.add(file) && this.pending.size() === 1) {\n                        this.emit(Events.QUEUE_UPLOAD_START);\n                    }\n                }, 1);\n            }\n\n            this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n            if (this.stat.getFiles(Status.PROCESS).length < 1) {\n                this.emit(Events.QUEUE_UPLOAD_END);\n            }\n        });\n\n        file.setCore(this);\n\n        this.emit(Events.QUEUE_FILE_ADDED, file);\n\n        this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n        if (this.autoPending) {\n            file.pending();\n        }\n\n        return 1;\n    }\n\n    isMultiple() {\n        return this.multiple;\n    }\n\n    isFull() {\n        return this.capcity > 0 && this.getTotal() >= this.capcity;\n    }\n\n    isEmpty() {\n        return this.getTotal() < 1;\n    }\n\n    getAccept() {\n        return this.accept;\n    }\n\n    getStat() {\n        return this.stat;\n    }\n\n    getTotal() {\n        return this.getStat().getTotal();\n    }\n\n    getFiles(flag) {\n        return this.getStat().getFiles(flag);\n    }\n\n    stat(flag) {\n        return this.getStat().stat(flag);\n    }\n\n    static setSWF(url) {\n        PickerCollector.setSWF(url);\n    }\n\n    getPickerCollector() {\n        if (!this.picker) {\n            this.picker = new PickerCollector(this);\n        }\n        return this.picker;\n    }\n\n    getDndCollector() {\n        if (!this.dnd) {\n            this.dnd = new DndCollector(this);\n        }\n        return this.dnd;\n    }\n\n    getPasteCollector() {\n        if (!this.paster) {\n            this.paster = new PasteCollector(this);\n        }\n        return this.paster;\n    }\n}\n\n\nclass Set {\n    constructor() {\n        this._set = [];\n    }\n\n    /**\n     * 项目总数\n     *\n     * @returns {Number}\n     */\n    size() {\n        return this._set.length;\n    }\n\n    /**\n     * 从头部取出一项\n     *\n     * @returns {*}\n     */\n    shift() {\n        return this._set.shift();\n    }\n\n    /**\n     * 从尾部取出一项\n     *\n     * @returns {*}\n     */\n    pop() {\n        return this._set.pop();\n    }\n\n    /**\n     * 获得所有项\n     *\n     * @returns {Array}\n     */\n    toArray() {\n        return this._set.slice(0);\n    }\n\n    /**\n     * 添加一项\n     *\n     * @param item\n     * @returns {boolean} success if true\n     */\n    add(item) {\n        if (this.has(item)) {\n            return false;\n        }\n        this._set.push(item);\n        return true;\n    }\n\n    /**\n     * 是否存在该项\n     *\n     * @param item\n     * @returns {boolean}\n     */\n    has(item) {\n        return this._set.indexOf(item) > -1;\n    }\n\n    /**\n     * 删除某项\n     *\n     * @returns {boolean} success if true\n     */\n    remove(item) {\n        var i = this._set.indexOf(item);\n        if (i > -1) {\n            this._set.splice(i, 1);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * 清空\n     */\n    clear() {\n        this._set = [];\n    }\n}\n\nclass Stat {\n    constructor() {\n        this.files = new Set;\n    }\n    add(file) {\n        return this.files.add(file);\n    }\n    remove(file) {\n        this.files.remove(file);\n    }\n    getTotal() {\n        return this.files.size();\n    }\n    getFiles(flag) {\n        var files = this.files.toArray();\n        if (!flag) {\n            return files;\n        }\n        return files.filter((file) => {\n            return !!(file.getStatus() & flag);\n        });\n    }\n    stat(flag) {\n        let stat = {}, files = this.getFiles(flag);\n\n        files.forEach((file) => {\n            let status = file.getStatus();\n            stat[status] = (status in stat) ?  (stat[status] + 1) : 1;\n        });\n\n        stat['sum'] = files.length;\n\n        return stat;\n    }\n}\n\nclass Constraints {\n    constructor() {\n        this.constraints = new Set;\n    }\n\n    add(constraint) {\n        this.constraints.add(constraint);\n        return this;\n    }\n\n    remove(constraint) {\n        this.constraints.remove(constraint);\n        return this;\n    }\n\n    some() {\n        return this.constraints.toArray().some((fn) => fn.call(this));\n    }\n}\n\nclass Filters {\n    constructor() {\n        this.filters = new Set;\n    }\n\n    add(filter) {\n        this.filters.add(filter);\n        return this;\n    }\n\n    remove(filter) {\n        this.filters.remove(filter);\n        return this;\n    }\n\n    filter(file) {\n        let error = null;\n        this.filters.toArray().every((filter) => {\n            let ret;\n            try {\n                ret = filter(file);\n            } catch (e) {\n                ret = e;\n            }\n            if (typeof ret === 'string') {\n                error = new FilterError(file, ret);\n                return false;\n            } else if (ret instanceof Error) {\n                error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n                return false;\n            }\n            return true;\n        });\n        return error;\n    }\n}\n\nclass Pending {\n    constructor(threads) {\n        this.threads = threads || 2;\n        this.heading = new Set;\n        this.pending = new Set;\n    }\n\n    add(file) {\n        if (!this.pending.add(file)) return false;\n\n        file.session().always(() => this.pending.remove(file));\n\n        this.load();\n\n        return true;\n    }\n\n    size() {\n        return this.pending.size() + this.heading.size();\n    }\n\n    process(file) {\n        if (!this.heading.add(file)) return;\n\n        file.session().always(() => {\n            this.heading.remove(file);\n            this.load();\n        });\n    }\n\n    load () {\n        var file;\n        while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n            if (file.prepare()) {\n                this.process(file);\n            }\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core.js\n **/","import {Deferred} from './util';\n\nexport default class Emitter {\n\n    on(event, listener) {\n        event = event.toLowerCase();\n        if (!this._events) {\n            this._events = {};\n        }\n\n        if (!this._events[event]) {\n            this._events[event] = [];\n        }\n\n        this._events[event].push(listener);\n\n        return this;\n    }\n\n    once(event, listener) {\n        event = event.toLowerCase();\n\n        let that = this;\n\n        function fn() {\n            that.off(event, fn);\n            listener.apply(this, arguments);\n        }\n\n        fn.listener = listener;\n\n        this.on(event, fn);\n\n        return this;\n    }\n\n    off(event, listener) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            return this;\n        }\n\n        let i = listeners.length;\n        while (i-- > 0) {\n            if (listeners[i] === listener || listeners[i].listener === listener) {\n                listeners.splice(i, 1);\n                break;\n            }\n        }\n\n        if (listeners.length === 0) {\n            delete this._events[event];\n        }\n\n        return this;\n    }\n\n    removeAllListeners(event) {\n        if (!event) {\n            this._events = [];\n        } else {\n            delete this._events[event.toLowerCase()];\n        }\n\n        return this;\n    }\n\n    setPropagationTarget(emitter) {\n        if (emitter instanceof Emitter) {\n            this.propagationTarget = emitter;\n        }\n    }\n\n    emit(event, ...args) {\n        this.applyEmit(event, args);\n\n        return this;\n    }\n\n    applyEmit(event, args) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (this._events && (listeners = this._events[event])) {\n            listeners.slice(0).forEach(fn => fn.apply(this, args));\n        }\n\n        if (this.propagationTarget) {\n            const pArgs = args.slice(0);\n            pArgs.unshift(this);\n            this.propagationTarget.applyEmit(event, pArgs);\n        }\n\n        return this;\n    }\n\n    invoke(event, data) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            listeners = [];\n        }\n\n        return HookInvoker(listeners.slice(0), data, this);\n    }\n}\n\nfunction HookInvoker(hooks, initialData, context) {\n    let _data = initialData;\n    let _error = null;\n    let _aborted;\n\n    const i = Deferred();\n    const ret = i.promise();\n\n    ret.abort = () => {\n        _aborted = true;\n    };\n\n    const fail = (e) => {\n        if (_aborted) return;\n        if (e) {\n            _error = e instanceof Error ? e : new Error(e);\n        }\n        i.reject(_error || new Error('Unknown'));\n    };\n\n    const done = () => {\n        if (_aborted) return;\n        if (_error != null) {\n            fail();\n        } else {\n            i.resolve(_data);\n        }\n    };\n\n    const setData = (data) => {\n        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n            _data = data;\n        }\n    };\n\n    const next = (data) => {\n        if (_aborted) return;\n\n        if (data instanceof Error) {\n            _error = data;\n        }\n\n        if (_error != null) {\n            return fail();\n        }\n\n        setData(data);\n\n        const hook = hooks.shift();\n        if (!hook) {\n            return done();\n        }\n        let res;\n        try {\n            res = hook.call(context, _data);\n        } catch (e) {\n            return fail(e);\n        }\n\n        if (res && res.then) {\n            res.then(next, fail);\n        } else {\n            next(res);\n        }\n    };\n\n    setTimeout(next, 1);\n\n    return ret;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/emitter.js\n **/","export function formatSize(size) {\n    size = parseFloat(size);\n    const prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n        base = 1024;\n    let index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n    index = Math.min(index, prefixesSI.length - 1);\n    let powedPrecision = Math.pow(10, index < 2 ? 0 : (index > 2 ? 2 : 1));\n    size = size / Math.pow(base, index);\n    size = Math.round(size * powedPrecision) / powedPrecision;\n    return size + prefixesSI[index] + 'B';\n}\n\nexport function parseSize(size) {\n    if (typeof size !== 'string') {\n        return size;\n    }\n\n    const units = {\n        t: 1099511627776,\n        g: 1073741824,\n        m: 1048576,\n        k: 1024\n    };\n\n    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n    const u = size[2];\n    size = +size[1];\n\n    if (units.hasOwnProperty(u)) {\n        size *= units[u];\n    }\n    return size;\n}\n\nconst ACCEPTs = {\n    images: {\n        title: 'Images',\n        extensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'svg', 'tiff', 'tif', 'ico', 'jpe', 'svgz', 'pct', 'psp', 'ai', 'psd', 'raw', 'webp']\n    },\n\n    audios: {\n        title: 'Audios',\n        extensions: ['aac', 'aif', 'flac', 'iff', 'm4a', 'm4b', 'mid', 'midi', 'mp3', 'mpa', 'mpc', 'oga', 'ogg', 'ra', 'ram', 'snd', 'wav', 'wma']\n    },\n\n    videos: {\n        title: 'Videos',\n        extensions: ['avi', 'divx', 'flv', 'm4v', 'mkv', 'mov', 'mp4', 'mpeg', 'mpg', 'ogm', 'ogv', 'ogx', 'rm', 'rmvb', 'smil', 'webm', 'wmv', 'xvid']\n    }\n};\n\nfunction normalizeExtensions(extensions) {\n    if (typeof extensions !== 'string') {\n        return '';\n    }\n\n    return extensions.toLowerCase().split(/ *[ ,;|+] */).map((ext) => {\n        let m = /^\\*?\\.?(\\w+)$/.exec(ext);\n        return m ? m[1] : null;\n    }).filter(ext => ext !== null);\n}\n\nexport function normalizeAccept(accepts) {\n    if (!accepts) return null;\n\n    if (!Array.isArray(accepts)) {\n        accepts = [accepts];\n    }\n\n    return accepts.map((accept) => {\n        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n            return ACCEPTs[accept];\n        } else {\n            let extensions = normalizeExtensions(accept.extensions || accept);\n\n            return extensions.length ? {\n                title: accept.title || '',\n                extensions: extensions,\n                mimeTypes: accept.mimeTypes || ''\n            } : null;\n        }\n    }).filter(accept => accept !== null);\n}\n\nfunction createOptions(option) {\n    const options = {};\n    (option.match(/\\S+/g) || []).forEach((flag) => {\n        options[flag] = true;\n    });\n    return options;\n}\n\nexport function extend(target, source) {\n    for (let key in source) {\n        target[key] = source[key];\n    }\n    return target;\n}\n\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\n\nconst ArrayFrom = Array.from || function (arrayLike) {\n    return [].slice.call(arrayLike);\n};\n\nexport function Callbacks(options) {\n    options = typeof options === \"string\"\n        ? createOptions(options)\n        : extend({}, options);\n\n    let firing, memory, fired, locked, list = [],\n        queue = [], firingIndex = -1, _this;\n\n    function fire() {\n        locked = options.once;\n\n        fired = firing = true;\n        for (; queue.length; firingIndex = -1) {\n            memory = queue.shift();\n            while (++firingIndex < list.length) {\n                if (list[firingIndex].apply(memory[0], memory[1]) === false && options.stopOnFalse) {\n                    firingIndex = list.length;\n                    memory = false;\n                }\n            }\n        }\n\n        if (!options.memory) {\n            memory = false;\n        }\n\n        firing = false;\n\n        if (locked) {\n            if (memory) {\n                list = [];\n            } else {\n                list = \"\";\n            }\n        }\n    }\n\n    _this = {\n        add() {\n            if (list) {\n                if (memory && !firing) {\n                    firingIndex = list.length - 1;\n                    queue.push(memory);\n                }\n\n                function add(args) {\n                    args.forEach((fn) => {\n                        if (isFunction(fn)) {\n                            if (!options.unique || !_this.has(fn)) {\n                                list.push(fn);\n                            }\n                        } else if (Array.isArray(fn)) {\n                            add(fn);\n                        }\n                    });\n                }\n\n                add(ArrayFrom(arguments));\n\n                if (memory && !firing) {\n                    fire();\n                }\n            }\n            return this;\n        },\n\n        remove() {\n            ArrayFrom(arguments).forEach((fn) => {\n                let i = list.length;\n                while (--i >= 0) {\n                    if (list[i] === fn) {\n                        list.splice(i, 1);\n\n                        if (i <= firingIndex) {\n                            firingIndex--;\n                        }\n                    }\n                }\n            });\n            return this;\n        },\n\n        has(fn) {\n            return fn ? list.indexOf(fn) > -1 : list.length > 0;\n        },\n\n        empty() {\n            if (list) {\n                list = [];\n            }\n            return this;\n        },\n\n        disable() {\n            locked = queue = [];\n            list = memory = \"\";\n            return this;\n        },\n\n        disabled() {\n            return !list;\n        },\n\n        lock() {\n            locked = queue = [];\n            if (!memory && !firing) {\n                list = memory = \"\";\n            }\n            return this;\n        },\n\n        locked() {\n            return !!locked;\n        },\n\n        fireWith(context, args) {\n            if (!locked) {\n                args = args || [];\n                args = [context, args.slice ? args.slice() : args];\n                queue.push(args);\n                if (!firing) {\n                    fire();\n                }\n            }\n            return this;\n        },\n\n        fire() {\n            _this.fireWith(this, arguments);\n            return this;\n        },\n\n        fired() {\n            return !!fired;\n        }\n    };\n\n    return _this;\n};\n\nfunction Identity(v) {\n    return v;\n}\nfunction Thrower(ex) {\n    throw ex;\n}\n\nexport function Deferred(func) {\n    let tuples = [\n        [\"notify\", \"progress\", Callbacks(\"memory\"), Callbacks(\"memory\"), 2],\n        [\"resolve\", \"done\", Callbacks(\"once memory\"), Callbacks(\"once memory\"), 0, \"resolved\"],\n        [\"reject\", \"fail\", Callbacks(\"once memory\"), Callbacks(\"once memory\"), 1, \"rejected\"]\n    ],\n    state = \"pending\",\n        deferred = {},\n    promise = {\n        state() {\n            return state;\n        },\n\n        always() {\n            const args = ArrayFrom(arguments);\n            deferred.done(args).fail(args);\n            return this;\n        },\n\n        \"catch\"(fn) {\n            return promise.then(null, fn);\n        },\n\n        pipe(/* fnDone, fnFail, fnProgress */) {\n            let fns = arguments;\n\n            return Deferred((newDefer) => {\n                tuples.forEach((tuple) => {\n                    const fn = typeof fns[tuple[4]] === 'function' && fns[tuple[4]];\n\n                    deferred[tuple[1]](function () {\n                        const returned = fn && fn.apply(this, arguments);\n                        if (returned && isFunction(returned.promise)) {\n                            returned.promise()\n                                .progress(newDefer.notify)\n                                .done(newDefer.resolve)\n                                .fail(newDefer.reject);\n                        } else {\n                            newDefer[tuple[0] + \"With\"](\n                                this === promise ? newDefer.promise() : this,\n                                fn ? [returned] : arguments\n                            );\n                        }\n                    });\n                });\n                fns = null;\n            }).promise();\n        },\n\n        then(onFulfilled, onRejected, onProgress) {\n            let maxDepth = 0;\n\n            function resolve(depth, deferred, handler, special) {\n                return function () {\n                    let _this = this === promise ? undefined : this,\n                        args = arguments,\n                        mightThrow = function () {\n                            let returned, then;\n\n                            if (depth < maxDepth) {\n                                return;\n                            }\n\n                            returned = handler.apply(_this, args);\n\n                            if (returned === deferred.promise()) {\n                                throw new TypeError(\"Thenable self-resolution\");\n                            }\n\n                            then = returned && (typeof returned === \"object\" ||\n                                typeof returned === \"function\" ) &&\n                                returned.then;\n\n                            if (isFunction(then)) {\n                                if (special) {\n                                    then.call(\n                                        returned,\n                                        resolve(maxDepth, deferred, Identity, special),\n                                        resolve(maxDepth, deferred, Thrower, special)\n                                    );\n                                } else {\n                                    maxDepth++;\n\n                                    then.call(\n                                        returned,\n                                        resolve(maxDepth, deferred, Identity, special),\n                                        resolve(maxDepth, deferred, Thrower, special),\n                                        resolve(maxDepth, deferred, Identity, deferred.notify)\n                                    );\n                                }\n                            } else {\n                                if (handler !== Identity) {\n                                    _this = undefined;\n                                    args = [returned];\n                                }\n\n                                (special || deferred.resolveWith)(_this || deferred.promise(), args);\n                            }\n                        },\n                        process = special ? mightThrow : function () {\n                            try {\n                                mightThrow();\n                            } catch (e) {\n                                if (depth + 1 >= maxDepth) {\n                                    if (handler !== Thrower) {\n                                        _this = undefined;\n                                        args = [e];\n                                    }\n\n                                    deferred.rejectWith(_this || deferred.promise(), args);\n                                }\n                            }\n                        };\n\n                    if (depth) {\n                        process();\n                    } else {\n                        window.setTimeout(process, 0);\n                    }\n                };\n            }\n\n            return Deferred((newDefer) => {\n                // progress\n                tuples[0][3].add(\n                    resolve(\n                        0,\n                        newDefer,\n                        isFunction(onProgress) ? onProgress : Identity,\n                        newDefer.notifyWith\n                    )\n                );\n\n                // fulfilled\n                tuples[1][3].add(\n                    resolve(\n                        0,\n                        newDefer,\n                        isFunction(onFulfilled) ? onFulfilled : Identity\n                    )\n                );\n\n                // rejected\n                tuples[2][3].add(\n                    resolve(\n                        0,\n                        newDefer,\n                        isFunction(onRejected) ? onRejected : Thrower\n                    )\n                );\n            }).promise();\n        },\n\n        promise(obj) {\n            return obj != null ? extend(obj, promise) : promise;\n        }\n    };\n\n    tuples.forEach((tuple, i) => {\n        let list = tuple[2],\n            stateString = tuple[5];\n\n        promise[tuple[1]] = list.add;\n\n        if (stateString) {\n            list.add(\n                () => { state = stateString; },\n                tuples[3 - i][2].disable,\n                tuples[0][2].lock\n            );\n        }\n\n        list.add(tuple[3].fire);\n\n        deferred[tuple[0]] = function () {\n            deferred[tuple[0] + \"With\"](this === deferred ? promise : this, arguments);\n            return this;\n        };\n\n        deferred[tuple[0] + \"With\"] = list.fireWith;\n    });\n\n    promise.promise(deferred);\n\n    if (func) {\n        func.call(deferred, deferred);\n    }\n\n    return deferred;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","export default {\n    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n    QUEUE_FILE_ADDED: 'queuefileadded', // 队列添加了一个文件\n    QUEUE_FILE_FILTERED: 'queuefilefiltered', // 队列过滤了一个文件\n    QUEUE_ERROR: 'queueerror', // 队列错误\n    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\n    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\n    FILE_CANCEL: 'filecancel', // 文件退出\n    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","export default {\n    ALL: 255, // 所有状态\n\n    PROCESS: 31, // INITED -> END\n    INITED: 1, // 初始状态\n    QUEUED: 2, // 进入队列\n    PENDING: 4, // 队列中等待\n    PROGRESS: 8, // 上传中\n    END: 16, // 上传完成, 等待后续处理\n\n    SUCCESS: 32,  // 上传成功\n    ERROR: 64, // 上传出错\n    CANCELLED: 128  // 上传取消 和 queued 相反, 退出队列\n};\n\nexport var StatusName = {\n    1: 'inited',\n    2: 'queued',\n    4: 'pending',\n    8: 'progress',\n    16: 'end',\n    32: 'success',\n    64: 'error',\n    128: 'cancelled'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/status.js\n **/","class _Error extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n    }\n}\n\nexport class AbortError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'AbortError';\n    }\n}\n\nexport class TimeoutError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'TimeoutError';\n    }\n}\n\nexport class NetworkError extends _Error {\n    constructor(status, message) {\n        super(message);\n        this.name = 'NetworkError';\n        this.status = status;\n    }\n}\n\nexport class QueueLimitError extends _Error {\n    constructor() {\n        super('queue limit');\n        this.name = 'QueueLimitError';\n    }\n}\n\nexport class FilterError extends _Error {\n    constructor(file, message) {\n        super(message);\n        this.name = 'FilterError';\n        this.file = file;\n    }\n}\n\nexport class DuplicateError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'DuplicateError';\n    }\n}\n\nexport class FileExtensionError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileExtensionError';\n    }\n}\n\nexport class FileSizeError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileSizeError';\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors.js\n **/","import {parseSize} from './util';\n\nclass ChunkResponse {\n    /**\n     * @param {string|null} rawResponse\n     * @param {ChunkRequest} chunkRequest\n     */\n    constructor(rawResponse, chunkRequest) {\n        this.rawResponse = rawResponse;\n        this.chunkRequest = chunkRequest;\n    }\n\n    getChunkRequest() {\n        return this.chunkRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        return this.response || this.rawResponse;\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass ChunkRequest {\n    /**\n     *\n     * @param {int} index\n     * @param {Blob} blob\n     * @param {FileRequest} fileRequest\n     */\n    constructor(index, blob, fileRequest) {\n        this.index = index;\n        this.blob = blob;\n        this.fileRequest = fileRequest;\n    }\n\n    getName() {\n        return this.fileRequest.getName();\n    }\n\n    getFile() {\n        return this.fileRequest.getFile();\n    }\n\n    getBlob() {\n        return this.blob;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    isMultiChunk() {\n        return this.getFile().source !== this.blob;\n    }\n\n    getParams() {\n        if (!this.params) {\n            this.params = this.fileRequest.getParams().clone();\n        }\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.getParams().setParam(name, value);\n\n        return this;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getUrl() {\n        return this.url || this.fileRequest.getUrl();\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getHeaders() {\n        if (!this.headers) {\n            this.headers = this.fileRequest.getHeaders().slice(0);\n        }\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        var headers = this.getHeaders();\n        headers.push({name: name, value: value});\n        return this;\n    }\n\n    isWithCredentials() {\n        return this.fileRequest.isWithCredentials();\n    }\n\n    getTimeout() {\n        return this.fileRequest.getTimeout();\n    }\n\n    createChunkResponse(response) {\n        return new ChunkResponse(response, this);\n    }\n}\n\nclass FileResponse {\n    /**\n     * @param {ChunkResponse|Object|string} rawResponse\n     * @param {FileRequest} fileRequest\n     */\n    constructor(rawResponse, fileRequest) {\n        this.rawResponse = rawResponse;\n        this.fileRequest = fileRequest;\n    }\n\n    isFromMultiChunkResponse() {\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getChunkRequest().isMultiChunk();\n        }\n        return false;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        if (this.response != null) {\n            return this.response;\n        }\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getResponse();\n        } else {\n            return this.rawResponse;\n        }\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass Params {\n    constructor(params) {\n        if (Array.isArray(params)) {\n            this.params = params.slice(0);\n        } else if (typeof params === 'object') {\n            this.params = [];\n            for (let name in params) {\n                if (params.hasOwnProperty(name)) {\n                    this.params.push({name, value: params[name]});\n                }\n            }\n        } else {\n            this.params = [];\n        }\n    }\n\n    setParam(name, value) {\n        this.removeParam(name);\n        this.addParam(name, value);\n    }\n\n    addParam(name, value) {\n        this.params.push({name, value});\n    }\n\n    removeParam(name) {\n        this.params = this.params.filter((param) => param.name !== name);\n    }\n\n    getParam(name, single) {\n        let ret = this.params.filter((param) => param.name === name)\n            .map((param) => param.value);\n\n        if (single) {\n            return ret.shift();\n        }\n\n        return ret;\n    }\n\n    clone() {\n        return new Params(this.params);\n    }\n\n    toArray() {\n        return this.params;\n    }\n\n    toString() {\n        const params = this.params.map((param) => {\n            return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n        });\n\n        return params.join('&'); //.replace( /%20/g, '+');\n    }\n}\n\nconst MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\nexport default class FileRequest {\n    constructor(file, options = {}) {\n        this.file = file;\n        this.name = options.name || 'file';\n        this.url = options.url || options.action;\n        this.params = new Params(options.params || options.data);\n        this.headers = options.headers || [];\n        this.withCredentials = options.withCredentials;\n        this.timeout = options.timeout || 0;\n        this.chunkSize = options.chunkSize || 0;\n        this.chunkRetries = options.chunkRetries || 0;\n        this.chunkEnable = options.chunkEnable || false;\n        this.chunkProcessThreads = options.chunkProcessThreads || 2;\n    }\n\n    getFile() {\n        return this.file;\n    }\n\n    getUrl() {\n        return this.url || '';\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    setName(name) {\n        this.name = name;\n        return this;\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getParams() {\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.params.setParam(name, value);\n        return this;\n    }\n\n    getHeaders() {\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        this.headers.push({name: name, value: value});\n    }\n\n    isWithCredentials() {\n        return this.withCredentials;\n    }\n\n    setWithCredentials(flag) {\n        this.withCredentials = flag;\n        return this;\n    }\n\n    getTimeout() {\n        return this.timeout;\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n        return this;\n    }\n\n    getChunkSize() {\n        return parseSize(this.chunkSize);\n    }\n\n    setChunkSize(chunkSize) {\n        this.chunkSize = chunkSize;\n        return this;\n    }\n\n    getChunkRetries() {\n        return this.chunkRetries;\n    }\n\n    setChunkRetries(retries) {\n        this.chunkRetries = retries;\n        return 0;\n    }\n\n    isChunkEnable() {\n        const chunkSize = this.getChunkSize();\n        return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE\n            && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n    }\n\n    setChunkEnable(flag) {\n        this.chunkEnable = flag;\n        return this;\n    }\n\n    getChunkProcessThreads() {\n        return this.chunkProcessThreads;\n    }\n\n    setChunkProcessThreads(threads) {\n        this.chunkProcessThreads = threads;\n        return this;\n    }\n\n    createChunkRequest(index, blob) {\n        return new ChunkRequest(index, blob, this);\n    }\n\n    createFileResponse(response) {\n        return new FileResponse(response, this);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/filerequest.js\n **/","import Emitter from '../emitter';\nimport Runtime from '../html5/runtime';\nimport File from '../file';\n\nconst MAX_NUM_ONCE = 100;\n\nfunction createReader(collector) {\n    return (dataTransfer, responders) => {\n        const items = dataTransfer.items,\n            files = dataTransfer.files;\n        let item, times = MAX_NUM_ONCE;\n        let _break = false;\n\n        function collect(file) {\n            if (--times < 0 || !collector(file, responders)) {\n                _break = true;\n                return false;\n            }\n            return true;\n        }\n\n        function readEntry(entry) {\n            if (_break) return;\n            if (entry.isFile) {\n                entry.file((file) => {\n                    if (!_break) {\n                        collect(file);\n                    }\n                });\n            } else if (entry.isDirectory) {\n                entry.createReader().readEntries((entries) => {\n                    if (_break) return;\n                    for (let i = 0, l = entries.length; i < l; i++) {\n                        if (_break) break;\n                        readEntry(entries[i]);\n                    }\n                });\n            }\n        }\n\n        for (let i = 0, l = files.length; i < l; i++) {\n            if (_break) break;\n            item = items && items[i];\n\n            let entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\n            if (entry && entry.isDirectory) {\n                readEntry(entry);\n            } else {\n                if (!collect(files[i])) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nclass Area extends Emitter {\n    constructor(area) {\n        super();\n\n        this.areaElement = area;\n    }\n\n    contains(target) {\n        return this.areaElement.contains(target);\n    }\n\n    start(e, allowed) {\n        this.emit('start', e, allowed);\n    }\n\n    response(e, allowed) {\n        allowed = allowed && this.contains(e.target);\n        this.emit('response', e, allowed);\n        return allowed;\n    }\n\n    end(e) {\n        this.emit('end', e);\n    }\n}\n\nconst Collectors = [];\n\nfunction prepare() {\n    if (!('DataTransfer' in window) || !('FileList' in window) || !document.addEventListener) {\n        return;\n    }\n\n    const runtime = Runtime.getInstance();\n\n    let started = 0, enter = 0, endTimer;\n    const dataTransferReader = createReader((file, responders) => {\n        if (!responders || responders.length < 1) {\n            return false;\n        }\n        file = new File(runtime, file);\n        let total = responders.length;\n        return responders.some((responder) => {\n            const ret = responder.recieve(file);\n            if (ret > 0) {\n                return true;\n            }\n            if (ret < 0) {\n                total -= 1;\n            }\n            return false;\n        }) || total > 0;\n    });\n\n    const start = (e) => {\n        started = 1;\n        Collectors.forEach((responder) => responder.start(e));\n    };\n\n    const move = (e) => {\n        const has = Collectors.filter(responder => responder.response(e)).length > 0;\n\n        const dataTransfer = e.dataTransfer;\n\n        if (dataTransfer) {\n            dataTransfer.dropEffect = has ? 'copy' : 'none';\n        }\n        e.preventDefault();\n    };\n\n    const end = (e) => {\n        started = 0;\n        enter = 0;\n        Collectors.forEach((responder) => responder.end(e));\n    };\n\n    const drag = (e) => {\n        clearTimeout(endTimer);\n        let isLeave = e.type === 'dragleave';\n        if (!isLeave && !started) {\n            start(e);\n        }\n        move(e);\n        if (isLeave) {\n            endTimer = setTimeout(() => end(e), 100);\n        }\n    };\n    const drop = (e) => {\n        e.preventDefault();\n\n        clearTimeout(endTimer);\n        end(e);\n\n        const responders = Collectors.filter((responder) => responder.contains(e.target));\n\n        if (responders.length < 1) {\n            return;\n        }\n\n        let dataTransfer = e.dataTransfer;\n\n        try {\n            if (dataTransfer.getData('text/html')) {\n                return;\n            }\n        } catch (ex) {}\n\n        dataTransferReader(dataTransfer, responders);\n    };\n\n    document.addEventListener('dragenter', drag, false);\n    document.addEventListener('dragover', drag, false);\n    document.addEventListener('dragleave', drag, false);\n    document.addEventListener('drop', drop, false);\n}\n\nexport default class DndCollector {\n\n    constructor(core) {\n        if (Collectors.length < 1) {\n            prepare();\n        }\n        Collectors.push(this);\n\n        this.core = core;\n        this.areas = [];\n    }\n\n    addArea(area) {\n        area = new Area(area);\n        this.areas.push(area);\n        area.destroy = () => {\n            area.removeAllListeners();\n            let i = this.areas.indexOf(area);\n            if (i > -1) {\n                this.areas.splice(i, 1);\n            }\n        };\n\n        return area;\n    }\n\n    contains(target) {\n        return this.areas.some((area) => area.contains(target));\n    }\n\n    start(e) {\n        this.areas.forEach((area) => area.start(e));\n    }\n\n    response(e) {\n        return this.areas.map((area) => area.response(e)).some(r => r !== false);\n    }\n\n    recieve(file) {\n        const ret = this.core.add(file);\n        if (ret > 0 && !this.core.isMultiple()) {\n            return -1;\n        } else {\n            return ret;\n        }\n    }\n\n    end(e) {\n        this.areas.forEach((area) => area.end(e));\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/dnd.js\n **/","import Runtime from '../runtime';\nimport {Deferred} from '../util';\nimport Transport from './transport';\n\nlet instance;\n\nexport default class Html5Runtime extends Runtime {\n    static getInstance() {\n        if (!instance) {\n            instance = new Html5Runtime;\n        }\n        return instance;\n    }\n\n    getAsDataUrl(blob, timeout) {\n        let i = Deferred(),\n            fr = new FileReader, timer;\n\n        fr.onloadend = () => {\n            if (fr.readyState == FileReader.DONE) {\n                i.resolve(fr.result);\n            } else {\n                i.reject();\n            }\n            clearTimeout(timer);\n            fr.onloadend = null;\n        };\n        fr.readAsDataURL(blob);\n\n        let abort = () => {\n            fr && fr.abort();\n            fr = null;\n        };\n        if (timeout) {\n            timer = setTimeout(abort, timeout);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    getTransport() {\n        if (!this.transport) {\n            this.transport = new Transport(this);\n        }\n        return this.transport;\n    }\n\n    canSlice() {\n        return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n    }\n\n    slice(blob, start, end) {\n        let blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\n        return blobSlice.call(blob, start, end);\n    }\n\n    md5(blob) {\n        const i = Deferred();\n\n        if (!window.SparkMD5) {\n            i.reject();\n            return i.promise();\n        }\n\n        let chunkSize = 2 * 1024 * 1024,\n            chunks = Math.ceil(blob.size / chunkSize),\n            chunk = 0,\n            spark = new SparkMD5.ArrayBuffer(),\n            blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\n        let fr = new FileReader;\n\n        var loadNext = () => {\n            if (!fr) return;\n            let start, end;\n\n            start = chunk * chunkSize;\n            end = Math.min(start + chunkSize, blob.size);\n\n            fr.onload = () => {\n                spark && spark.append(fr.result);\n            };\n\n            fr.onloadend = () => {\n                if (!fr) return;\n                if (fr.readyState == FileReader.DONE) {\n                    if (++chunk < chunks) {\n                        setTimeout(loadNext, 1);\n                    } else {\n                        setTimeout(() => {\n                            spark && i.resolve(spark.end());\n                            loadNext = blob = spark = null;\n                        }, 50);\n                    }\n                } else {\n                    i.reject();\n                }\n                fr.onloadend = fr.onload = null;\n            };\n\n            fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n        };\n\n        loadNext();\n\n        let ret = i.promise();\n        ret.abort = function () {\n            fr && fr.abort();\n            spark = null;\n            fr = null;\n        };\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/runtime.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport {Deferred} from './util';\nimport {NetworkError} from './errors';\n\nexport default class Runtime extends Emitter {\n    md5(blob) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getAsDataUrl(file, timeout) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getTransport() {\n        return null;\n    }\n    getUploading() {\n        if (!this.uploading) {\n            this.uploading = new Uploading(this);\n        }\n        return this.uploading;\n    }\n    canSlice() {\n        return false;\n    }\n    slice(blob) {\n        throw new Error('this runtime current not support slice');\n    }\n\n    cancel(blob) {\n\n    }\n}\n\n\nclass Uploading {\n    constructor(runtime) {\n        this.runtime = runtime;\n    }\n\n    /**\n     * @param {FileRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(),\n            file = request.getFile(),\n            runtime = this.runtime;\n\n        let source = file.getSource(), size = file.size,\n            chunkSize = request.getChunkSize(),\n            useChunk = request.isChunkEnable(),\n            threads = Math.max(request.getChunkProcessThreads(), 1),\n            start = 0, end = 0, slots = [];\n\n        const getActives = () => {\n            return slots.reduce((sum, slot) => sum + (slot.state() === 'pending' ? 1 : 0), 0);\n        };\n\n        const readChunk = () => {\n            let slot, req, blob;\n            while (end < size && getActives() < threads) {\n                start = end;\n                end = Math.min(end + chunkSize, size);\n                blob = runtime.slice(source, start, end);\n                req = request.createChunkRequest(slots.length, blob);\n                slot = this.slot(req, request.getChunkRetries());\n                slot.progress(progress).done(done).fail(fail);\n                slots.push(slot);\n            }\n        };\n\n        const progress = () => {\n            let total = size - end, loaded = 0;\n            slots.forEach((slot) => {\n                total += slot.total;\n                loaded += slot.loaded;\n            });\n            i.notify({total, loaded});\n        };\n\n        const done = (res) => {\n            useChunk && readChunk();\n\n            if (end >= size && slots.every((slot) => slot.state() === 'resolved')) {\n                i.resolve(res);\n            }\n        };\n\n        const abort = () => {\n            slots.forEach((slot) => slot.abort());\n        };\n\n        const fail = (error) => {\n            i.reject(error);\n            abort();\n        };\n\n        if (useChunk) {\n            readChunk();\n        } else {\n            end = size;\n            let slot = this.slot(request.createChunkRequest(0, source), 0);\n            slot.progress(progress).done(done).fail(fail);\n            slots.push(slot);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    slot(request, retries) {\n        let i = Deferred(),\n            runtime = this.runtime,\n            core = request.getFile().getCore();\n\n        let slot = i.promise();\n\n        const progress = (e) => {\n            if (e.total) {\n                slot.total = e.total;\n            }\n            if (e.loaded) {\n                slot.loaded = e.loaded;\n            }\n            i.notify(e);\n        };\n\n        const process = () => {\n            var prepare, transport, completion;\n            slot.abort = function () {\n                prepare && prepare.abort();\n                transport && transport.abort();\n                completion && completion.abort();\n            };\n            slot.total = request.getBlob().size;\n            slot.loaded = 0;\n\n            prepare = core.invoke(Events.CHUNK_UPLOAD_PREPARING, request);\n\n            prepare.then((request) => {\n                transport = runtime.getTransport().generate(request);\n                transport.progress(progress);\n                return transport;\n            }).then((response) => {\n                completion = core.invoke(Events.CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n                return completion;\n            }).done(i.resolve).fail(error);\n        };\n\n        const error = (e) => {\n            if (e instanceof NetworkError && retries-- > 0) {\n                // retry\n                setTimeout(process, 500);\n            } else {\n                i.reject(e);\n            }\n            slot.abort();\n        };\n\n        process();\n\n        return slot;\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/runtime.js\n **/","import {Deferred} from '../util';\nimport {TimeoutError, AbortError, NetworkError} from '../errors';\n\nexport default class Html5Transport {\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred();\n        const xhr = new XMLHttpRequest;\n\n        let timeoutTimer;\n\n        const clean = () => {\n            xhr.onload = xhr.onerror = null;\n            if (xhr.upload) {\n                xhr.upload.onprogress = null;\n            }\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n\n        const abort = () => {\n            clean();\n            try {\n                xhr.abort();\n            } catch (e) {}\n        };\n\n        const complete = (e) => {\n            clean();\n            if (!xhr.status && e.type === 'error') {\n                return i.reject(new AbortError(e.message));\n            }\n            if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n                return i.resolve(xhr.responseText);\n            }\n            return i.reject(new NetworkError(xhr.status, xhr.statusText));\n        };\n\n        if (xhr.upload) {\n            xhr.upload.onprogress = (e) => i.notify(e);\n        }\n        xhr.onerror = complete;\n        xhr.onload = complete;\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            xhr.open('POST', request.getUrl(), true);\n            if (request.isWithCredentials()) {\n                xhr.withCredentials = true;\n            }\n\n            request.getHeaders().forEach((header) => xhr.setRequestHeader(header.name, header.value));\n\n            const formData = new FormData, blob = request.getBlob();\n\n            request.getParams().toArray().forEach((param) => formData.append(param.name, param.value));\n\n            formData.append(request.getName(), blob, blob.name || 'blob');\n\n            xhr.send(formData);\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/transport.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport {Deferred} from './util';\nimport Status, {StatusName} from './status';\n\nlet uid = 0;\nfunction guid() {\n    return 'FILE-' + (uid++).toString(16).toUpperCase();\n}\n\nconst RE_EXT = /\\.([^.]+)$/, RE_IMAGE = /^image\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\nfunction guessExt(blob) {\n    let m = blob.name && RE_EXT.exec(blob.name);\n    if (m) {\n        return m[1];\n    }\n    m = blob.type && RE_IMAGE.exec(blob.type);\n    if (m) {\n        return m[1];\n    }\n    return '';\n}\n\nfunction guessType(ext) {\n    if (['jpg','jpeg','png','gif','bmp','webp'].indexOf(ext.toLowerCase()) > -1) {\n        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n    }\n    return null;\n}\n\nexport default class Progress {\n    constructor(total, loaded) {\n        this.change(total, loaded);\n    }\n\n    change(total, loaded) {\n        this.total = total;\n        this.loaded = loaded || 0;\n        this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100)\n    }\n\n    done() {\n        this.change(this.total, this.total);\n    }\n}\n\nexport default class File extends Emitter {\n    constructor(runtime, source, filename) {\n        super();\n\n        this.id = guid();\n\n        this.name = source.name || filename || this.id;\n\n        var ext = guessExt(source).toLowerCase();\n\n        if (ext && !RE_EXT.test(this.name)) {\n            this.name += '.' + ext;\n        }\n\n        this.ext = ext;\n\n        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\n        this.lastModified = source.lastModified || (+new Date);\n\n        this.size = source.size || 0;\n\n        this.runtime = runtime;\n\n        this.source = source;\n\n        this.status = Status.INITED;\n\n        this.progress = new Progress(this.size, 0);\n    }\n\n    getCore() {\n        return this.core;\n    }\n\n    setCore(core) {\n        this.core = core;\n        this.setPropagationTarget(core);\n    }\n\n    getRuntime() {\n        return this.runtime;\n    }\n\n    isImage() {\n        return RE_IMAGE.test(this.type);\n    }\n\n    setStatus(status) {\n        let prevStatus = this.status;\n\n        if (prevStatus !== Status.CANCELLED && status !== prevStatus) {\n            this.status = status;\n            this.emit(Events.FILE_STATUS_CHANGE, status, prevStatus);\n        }\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    getStatusName() {\n        if (this.status in StatusName) {\n            return StatusName[this.status];\n        } else {\n            return 'unknow';\n        }\n    }\n\n    getSource() {\n        return this.source;\n    }\n\n    getAsDataUrl(timeout) {\n        if (!this._dataUrlPromise) {\n            this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n        }\n        return this._dataUrlPromise;\n    }\n\n    md5() {\n        if (!this._md5Promise) {\n            this._md5Promise = this.runtime.md5(this.source);\n        }\n        return this._md5Promise;\n    }\n\n    session() {\n        if (this._sessionPromise) {\n            return this._sessionPromise;\n        }\n\n        let session = Deferred();\n\n        session.progress((progress) => {\n            this.setStatus(Status.PROGRESS);\n            this.emit(Events.FILE_UPLOAD_PROGRESS, progress);\n        }).done((response) => {\n            this.response = response;\n            this._session = null;\n            this._sessionPromise = null;\n            this._flows = [];\n            this.setStatus(Status.SUCCESS);\n            this.emit(Events.FILE_UPLOAD_SUCCESS, response);\n        }).fail((error) => {\n            this._session = null;\n            this._sessionPromise = null;\n            let flow;\n            while (flow = this._flows.shift()) {\n                flow.abort();\n            }\n\n            if (error instanceof Error) {\n                this.setStatus(Status.ERROR);\n                this.emit(Events.FILE_UPLOAD_ERROR, error);\n            }\n        }).always(() => {\n            this.emit(Events.FILE_UPLOAD_COMPLETED, this.getStatus());\n        });\n\n        this._flows = [];\n        this._session = session;\n        this._sessionPromise = session.promise();\n\n        return this._sessionPromise;\n    }\n\n    prepare() {\n        if (this.status !== Status.PENDING || !this.core) {\n            return false;\n        }\n\n        this.session();\n        this.setStatus(Status.PROGRESS);\n\n        this.emit(Events.FILE_UPLOAD_START);\n\n        this.request = this.core.createFileRequest(this);\n\n        const prepare = this.core.invoke(Events.FILE_UPLOAD_PREPARING, this.request);\n\n        this._flows.push(prepare);\n\n        prepare.then((request) => {\n            this.emit(Events.FILE_UPLOAD_PREPARED, request);\n\n            const upload = this.runtime.getUploading().generate(request);\n\n            this._flows.push(upload);\n\n            upload.progress((e) => {\n                this.progress.change(e.total, e.loaded);\n                this._session.notify(this.progress);\n            });\n\n            return upload;\n        }).then((response) => this.complete(response), this._session.reject);\n\n        return true;\n    }\n\n    complete(response) {\n        if (this.status !== Status.PROGRESS) return;\n\n        let flow;\n        while (flow = this._flows.shift()) {\n            flow.abort();\n        }\n\n        this.progress.done();\n        this._session.notify(this.progress);\n\n        response = this.request.createFileResponse(response);\n\n        this.setStatus(Status.END);\n        this.emit(Events.FILE_UPLOAD_END);\n\n        const complete = this.core.invoke(Events.FILE_UPLOAD_COMPLETING, response);\n\n        this._flows.push(complete);\n\n        complete.then(this._session.resolve, this._session.reject);\n    }\n\n    pending() {\n        if (this.status === Status.ERROR || this.status === Status.QUEUED) {\n            this.progress.change(this.size, 0);\n            this.setStatus(Status.PENDING);\n        }\n    }\n\n    abort() {\n        this._session && this._session.reject();\n        this._session = null;\n        this._sessionPromise = null;\n    }\n\n    cancel() {\n        this.setStatus(Status.CANCELLED);\n        this.emit(Events.FILE_CANCEL);\n        this.abort();\n        this.runtime.cancel(this.source);\n        this._dataUrlPromise && this._dataUrlPromise.abort();\n        this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n        this.removeAllListeners();\n    }\n\n    destroy() {\n        this.cancel();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/file.js\n **/","import Emitter from '../emitter';\nimport Runtime from '../html5/runtime';\nimport File from '../file';\n\nexport default class PasteCollector {\n    constructor(core) {\n        this.core = core;\n        this.runtime = Runtime.getInstance();\n    }\n\n    addArea(area) {\n        const core = this.core,\n            runtime = this.runtime,\n            emitter = new Emitter;\n\n        const paste = (e) => {\n\n            const clipboardData = e.clipboardData || window.clipboardData,\n                items = clipboardData.items,\n                files = clipboardData.files;\n\n            if (!files && !items) {\n                return;\n            }\n\n            let prevent, i, l, file, item, addRet;\n\n            if (files && files.length) {\n                // safari has files\n                prevent = files.length > 0;\n                for (i = 0, l = files.length; i < l; i++) {\n                    file = new File(runtime, files[i]);\n\n                    prevent = 1;\n\n                    addRet = core.add(file);\n                    if (addRet < 0 || (addRet > 0 && !core.isMultiple())) {\n                        break;\n                    }\n                }\n            } else if (items && items.length) {\n                // chrome has items\n                let filename = clipboardData.getData('text/plain');\n                for (i = 0, l = items.length; i < l && !core.isLimit(); i++) {\n                    item = items[i];\n\n                    if (item.kind !== 'file' || !(file = item.getAsFile())) {\n                        continue;\n                    }\n\n                    file = new File(runtime, file, filename);\n                    filename = null;\n\n                    prevent = 1;\n\n                    addRet = core.add(file);\n                    if (addRet < 0 || (addRet > 0 && !core.isMultiple())) {\n                        break;\n                    }\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n                e.stopPropagation();\n                emitter.emit('paste', clipboardData);\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window) && area.addEventListener) {\n            area.addEventListener('paste', paste, false);\n        }\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            if (area.removeEventListener) {\n                area.removeEventListener('paste', paste, false);\n            }\n        };\n\n        return emitter;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/paste.js\n **/","import Emitter from '../emitter';\nimport Html5Runtime from '../html5/runtime';\nimport FlashRuntime from '../flash/runtime';\nimport File from '../file';\nimport {extend} from '../util';\n\nlet SWF_URL = '';\n\nconst createElement = (() => {\n    const div = document.createElement('div');\n    return (html) => {\n        div.innerHTML = html;\n        html = div.firstChild;\n        div.removeChild(html);\n        return html;\n    };\n})();\n\nclass FlashTriggerCollection {\n    constructor(core, onFiles) {\n        const overlay = createElement('<label style=\"position:fixed;left:-100px;top:-100px;width:50px;height:50px;display:block;cursor:pointer;overflow:hidden;z-index:99999;opacity:0;filter:alpha(opacity=0)\"></label>');\n\n        const runtime = new FlashRuntime(overlay, SWF_URL, () => {\n            return {\n                accept: core.getAccept(),\n                multiple: core.isMultiple()\n            };\n        });\n\n        runtime.on('select', (e) => {\n            onFiles(e.files, runtime);\n            this.current && this.current.emit('files', e.files, runtime);\n        });\n\n        runtime.on('rollOut', () => this.hideOverlay());\n\n        document.body.appendChild(overlay);\n        this.overlay = overlay;\n    }\n\n    hideOverlay() {\n        extend(this.overlay.style, {\n            left: '-100px',\n            top: '-100px',\n            width: '50px',\n            height: '50px'\n        });\n        if (this.current) {\n            this.current.emit('rollOut');\n            this.current = null;\n        }\n    }\n\n\n    add(trigger) {\n        const overlay = this.overlay, emitter = new Emitter;\n        const mouseover = () => {\n            const rect = trigger.getBoundingClientRect();\n            extend(overlay.style, {\n                left: rect.left + 'px',\n                top: rect.top + 'px',\n                width: (rect.right - rect.left) + 'px',\n                height: (rect.bottom - rect.top) + 'px'\n            });\n            emitter.emit('rollOver');\n            if (this.current && this.current !== emitter) {\n                this.current.emit('rollOut');\n            }\n            this.current = emitter;\n        };\n\n        if (trigger.addEventListener) {\n            trigger.addEventListener('mouseover', mouseover, false);\n        } else if (trigger.attachEvent) {\n            trigger.attachEvent(\"onmouseover\", mouseover);\n        }\n\n        emitter.destroy = () => {\n            if (this.current === emitter) {\n                this.hideOverlay();\n            }\n            emitter.removeAllListeners();\n            if (trigger.removeEventListener) {\n                trigger.removeEventListener('mouseover', mouseover, false);\n            } else if (trigger.detachEvent) {\n                trigger.detachEvent(\"onmouseover\", mouseover);\n            }\n        };\n\n        return emitter;\n    }\n}\n\nclass Html5Trigger extends Emitter {\n    constructor(trigger, core, onFiles) {\n        super();\n\n        this.trigger = trigger;\n        this.core = core;\n        this.label = createElement('<label style=\"position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;cursor:pointer;background:#fff;overflow:hidden;opacity:0\"></label>');\n\n        this.onChange = (e) => {\n            onFiles(e.target.files);\n            this.destroyInput();\n            this.createInput();\n        };\n        trigger.appendChild(this.label);\n        this.createInput();\n    }\n\n    createInput() {\n        const input = createElement('<input type=\"file\" style=\"position:absolute;clip:rect(1px 1px 1px 1px);\" />');\n\n        let accept = this.core.getAccept();\n        if (accept && accept.length > 0) {\n            accept = accept.map((item) => {\n                return item.mimeTypes || ('.' + item.extensions.join(',.'));\n            });\n\n            input.setAttribute('accept', accept.join(','));\n        }\n        if (this.core.isMultiple()) {\n            input.setAttribute('multiple', 'multiple');\n        }\n\n        input.addEventListener('change', this.onChange, false);\n\n        this.label.appendChild(input);\n        this.input = input;\n    }\n\n    destroyInput() {\n        if (!this.input) return;\n        this.input.removeEventListener('change', this.onChange, false);\n        this.label.removeChild(this.input);\n        this.input = null;\n    }\n\n    destroy() {\n        this.destroyInput();\n        this.removeAllListeners();\n        this.trigger.removeChild(this.label);\n    }\n}\n\nclass Html5TriggerCollection {\n    constructor(core, onFiles) {\n        const runtime = Html5Runtime.getInstance();\n        this.core = core;\n        this.onFiles = (files) => {\n            onFiles(files, runtime);\n        };\n    }\n\n    add(trigger) {\n        return new Html5Trigger(trigger, this.core, this.onFiles);\n    }\n}\n\nexport default class PickerCollector {\n    static setSWF(url) {\n        SWF_URL = url;\n    }\n    constructor(core) {\n\n        const onFiles = (files, runtime) => {\n            for (let i = 0, l = files.length; i < l; i++) {\n                if (core.add(new File(runtime, files[i])) < 0) {\n                    break;\n                }\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window)) {\n            this.triggerCollection = new Html5TriggerCollection(core, onFiles);\n        } else {\n            this.triggerCollection = new FlashTriggerCollection(core, onFiles);\n        }\n    }\n\n    addArea(area) {\n        return this.triggerCollection.add(area);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/picker.js\n **/","import Runtime from '../runtime';\nimport Transport from './transport';\n\nfunction getFlashVersion() {\n    let version;\n\n    try {\n        version = navigator.plugins['Shockwave Flash'];\n        version = version.description;\n    } catch (e1) {\n        try {\n            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n        } catch (e2) {\n            version = '0.0';\n        }\n    }\n    version = version.match(/\\d+/g);\n    return parseFloat(version[0] + '.' + version[1]);\n}\n\nfunction callFlash(movie, functionName, argumentArray) {\n    try {\n        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n    } catch (ex) {\n        throw \"Call to \" + functionName + \" failed\";\n    }\n}\n\nfunction createFlash(swf, callInterface) {\n    if (getFlashVersion() < 11.4) {\n        throw 'flash player is not available';\n    }\n    const div = document.createElement('div');\n    let url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n    let attrs = [\n        'id=\"' + callInterface + '-Picker\"',\n        'type=\"application/x-shockwave-flash\"',\n        'data=\"' + url + '\"',\n        'width=\"100%\" height=\"100%\"',\n        'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'\n    ];\n    if (window.ActiveXObject) {\n        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n    }\n    div.innerHTML = '<object ' + attrs.join(' ') + '>' +\n        '<param name=\"movie\" value=\"' + url + '\" />' +\n        '<param name=\"wmode\" value=\"transparent\" />' +\n        '<param name=\"allowscriptaccess\" value=\"always\" />' +\n    '</object>';\n\n    return div.firstChild;\n}\n\nlet _guid = +new Date;\nfunction guid(prefix) {\n    let ret = prefix + (_guid++).toString(16);\n    if (ret in window) {\n        return guid(prefix);\n    }\n    return ret;\n}\n\nexport default class FlashRuntime extends Runtime {\n    constructor(trigger, swf, options) {\n        super();\n\n        const callInterface = guid('FlashRuntime');\n\n        this.callInterface = callInterface;\n        window[callInterface] = this;\n\n        this.options = options;\n\n        const _this = this;\n        function display() {\n            let w = trigger.offsetWidth, h = trigger.offsetHeight, flash;\n            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n                setTimeout(display, 1000);\n                return;\n            }\n\n            trigger.appendChild(_this.flash = flash);\n        }\n\n        display();\n    }\n    getOptions() {\n        let options = this.options;\n        if (typeof options === 'function') {\n            options = options();\n        }\n        return options;\n    }\n    getTransport(name, blob, options) {\n        return new Transport(this, name, blob, options);\n    }\n    send(name, blob, url, params) {\n        callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n    }\n    abort(blob) {\n        try {\n            callFlash(this.flash, 'exec', ['abort', blob.id]);\n        } catch (e) {}\n    }\n    cancel(blob) {\n        callFlash(this.flash, 'exec', ['cancel', blob.id]);\n    }\n    ping() {\n        callFlash(this.flash, 'exec', ['pang']);\n    }\n    destroy() {\n        delete window[this.callInterface];\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/runtime.js\n **/","import {Deferred} from '../util';\nimport {TimeoutError, AbortError, NetworkError} from '../errors';\n\nexport default class FlashTransport {\n    constructor(flashRuntime) {\n        this.flashRuntime = flashRuntime;\n    }\n\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(), flashRuntime = this.flashRuntime, blob = request.getBlob();\n\n        let timeoutTimer;\n\n        const clean = () => {\n            flashRuntime.off('uploadprogress', progress);\n            flashRuntime.off('uploadcomplete', complete);\n            flashRuntime.off('uploaderror', error);\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n        const abort = () => {\n            clean();\n            flashRuntime.abort(blob.id);\n        };\n\n        const progress = (e) => {\n            if (e.id !== blob.id) return;\n            i.notify(e);\n        };\n\n        const complete = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            if (e.status === 304 || e.status >= 200 && e.status < 300) {\n                flashRuntime.cancel(blob);\n                return i.resolve(e.response);\n            }\n            return i.reject(new NetworkError(e.status, e.response));\n        };\n\n        const error = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            i.reject(new AbortError(e.message));\n        };\n        flashRuntime.on('uploadprogress', progress);\n        flashRuntime.on('uploadcomplete', complete);\n        flashRuntime.on('uploaderror', error);\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/transport.js\n **/"],"sourceRoot":""}