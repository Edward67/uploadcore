<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>uxcore-uploader by uxcore</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">uxcore-uploader</h1>
      <h2 class="project-tagline">UX Core Uploader</h2>
      <a href="https://github.com/uxcore/uxcore-uploader" class="btn">View on GitHub</a>
      <a href="https://github.com/uxcore/uxcore-uploader/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/uxcore/uxcore-uploader/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h3>

<p><strong>引入资源</strong></p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>path/to/jquery.js<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>path/to/uxuploader.js<span class="pl-pds">"</span></span> /&gt;</pre></div>

<p><strong>创建对象</strong></p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">import</span> Uploader, {Events, Status} <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>uxuploader<span class="pl-pds">'</span></span>;
<span class="pl-k">var</span> up <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Uploader</span>({
    request<span class="pl-k">:</span> {
        name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>file<span class="pl-pds">'</span></span>,
        url<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://test.yanbingbing.com/upload.php<span class="pl-pds">'</span></span>,
        params<span class="pl-k">:</span> {},
        headers<span class="pl-k">:</span> <span class="pl-c1">null</span>,
        withCredentials<span class="pl-k">:</span> <span class="pl-c1">false</span>,
        timeout<span class="pl-k">:</span> <span class="pl-c1">0</span>,
        chunkEnable<span class="pl-k">:</span> <span class="pl-c1">false</span>
    },
    processThreads<span class="pl-k">:</span> <span class="pl-c1">3</span>,
    autoPending<span class="pl-k">:</span> <span class="pl-c1">true</span>,
    queueCapcity<span class="pl-k">:</span> <span class="pl-c1">0</span>,
    multiple<span class="pl-k">:</span> <span class="pl-c1">true</span>,
    accept<span class="pl-k">:</span> <span class="pl-c1">null</span>,
    sizeLimit<span class="pl-k">:</span> <span class="pl-c1">0</span>,
    preventDuplicate<span class="pl-k">:</span> <span class="pl-c1">false</span>
});</pre></div>

<p><strong>事件监听</strong></p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// 队列错误</span>
up.on(Events.QUEUE_ERROR, (<span class="pl-smi">error</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>queueerror<span class="pl-pds">'</span></span>, error)
})
<span class="pl-c">// 队列添加</span>
.on(Events.QUEUE_ADD, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>queueadd<span class="pl-pds">'</span></span>, file)
})
<span class="pl-c">// 队列上传开始</span>
.on(Events.QUEUE_UPLOAD_START, ()<span class="pl-k"> =&gt;</span> {
   <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>queueuploadstart<span class="pl-pds">'</span></span>);
})
<span class="pl-c">// 队列上传结束</span>
.on(Events.QUEUE_UPLOAD_END, ()<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>queueuploadend<span class="pl-pds">'</span></span>);
})
<span class="pl-c">// 队列统计变化</span>
.on(Events.QUEUE_STAT_CHANGE, (<span class="pl-smi">stat</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>statchange<span class="pl-pds">'</span></span>, stat.stat());
})
<span class="pl-c">// 文件上传开始</span>
.on(Events.FILE_UPLOAD_START, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadstart<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件上传准备中</span>
.on(Events.FILE_UPLOAD_PREPARING, (<span class="pl-smi">request</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadpreparing<span class="pl-pds">'</span></span>, request);
})
<span class="pl-c">// 文件上传准备完毕</span>
.on(Events.FILE_UPLOAD_PREPARED, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadprepared<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件块上传准备中</span>
.on(Events.CHUNK_UPLOAD_PREPARING, (<span class="pl-smi">request</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>chunkuploadpreparing<span class="pl-pds">'</span></span>, request);
})
<span class="pl-c">// 文件块上传完成中</span>
.on(Events.CHUNK_UPLOAD_COMPLETING, (<span class="pl-smi">response</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>chunkuploadcompleting<span class="pl-pds">'</span></span>, response);
})
<span class="pl-c">// 文件上传进度</span>
.on(Events.FILE_UPLOAD_PROGRESS, (<span class="pl-smi">file</span>, <span class="pl-smi">progress</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadprogress<span class="pl-pds">'</span></span>, file, progress);
})
<span class="pl-c">// 文件上传结束</span>
.on(Events.FILE_UPLOAD_END, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadend<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件上传完成中</span>
.on(Events.FILE_UPLOAD_COMPLETING, (<span class="pl-smi">response</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadcompleting<span class="pl-pds">'</span></span>, response);
})
<span class="pl-c">// 文件上传成功</span>
.on(Events.FILE_UPLOAD_SUCCESS, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadsuccess<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件上传错误</span>
.on(Events.FILE_UPLOAD_ERROR, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploaderror<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件上传完成</span>
.on(Events.FILE_UPLOAD_COMPLETED, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>fileuploadcompleted<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件取消</span>
.on(Events.FILE_CANCEL, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>filecancel<span class="pl-pds">'</span></span>, file);
})
<span class="pl-c">// 文件状态变化</span>
.on(Events.FILE_STATUS_CHANGE, (<span class="pl-smi">file</span>)<span class="pl-k"> =&gt;</span> {
    <span class="pl-en">console</span><span class="pl-c1">.info</span>(<span class="pl-s"><span class="pl-pds">'</span>filestatuschange<span class="pl-pds">'</span></span>, file, file.getStatusName());
});</pre></div>

<p><strong>添加触发区域</strong></p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// 初始化拖拽上传控制</span>
<span class="pl-k">const</span> <span class="pl-c1">dnd</span> <span class="pl-k">=</span> up.getDndCollector();
<span class="pl-c">// 添加拖拽上传区域</span>
dnd.addArea(<span class="pl-c1">document</span>.<span class="pl-c1">documentElement</span>);

<span class="pl-c">// 初始化拾取器</span>
<span class="pl-k">const</span> <span class="pl-c1">picker</span> <span class="pl-k">=</span> up.getPickerCollector();
<span class="pl-c">// 添加鼠标触发区域</span>
picker.addArea(<span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">'</span>button<span class="pl-pds">'</span></span>));</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/uxcore/uxcore-uploader">uxcore-uploader</a> is maintained by <a href="https://github.com/uxcore">uxcore</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
