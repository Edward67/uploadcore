{"version":3,"sources":["webpack:///uploader.js","webpack:///webpack/bootstrap 3eb190160c1bf7091bd0","webpack:///./index.js","webpack:///./src/context.js","webpack:///./src/emitter.js","webpack:///external \"jQuery\"","webpack:///./src/events.js","webpack:///./src/status.js","webpack:///./src/errors.js","webpack:///./src/util.js","webpack:///./src/filerequest.js","webpack:///./src/collector/dnd.js","webpack:///./src/html5/runtime.js","webpack:///./src/runtime.js","webpack:///./src/html5/transport.js","webpack:///./src/file.js","webpack:///./src/collector/paste.js","webpack:///./src/collector/picker.js","webpack:///./src/flash/runtime.js","webpack:///./src/flash/transport.js"],"names":["UXUploader","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_srcContext","_srcContext2","_srcEvents","_srcEvents2","_srcStatus","_srcStatus2","Uploader","Events","Status","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","get","getPrototypeOf","_emitter","_emitter2","_events","_events2","_status","_status2","_errors","_util","_filerequest","_filerequest2","_collectorDnd","_collectorDnd2","_collectorPaste","_collectorPaste2","_collectorPicker","_collectorPicker2","Context","_Emitter","options","_this","this","processThreads","autoPending","queueCapcity","accept","sizeLimit","preventDuplicate","multiple","stat","Stat","constraints","Constraints","filters","Filters","normalizeAccept","pending","Pending","addConstraint","getTotal","addFilter","file","some","item","extensions","indexOf","ext","FileExtensionError","parseSize","size","FileSizeError","formatSize","getFiles","name","DuplicateError","requestOptions","request","constraint","add","filter","_this2","isLimit","emit","QUEUE_ERROR","QueueLimitError","error","QUEUE_FILE_FILTERED","setStatus","QUEUED","on","FILE_STATUS_CHANGE","status","CANCELLED","remove","PENDING","setTimeout","QUEUE_UPLOAD_START","QUEUE_STAT_CHANGE","PROCESS","QUEUE_UPLOAD_END","setContext","QUEUE_FILE_ADDED","picker","dnd","paster","url","setSWF","Set","_set","shift","pop","slice","has","push","splice","files","flag","toArray","getStatus","forEach","_this3","fn","every","ret","e","FilterError","Error","toString","threads","heading","_this4","session","always","load","_this5","prepare","process","HookInvoker","hooks","initialData","context","_data","_error","_aborted","_jquery","Deferred","promise","abort","fail","reject","done","resolve","setData","data","next","hook","res","then","Emitter","event","listener","toLowerCase","that","off","apply","arguments","listeners","emitter","propagationTarget","_len","args","Array","_key","applyEmit","pArgs","unshift","jQuery","FILE_UPLOAD_START","FILE_UPLOAD_PREPARING","FILE_UPLOAD_PREPARED","CHUNK_UPLOAD_PREPARING","CHUNK_UPLOAD_COMPLETING","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_END","FILE_UPLOAD_COMPLETING","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_ERROR","FILE_UPLOAD_COMPLETED","FILE_CANCEL","ALL","INITED","PROGRESS","END","SUCCESS","ERROR","StatusName",1,2,4,8,16,32,64,128,"_Error","_Error2","message","AbortError","_Error3","TimeoutError","_Error4","NetworkError","_Error5","_Error6","_Error7","_FilterError","_FilterError2","_FilterError3","parseFloat","prefixesSI","base","index","Math","floor","log","min","powedPrecision","pow","round","units","t","g","k","exec","u","hasOwnProperty","normalizeExtensions","split","map","accepts","isArray","ACCEPTs","title","mimeTypes","images","audios","videos","ChunkResponse","rawResponse","chunkRequest","response","getResponse","getJson","JSON","parse","ChunkRequest","blob","fileRequest","getName","getFile","source","params","getParams","clone","getParam","setParam","getUrl","headers","getHeaders","isWithCredentials","getTimeout","FileResponse","getChunkRequest","isMultiChunk","Params","_name","removeParam","addParam","param","single","encodeURIComponent","join","MIN_CHUNK_SIZE","FileRequest","withCredentials","timeout","chunkSize","chunkRetries","chunkEnable","chunkProcessThreads","retries","getChunkSize","getRuntime","canSlice","createReader","collector","reader","dataTransfer","responders","items","l","_break","entry","webkitGetAsEntry","isDirectory","readEntry","isFile","readEntries","entries","window","$doc","_jquery2","document","runtime","_html5Runtime2","getInstance","started","enter","endTimer","dataTransferReader","_file2","total","responder","recieve","start","Collectors","move","originalEvent","dropEffect","preventDefault","end","drag","clearTimeout","isLeave","type","drop","contains","getData","ex","_html5Runtime","_file","Area","area","areaElement","allowed","DndCollector","areas","destroy","removeAllListeners","r","isMultiple","_runtime","_runtime2","_transport","_transport2","Html5Runtime","_Runtime","fr","FileReader","timer","onloadend","readyState","DONE","result","readAsDataURL","transport","Blob","mozSlice","webkitSlice","blobSlice","SparkMD5","chunks","ceil","chunk","spark","ArrayBuffer","_loadNext","onload","append","readAsArrayBuffer","Runtime","uploading","Uploading","getSource","useChunk","isChunkEnable","getChunkProcessThreads","slots","getActives","reduce","sum","slot","state","readChunk","req","createChunkRequest","getChunkRetries","progress","notify","getContext","completion","getBlob","invoke","getTransport","generate","createChunkResponse","Html5Transport","timeoutTimer","xhr","XMLHttpRequest","XDomainRequest","clean","onerror","upload","onprogress","complete","responseText","statusText","open","header","setRequestHeader","formData","FormData","send","guid","uid","toUpperCase","guessExt","RE_EXT","RE_IMAGE","guessType","Progress","change","percentage","File","filename","test","lastModified","Date","setPropagationTarget","prevStatus","_dataUrlPromise","getAsDataUrl","_md5Promise","md5","_sessionPromise","_session","_flows","flow","createFileRequest","getUploading","createFileResponse","cancel","PasteCollector","paste","isDefaultPrevented","clipboardData","prevent","addRet","kind","getAsFile","stopPropagation","_flashRuntime","_flashRuntime2","SWF_URL","FlashTriggerCollection","onFiles","overlay","css","position","opacity","left","top","width","height","display","cursor","background","overflow","zIndex","getAccept","current","hideOverlay","appendTo","body","trigger","rect","currentTarget","getBoundingClientRect","right","bottom","Html5TriggerCollection","_createInput","label","input","createElement","attr","clip","html","PickerCollector","triggerCollection","getFlashVersion","version","navigator","plugins","description","e1","ActiveXObject","GetVariable","e2","match","callFlash","movie","functionName","argumentArray","CallFunction","__flash__argumentsToXML","createFlash","swf","callInterface","div","attrs","innerHTML","firstChild","_x4","_again2","prefix","_guid","FlashRuntime","w","offsetWidth","h","offsetHeight","flash","FlashTransport","flashRuntime"],"mappings":"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","file":"uploader.js","sourcesContent":["var UXUploader =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _srcContext = __webpack_require__(1);\n\t\n\tvar _srcContext2 = _interopRequireDefault(_srcContext);\n\t\n\tvar _srcEvents = __webpack_require__(4);\n\t\n\tvar _srcEvents2 = _interopRequireDefault(_srcEvents);\n\t\n\tvar _srcStatus = __webpack_require__(5);\n\t\n\tvar _srcStatus2 = _interopRequireDefault(_srcStatus);\n\t\n\texports['default'] = _srcContext2['default'];\n\texports.Uploader = _srcContext2['default'];\n\texports.Events = _srcEvents2['default'];\n\texports.Status = _srcStatus2['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _status = __webpack_require__(5);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _util = __webpack_require__(7);\n\t\n\tvar _filerequest = __webpack_require__(8);\n\t\n\tvar _filerequest2 = _interopRequireDefault(_filerequest);\n\t\n\tvar _collectorDnd = __webpack_require__(9);\n\t\n\tvar _collectorDnd2 = _interopRequireDefault(_collectorDnd);\n\t\n\tvar _collectorPaste = __webpack_require__(14);\n\t\n\tvar _collectorPaste2 = _interopRequireDefault(_collectorPaste);\n\t\n\tvar _collectorPicker = __webpack_require__(15);\n\t\n\tvar _collectorPicker2 = _interopRequireDefault(_collectorPicker);\n\t\n\tvar Context = (function (_Emitter) {\n\t    _inherits(Context, _Emitter);\n\t\n\t    function Context(options) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, Context);\n\t\n\t        _get(Object.getPrototypeOf(Context.prototype), 'constructor', this).call(this);\n\t\n\t        var processThreads = options.processThreads;\n\t        var autoPending = options.autoPending;\n\t        var queueCapcity = options.queueCapcity;\n\t        var accept = options.accept;\n\t        var sizeLimit = options.sizeLimit;\n\t        var preventDuplicate = options.preventDuplicate;\n\t        var multiple = options.multiple;\n\t\n\t        this.stat = new Stat();\n\t        this.constraints = new Constraints();\n\t        this.filters = new Filters();\n\t        this.accept = (0, _util.normalizeAccept)(accept);\n\t        this.autoPending = autoPending;\n\t        this.multiple = multiple == null ? true : multiple;\n\t        this.pending = new Pending(processThreads);\n\t\n\t        if (queueCapcity && queueCapcity > 0) {\n\t            this.addConstraint(function () {\n\t                return _this.stat.getTotal() >= queueCapcity;\n\t            });\n\t        }\n\t\n\t        if (this.accept && this.accept.length > 0) {\n\t            this.addFilter(function (file) {\n\t                if (!_this.accept.some(function (item) {\n\t                    return item.extensions && item.extensions.indexOf(file.ext) > -1;\n\t                })) {\n\t                    return new _errors.FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n\t                }\n\t            });\n\t        }\n\t\n\t        if (sizeLimit && (sizeLimit = (0, _util.parseSize)(sizeLimit)) > 0) {\n\t            this.addFilter(function (file) {\n\t                if (file.size > sizeLimit) {\n\t                    return new _errors.FileSizeError(file, 'filesize:' + (0, _util.formatSize)(file.size) + ' is greater than limit:' + (0, _util.formatSize)(sizeLimit));\n\t                }\n\t            });\n\t        }\n\t\n\t        if (preventDuplicate) {\n\t            this.addFilter(function (file) {\n\t                if (_this.stat.getFiles().some(function (item) {\n\t                    return item.name === file.name && item.size === file.size;\n\t                })) {\n\t                    return new _errors.DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n\t                }\n\t            });\n\t        }\n\t\n\t        this.requestOptions = options.request || {};\n\t    }\n\t\n\t    _createClass(Context, [{\n\t        key: 'createFileRequest',\n\t        value: function createFileRequest(file) {\n\t            return new _filerequest2['default'](file, this.requestOptions);\n\t        }\n\t    }, {\n\t        key: 'isLimit',\n\t        value: function isLimit() {\n\t            return this.constraints.some();\n\t        }\n\t    }, {\n\t        key: 'addConstraint',\n\t        value: function addConstraint(constraint) {\n\t            return this.constraints.add(constraint);\n\t        }\n\t    }, {\n\t        key: 'addFilter',\n\t        value: function addFilter(filter) {\n\t            return this.filters.add(filter);\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this2 = this;\n\t\n\t            if (this.isLimit()) {\n\t                this.emit(_events2['default'].QUEUE_ERROR, new _errors.QueueLimitError());\n\t                return -1;\n\t            }\n\t\n\t            var error = this.filters.filter(file);\n\t            if (!error && !this.stat.add(file)) {\n\t                error = new _errors.DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n\t            }\n\t\n\t            if (error) {\n\t                this.emit(_events2['default'].QUEUE_FILE_FILTERED, file, error);\n\t                this.emit(_events2['default'].QUEUE_ERROR, error);\n\t                return 0;\n\t            }\n\t\n\t            file.setStatus(_status2['default'].QUEUED);\n\t\n\t            file.on(_events2['default'].FILE_STATUS_CHANGE, function (status) {\n\t                if (status === _status2['default'].CANCELLED) {\n\t                    _this2.stat.remove(file);\n\t                } else if (status === _status2['default'].PENDING) {\n\t                    setTimeout(function () {\n\t                        if (_this2.pending.add(file) && _this2.pending.size() === 1) {\n\t                            _this2.emit(_events2['default'].QUEUE_UPLOAD_START);\n\t                        }\n\t                    }, 1);\n\t                }\n\t\n\t                _this2.emit(_events2['default'].QUEUE_STAT_CHANGE, _this2.stat);\n\t\n\t                if (_this2.stat.getFiles(_status2['default'].PROCESS).length < 1) {\n\t                    _this2.emit(_events2['default'].QUEUE_UPLOAD_END);\n\t                }\n\t            });\n\t\n\t            file.setContext(this);\n\t\n\t            this.emit(_events2['default'].QUEUE_FILE_ADDED, file);\n\t\n\t            this.emit(_events2['default'].QUEUE_STAT_CHANGE, this.stat);\n\t\n\t            if (this.autoPending) {\n\t                file.pending();\n\t            }\n\t\n\t            return 1;\n\t        }\n\t    }, {\n\t        key: 'isMultiple',\n\t        value: function isMultiple() {\n\t            return this.multiple;\n\t        }\n\t    }, {\n\t        key: 'getAccept',\n\t        value: function getAccept() {\n\t            return this.accept;\n\t        }\n\t    }, {\n\t        key: 'getStat',\n\t        value: function getStat() {\n\t            return this.stat;\n\t        }\n\t    }, {\n\t        key: 'getPickerCollector',\n\t        value: function getPickerCollector() {\n\t            if (!this.picker) {\n\t                this.picker = new _collectorPicker2['default'](this);\n\t            }\n\t            return this.picker;\n\t        }\n\t    }, {\n\t        key: 'getDndCollector',\n\t        value: function getDndCollector() {\n\t            if (!this.dnd) {\n\t                this.dnd = new _collectorDnd2['default'](this);\n\t            }\n\t            return this.dnd;\n\t        }\n\t    }, {\n\t        key: 'getPasteCollector',\n\t        value: function getPasteCollector() {\n\t            if (!this.paster) {\n\t                this.paster = new _collectorPaste2['default'](this);\n\t            }\n\t            return this.paster;\n\t        }\n\t    }], [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            _collectorPicker2['default'].setSWF(url);\n\t        }\n\t    }]);\n\t\n\t    return Context;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = Context;\n\t\n\tvar Set = (function () {\n\t    function Set() {\n\t        _classCallCheck(this, Set);\n\t\n\t        this._set = [];\n\t    }\n\t\n\t    /**\n\t     * 项目总数\n\t     *\n\t     * @returns {Number}\n\t     */\n\t\n\t    _createClass(Set, [{\n\t        key: 'size',\n\t        value: function size() {\n\t            return this._set.length;\n\t        }\n\t\n\t        /**\n\t         * 从头部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t    }, {\n\t        key: 'shift',\n\t        value: function shift() {\n\t            return this._set.shift();\n\t        }\n\t\n\t        /**\n\t         * 从尾部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t    }, {\n\t        key: 'pop',\n\t        value: function pop() {\n\t            return this._set.pop();\n\t        }\n\t\n\t        /**\n\t         * 获得所有项\n\t         *\n\t         * @returns {Array}\n\t         */\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this._set.slice(0);\n\t        }\n\t\n\t        /**\n\t         * 添加一项\n\t         *\n\t         * @param item\n\t         * @returns {boolean} success if true\n\t         */\n\t    }, {\n\t        key: 'add',\n\t        value: function add(item) {\n\t            if (this.has(item)) {\n\t                return false;\n\t            }\n\t            this._set.push(item);\n\t            return true;\n\t        }\n\t\n\t        /**\n\t         * 是否存在该项\n\t         *\n\t         * @param item\n\t         * @returns {boolean}\n\t         */\n\t    }, {\n\t        key: 'has',\n\t        value: function has(item) {\n\t            return this._set.indexOf(item) > -1;\n\t        }\n\t\n\t        /**\n\t         * 删除某项\n\t         *\n\t         * @returns {boolean} success if true\n\t         */\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(item) {\n\t            var i = this._set.indexOf(item);\n\t            if (i > -1) {\n\t                this._set.splice(i, 1);\n\t                return true;\n\t            }\n\t            return false;\n\t        }\n\t\n\t        /**\n\t         * 清空\n\t         */\n\t    }, {\n\t        key: 'clear',\n\t        value: function clear() {\n\t            this._set = [];\n\t        }\n\t    }]);\n\t\n\t    return Set;\n\t})();\n\t\n\tvar Stat = (function () {\n\t    function Stat() {\n\t        _classCallCheck(this, Stat);\n\t\n\t        this.files = new Set();\n\t    }\n\t\n\t    _createClass(Stat, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            return this.files.add(file);\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(file) {\n\t            this.files.remove(file);\n\t        }\n\t    }, {\n\t        key: 'getTotal',\n\t        value: function getTotal() {\n\t            return this.files.size();\n\t        }\n\t    }, {\n\t        key: 'getFiles',\n\t        value: function getFiles(flag) {\n\t            var files = this.files.toArray();\n\t            if (!flag) {\n\t                return files;\n\t            }\n\t            return files.filter(function (file) {\n\t                return !!(file.getStatus() & flag);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'stat',\n\t        value: function stat(flag) {\n\t            var stat = {},\n\t                files = this.getFiles(flag);\n\t\n\t            files.forEach(function (file) {\n\t                var status = file.getStatus();\n\t                stat[status] = status in stat ? stat[status] + 1 : 1;\n\t            });\n\t\n\t            stat['sum'] = files.length;\n\t\n\t            return stat;\n\t        }\n\t    }]);\n\t\n\t    return Stat;\n\t})();\n\t\n\tvar Constraints = (function () {\n\t    function Constraints() {\n\t        _classCallCheck(this, Constraints);\n\t\n\t        this.constraints = new Set();\n\t    }\n\t\n\t    _createClass(Constraints, [{\n\t        key: 'add',\n\t        value: function add(constraint) {\n\t            this.constraints.add(constraint);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(constraint) {\n\t            this.constraints.remove(constraint);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'some',\n\t        value: function some() {\n\t            var _this3 = this;\n\t\n\t            return this.constraints.toArray().some(function (fn) {\n\t                return fn.call(_this3);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Constraints;\n\t})();\n\t\n\tvar Filters = (function () {\n\t    function Filters() {\n\t        _classCallCheck(this, Filters);\n\t\n\t        this.filters = new Set();\n\t    }\n\t\n\t    _createClass(Filters, [{\n\t        key: 'add',\n\t        value: function add(filter) {\n\t            this.filters.add(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(filter) {\n\t            this.filters.remove(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'filter',\n\t        value: function filter(file) {\n\t            var error = null;\n\t            this.filters.toArray().every(function (filter) {\n\t                var ret = undefined;\n\t                try {\n\t                    ret = filter(file);\n\t                } catch (e) {\n\t                    ret = e;\n\t                }\n\t                if (typeof ret === 'string') {\n\t                    error = new _errors.FilterError(file, ret);\n\t                    return false;\n\t                } else if (ret instanceof Error) {\n\t                    error = ret instanceof _errors.FilterError ? ret : new _errors.FilterError(file, ret.toString());\n\t                    return false;\n\t                }\n\t                return true;\n\t            });\n\t            return error;\n\t        }\n\t    }]);\n\t\n\t    return Filters;\n\t})();\n\t\n\tvar Pending = (function () {\n\t    function Pending(threads) {\n\t        _classCallCheck(this, Pending);\n\t\n\t        this.threads = threads || 2;\n\t        this.heading = new Set();\n\t        this.pending = new Set();\n\t    }\n\t\n\t    _createClass(Pending, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this4 = this;\n\t\n\t            if (!this.pending.add(file)) return false;\n\t\n\t            file.session().always(function () {\n\t                return _this4.pending.remove(file);\n\t            });\n\t\n\t            this.load();\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'size',\n\t        value: function size() {\n\t            return this.pending.size() + this.heading.size();\n\t        }\n\t    }, {\n\t        key: 'process',\n\t        value: function process(file) {\n\t            var _this5 = this;\n\t\n\t            if (!this.heading.add(file)) return;\n\t\n\t            file.session().always(function () {\n\t                _this5.heading.remove(file);\n\t                _this5.load();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'load',\n\t        value: function load() {\n\t            var file;\n\t            while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n\t                if (file.prepare()) {\n\t                    this.process(file);\n\t                }\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return Pending;\n\t})();\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar Emitter = (function () {\n\t    function Emitter() {\n\t        _classCallCheck(this, Emitter);\n\t    }\n\t\n\t    _createClass(Emitter, [{\n\t        key: 'on',\n\t        value: function on(event, listener) {\n\t            event = event.toLowerCase();\n\t            if (!this._events) {\n\t                this._events = {};\n\t            }\n\t\n\t            if (!this._events[event]) {\n\t                this._events[event] = [];\n\t            }\n\t\n\t            this._events[event].push(listener);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'once',\n\t        value: function once(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var that = this;\n\t\n\t            function fn() {\n\t                that.off(event, fn);\n\t                listener.apply(this, arguments);\n\t            }\n\t\n\t            fn.listener = listener;\n\t\n\t            this.on(event, fn);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'off',\n\t        value: function off(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                return this;\n\t            }\n\t\n\t            var i = listeners.length;\n\t            while (i-- > 0) {\n\t                if (listeners[i] === listener || listeners[i].listener === listener) {\n\t                    listeners.splice(i, 1);\n\t                    break;\n\t                }\n\t            }\n\t\n\t            if (listeners.length === 0) {\n\t                delete this._events[event];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'removeAllListeners',\n\t        value: function removeAllListeners(event) {\n\t            if (!event) {\n\t                this._events = [];\n\t            } else {\n\t                delete this._events[event.toLowerCase()];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setPropagationTarget',\n\t        value: function setPropagationTarget(emitter) {\n\t            if (emitter instanceof Emitter) {\n\t                this.propagationTarget = emitter;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'emit',\n\t        value: function emit(event) {\n\t            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t                args[_key - 1] = arguments[_key];\n\t            }\n\t\n\t            this.applyEmit(event, args);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'applyEmit',\n\t        value: function applyEmit(event, args) {\n\t            var _this = this;\n\t\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (this._events && (listeners = this._events[event])) {\n\t                listeners.slice(0).forEach(function (fn) {\n\t                    return fn.apply(_this, args);\n\t                });\n\t            }\n\t\n\t            if (this.propagationTarget) {\n\t                var pArgs = args.slice(0);\n\t                pArgs.unshift(this);\n\t                this.propagationTarget.applyEmit(event, pArgs);\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'invoke',\n\t        value: function invoke(event, data) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                listeners = [];\n\t            }\n\t\n\t            return HookInvoker(listeners.slice(0), data, this);\n\t        }\n\t    }]);\n\t\n\t    return Emitter;\n\t})();\n\t\n\texports['default'] = Emitter;\n\t\n\tfunction HookInvoker(hooks, initialData, context) {\n\t    var _data = initialData;\n\t    var _error = null;\n\t    var _aborted = undefined;\n\t\n\t    var i = (0, _jquery.Deferred)();\n\t    var ret = i.promise();\n\t\n\t    ret.abort = function () {\n\t        _aborted = true;\n\t    };\n\t\n\t    var fail = function fail(e) {\n\t        if (_aborted) return;\n\t        if (e) {\n\t            _error = e instanceof Error ? e : new Error(e);\n\t        }\n\t        i.reject(_error || new Error('Unknown'));\n\t    };\n\t\n\t    var done = function done() {\n\t        if (_aborted) return;\n\t        if (_error != null) {\n\t            fail();\n\t        } else {\n\t            i.resolve(_data);\n\t        }\n\t    };\n\t\n\t    var setData = function setData(data) {\n\t        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n\t            _data = data;\n\t        }\n\t    };\n\t\n\t    var next = function next(data) {\n\t        if (_aborted) return;\n\t\n\t        if (data instanceof Error) {\n\t            _error = data;\n\t        }\n\t\n\t        if (_error != null) {\n\t            return fail();\n\t        }\n\t\n\t        setData(data);\n\t\n\t        var hook = hooks.shift();\n\t        if (!hook) {\n\t            return done();\n\t        }\n\t        var res = undefined;\n\t        try {\n\t            res = hook.call(context, _data);\n\t        } catch (e) {\n\t            return fail(e);\n\t        }\n\t\n\t        if (res && res.then) {\n\t            res.then(next, fail);\n\t        } else {\n\t            next(res);\n\t        }\n\t    };\n\t\n\t    setTimeout(next, 1);\n\t\n\t    return ret;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = jQuery;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n\t    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n\t    QUEUE_FILE_ADDED: 'queuefileadded', // 队列添加了一个文件\n\t    QUEUE_FILE_FILTERED: 'queuefilefiltered', // 队列过滤了一个文件\n\t    QUEUE_ERROR: 'queueerror', // 队列错误\n\t    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\t\n\t    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n\t    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n\t    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n\t    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n\t    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n\t    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n\t    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n\t    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n\t    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n\t    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n\t    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\t\n\t    FILE_CANCEL: 'filecancel', // 文件退出\n\t    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    ALL: 255, // 所有状态\n\t\n\t    PROCESS: 31, // INITED -> END\n\t    INITED: 1, // 初始状态\n\t    QUEUED: 2, // 进入队列\n\t    PENDING: 4, // 队列中等待\n\t    PROGRESS: 8, // 上传中\n\t    END: 16, // 上传完成, 等待后续处理\n\t\n\t    SUCCESS: 32, // 上传成功\n\t    ERROR: 64, // 上传出错\n\t    CANCELLED: 128 // 上传取消 和 queued 相反, 退出队列\n\t};\n\tvar StatusName = {\n\t    1: 'inited',\n\t    2: 'queued',\n\t    4: 'pending',\n\t    8: 'progress',\n\t    16: 'end',\n\t    32: 'success',\n\t    64: 'error',\n\t    128: 'cancelled'\n\t};\n\texports.StatusName = StatusName;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Error = (function (_Error2) {\n\t    _inherits(_Error, _Error2);\n\t\n\t    function _Error(message) {\n\t        _classCallCheck(this, _Error);\n\t\n\t        _get(Object.getPrototypeOf(_Error.prototype), 'constructor', this).call(this, message);\n\t        this.message = message;\n\t    }\n\t\n\t    return _Error;\n\t})(Error);\n\t\n\tvar AbortError = (function (_Error3) {\n\t    _inherits(AbortError, _Error3);\n\t\n\t    function AbortError(message) {\n\t        _classCallCheck(this, AbortError);\n\t\n\t        _get(Object.getPrototypeOf(AbortError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'AbortError';\n\t    }\n\t\n\t    return AbortError;\n\t})(_Error);\n\t\n\texports.AbortError = AbortError;\n\t\n\tvar TimeoutError = (function (_Error4) {\n\t    _inherits(TimeoutError, _Error4);\n\t\n\t    function TimeoutError(message) {\n\t        _classCallCheck(this, TimeoutError);\n\t\n\t        _get(Object.getPrototypeOf(TimeoutError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'TimeoutError';\n\t    }\n\t\n\t    return TimeoutError;\n\t})(_Error);\n\t\n\texports.TimeoutError = TimeoutError;\n\t\n\tvar NetworkError = (function (_Error5) {\n\t    _inherits(NetworkError, _Error5);\n\t\n\t    function NetworkError(status, message) {\n\t        _classCallCheck(this, NetworkError);\n\t\n\t        _get(Object.getPrototypeOf(NetworkError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'NetworkError';\n\t        this.status = status;\n\t    }\n\t\n\t    return NetworkError;\n\t})(_Error);\n\t\n\texports.NetworkError = NetworkError;\n\t\n\tvar QueueLimitError = (function (_Error6) {\n\t    _inherits(QueueLimitError, _Error6);\n\t\n\t    function QueueLimitError() {\n\t        _classCallCheck(this, QueueLimitError);\n\t\n\t        _get(Object.getPrototypeOf(QueueLimitError.prototype), 'constructor', this).call(this, 'queue limit');\n\t        this.name = 'QueueLimitError';\n\t    }\n\t\n\t    return QueueLimitError;\n\t})(_Error);\n\t\n\texports.QueueLimitError = QueueLimitError;\n\t\n\tvar FilterError = (function (_Error7) {\n\t    _inherits(FilterError, _Error7);\n\t\n\t    function FilterError(file, message) {\n\t        _classCallCheck(this, FilterError);\n\t\n\t        _get(Object.getPrototypeOf(FilterError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'FilterError';\n\t        this.file = file;\n\t    }\n\t\n\t    return FilterError;\n\t})(_Error);\n\t\n\texports.FilterError = FilterError;\n\t\n\tvar DuplicateError = (function (_FilterError) {\n\t    _inherits(DuplicateError, _FilterError);\n\t\n\t    function DuplicateError(file, message) {\n\t        _classCallCheck(this, DuplicateError);\n\t\n\t        _get(Object.getPrototypeOf(DuplicateError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'DuplicateError';\n\t    }\n\t\n\t    return DuplicateError;\n\t})(FilterError);\n\t\n\texports.DuplicateError = DuplicateError;\n\t\n\tvar FileExtensionError = (function (_FilterError2) {\n\t    _inherits(FileExtensionError, _FilterError2);\n\t\n\t    function FileExtensionError(file, message) {\n\t        _classCallCheck(this, FileExtensionError);\n\t\n\t        _get(Object.getPrototypeOf(FileExtensionError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'FileExtensionError';\n\t    }\n\t\n\t    return FileExtensionError;\n\t})(FilterError);\n\t\n\texports.FileExtensionError = FileExtensionError;\n\t\n\tvar FileSizeError = (function (_FilterError3) {\n\t    _inherits(FileSizeError, _FilterError3);\n\t\n\t    function FileSizeError(file, message) {\n\t        _classCallCheck(this, FileSizeError);\n\t\n\t        _get(Object.getPrototypeOf(FileSizeError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'FileSizeError';\n\t    }\n\t\n\t    return FileSizeError;\n\t})(FilterError);\n\t\n\texports.FileSizeError = FileSizeError;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.formatSize = formatSize;\n\texports.parseSize = parseSize;\n\texports.normalizeAccept = normalizeAccept;\n\t\n\tfunction formatSize(size) {\n\t    size = parseFloat(size);\n\t    var prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n\t        base = 1024;\n\t    var index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n\t    index = Math.min(index, prefixesSI.length - 1);\n\t    var powedPrecision = Math.pow(10, index < 2 ? 0 : index > 2 ? 2 : 1);\n\t    size = size / Math.pow(base, index);\n\t    size = Math.round(size * powedPrecision) / powedPrecision;\n\t    return size + prefixesSI[index] + 'B';\n\t}\n\t\n\tfunction parseSize(size) {\n\t    if (typeof size !== 'string') {\n\t        return size;\n\t    }\n\t\n\t    var units = {\n\t        t: 1099511627776,\n\t        g: 1073741824,\n\t        m: 1048576,\n\t        k: 1024\n\t    };\n\t\n\t    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n\t    var u = size[2];\n\t    size = +size[1];\n\t\n\t    if (units.hasOwnProperty(u)) {\n\t        size *= units[u];\n\t    }\n\t    return size;\n\t}\n\t\n\tvar ACCEPTs = {\n\t    images: {\n\t        title: 'Images',\n\t        extensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'svg', 'tiff', 'tif', 'ico', 'jpe', 'svgz', 'pct', 'psp', 'ai', 'psd', 'raw', 'webp']\n\t    },\n\t\n\t    audios: {\n\t        title: 'Audios',\n\t        extensions: ['aac', 'aif', 'flac', 'iff', 'm4a', 'm4b', 'mid', 'midi', 'mp3', 'mpa', 'mpc', 'oga', 'ogg', 'ra', 'ram', 'snd', 'wav', 'wma']\n\t    },\n\t\n\t    videos: {\n\t        title: 'Videos',\n\t        extensions: ['avi', 'divx', 'flv', 'm4v', 'mkv', 'mov', 'mp4', 'mpeg', 'mpg', 'ogm', 'ogv', 'ogx', 'rm', 'rmvb', 'smil', 'webm', 'wmv', 'xvid']\n\t    }\n\t};\n\t\n\tfunction normalizeExtensions(extensions) {\n\t    if (typeof extensions !== 'string') {\n\t        return '';\n\t    }\n\t\n\t    return extensions.toLowerCase().split(/ *[ ,;|+] */).map(function (ext) {\n\t        var m = /^\\*?\\.?(\\w+)$/.exec(ext);\n\t        return m ? m[1] : null;\n\t    }).filter(function (ext) {\n\t        return ext !== null;\n\t    });\n\t}\n\t\n\tfunction normalizeAccept(accepts) {\n\t    if (!accepts) return null;\n\t\n\t    if (!Array.isArray(accepts)) {\n\t        accepts = [accepts];\n\t    }\n\t\n\t    return accepts.map(function (accept) {\n\t        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n\t            return ACCEPTs[accept];\n\t        } else {\n\t            var extensions = normalizeExtensions(accept.extensions || accept);\n\t\n\t            return extensions.length ? {\n\t                title: accept.title || '',\n\t                extensions: extensions,\n\t                mimeTypes: accept.mimeTypes || ''\n\t            } : null;\n\t        }\n\t    }).filter(function (accept) {\n\t        return accept !== null;\n\t    });\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _util = __webpack_require__(7);\n\t\n\tvar ChunkResponse = (function () {\n\t    /**\n\t     * @param {string|null} rawResponse\n\t     * @param {ChunkRequest} chunkRequest\n\t     */\n\t\n\t    function ChunkResponse(rawResponse, chunkRequest) {\n\t        _classCallCheck(this, ChunkResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.chunkRequest = chunkRequest;\n\t    }\n\t\n\t    _createClass(ChunkResponse, [{\n\t        key: 'getChunkRequest',\n\t        value: function getChunkRequest() {\n\t            return this.chunkRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            return this.response || this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getJson',\n\t        value: function getJson() {\n\t            var response = this.getResponse();\n\t            if (response == null) {\n\t                return null;\n\t            }\n\t            if (typeof response.getJson === 'function') {\n\t                return response.getJson();\n\t            }\n\t            if (typeof response === 'string') {\n\t                return response === '' ? null : JSON.parse(response);\n\t            }\n\t            return response;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return ChunkResponse;\n\t})();\n\t\n\tvar ChunkRequest = (function () {\n\t    /**\n\t     *\n\t     * @param {int} index\n\t     * @param {Blob} blob\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function ChunkRequest(index, blob, fileRequest) {\n\t        _classCallCheck(this, ChunkRequest);\n\t\n\t        this.index = index;\n\t        this.blob = blob;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(ChunkRequest, [{\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.fileRequest.getName();\n\t        }\n\t    }, {\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.fileRequest.getFile();\n\t        }\n\t    }, {\n\t        key: 'getBlob',\n\t        value: function getBlob() {\n\t            return this.blob;\n\t        }\n\t    }, {\n\t        key: 'getIndex',\n\t        value: function getIndex() {\n\t            return this.index;\n\t        }\n\t    }, {\n\t        key: 'isMultiChunk',\n\t        value: function isMultiChunk() {\n\t            return this.getFile().source !== this.blob;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            if (!this.params) {\n\t                this.params = this.fileRequest.getParams().clone();\n\t            }\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.getParams().setParam(name, value);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || this.fileRequest.getUrl();\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            if (!this.headers) {\n\t                this.headers = this.fileRequest.getHeaders().slice(0);\n\t            }\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            var headers = this.getHeaders();\n\t            headers.push({ name: name, value: value });\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.fileRequest.isWithCredentials();\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.fileRequest.getTimeout();\n\t        }\n\t    }, {\n\t        key: 'createChunkResponse',\n\t        value: function createChunkResponse(response) {\n\t            return new ChunkResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return ChunkRequest;\n\t})();\n\t\n\tvar FileResponse = (function () {\n\t    /**\n\t     * @param {ChunkResponse|Object|string} rawResponse\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function FileResponse(rawResponse, fileRequest) {\n\t        _classCallCheck(this, FileResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(FileResponse, [{\n\t        key: 'isFromMultiChunkResponse',\n\t        value: function isFromMultiChunkResponse() {\n\t            if (this.rawResponse instanceof ChunkResponse) {\n\t                return this.rawResponse.getChunkRequest().isMultiChunk();\n\t            }\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            if (this.response != null) {\n\t                return this.response;\n\t            }\n\t            if (this.rawResponse instanceof ChunkResponse) {\n\t                return this.rawResponse.getResponse();\n\t            } else {\n\t                return this.rawResponse;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getJson',\n\t        value: function getJson() {\n\t            var response = this.getResponse();\n\t            if (response == null) {\n\t                return null;\n\t            }\n\t            if (typeof response.getJson === 'function') {\n\t                return response.getJson();\n\t            }\n\t            if (typeof response === 'string') {\n\t                return response === '' ? null : JSON.parse(response);\n\t            }\n\t            return response;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return FileResponse;\n\t})();\n\t\n\tvar Params = (function () {\n\t    function Params(params) {\n\t        _classCallCheck(this, Params);\n\t\n\t        if (Array.isArray(params)) {\n\t            this.params = params.slice(0);\n\t        } else if (typeof params === 'object') {\n\t            this.params = [];\n\t            for (var _name in params) {\n\t                if (params.hasOwnProperty(_name)) {\n\t                    this.params.push({ name: _name, value: params[_name] });\n\t                }\n\t            }\n\t        } else {\n\t            this.params = [];\n\t        }\n\t    }\n\t\n\t    _createClass(Params, [{\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.removeParam(name);\n\t            this.addParam(name, value);\n\t        }\n\t    }, {\n\t        key: 'addParam',\n\t        value: function addParam(name, value) {\n\t            this.params.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'removeParam',\n\t        value: function removeParam(name) {\n\t            this.params = this.params.filter(function (param) {\n\t                return param.name !== name;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name, single) {\n\t            var ret = this.params.filter(function (param) {\n\t                return param.name === name;\n\t            }).map(function (param) {\n\t                return param.value;\n\t            });\n\t\n\t            if (single) {\n\t                return ret.shift();\n\t            }\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'clone',\n\t        value: function clone() {\n\t            return new Params(this.params);\n\t        }\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'toString',\n\t        value: function toString() {\n\t            var params = this.params.map(function (param) {\n\t                return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n\t            });\n\t\n\t            return params.join('&'); //.replace( /%20/g, '+');\n\t        }\n\t    }]);\n\t\n\t    return Params;\n\t})();\n\t\n\tvar MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\t\n\tvar FileRequest = (function () {\n\t    function FileRequest(file) {\n\t        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t        _classCallCheck(this, FileRequest);\n\t\n\t        this.file = file;\n\t        this.name = options.name || 'file';\n\t        this.url = options.url;\n\t        this.params = new Params(options.params);\n\t        this.headers = options.headers || [];\n\t        this.withCredentials = options.withCredentials;\n\t        this.timeout = options.timeout || 0;\n\t        this.chunkSize = options.chunkSize || 0;\n\t        this.chunkRetries = options.chunkRetries || 0;\n\t        this.chunkEnable = options.chunkEnable || false;\n\t        this.chunkProcessThreads = options.chunkProcessThreads || 0;\n\t    }\n\t\n\t    _createClass(FileRequest, [{\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.file;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || '';\n\t        }\n\t    }, {\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.name;\n\t        }\n\t    }, {\n\t        key: 'setName',\n\t        value: function setName(name) {\n\t            this.name = name;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.params.setParam(name, value);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            this.headers.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.withCredentials;\n\t        }\n\t    }, {\n\t        key: 'setWithCredentials',\n\t        value: function setWithCredentials(flag) {\n\t            this.withCredentials = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.timeout;\n\t        }\n\t    }, {\n\t        key: 'setTimeout',\n\t        value: function setTimeout(timeout) {\n\t            this.timeout = timeout;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkSize',\n\t        value: function getChunkSize() {\n\t            return (0, _util.parseSize)(this.chunkSize);\n\t        }\n\t    }, {\n\t        key: 'setChunkSize',\n\t        value: function setChunkSize(chunkSize) {\n\t            this.chunkSize = chunkSize;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkRetries',\n\t        value: function getChunkRetries() {\n\t            return this.chunkRetries;\n\t        }\n\t    }, {\n\t        key: 'setChunkRetries',\n\t        value: function setChunkRetries(retries) {\n\t            this.chunkRetries = retries;\n\t            return 0;\n\t        }\n\t    }, {\n\t        key: 'isChunkEnable',\n\t        value: function isChunkEnable() {\n\t            var chunkSize = this.getChunkSize();\n\t            return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n\t        }\n\t    }, {\n\t        key: 'setChunkEnable',\n\t        value: function setChunkEnable(flag) {\n\t            this.chunkEnable = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkProcessThreads',\n\t        value: function getChunkProcessThreads() {\n\t            return this.chunkProcessThreads;\n\t        }\n\t    }, {\n\t        key: 'setChunkProcessThreads',\n\t        value: function setChunkProcessThreads(threads) {\n\t            this.chunkProcessThreads = threads;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'createChunkRequest',\n\t        value: function createChunkRequest(index, blob) {\n\t            return new ChunkRequest(index, blob, this);\n\t        }\n\t    }, {\n\t        key: 'createFileResponse',\n\t        value: function createFileResponse(response) {\n\t            return new FileResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return FileRequest;\n\t})();\n\t\n\texports['default'] = FileRequest;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(10);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _file = __webpack_require__(13);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tfunction createReader(collector) {\n\t    var _break = false;\n\t    function reader(dataTransfer, responders) {\n\t        var items = dataTransfer.items,\n\t            files = dataTransfer.files,\n\t            item;\n\t\n\t        for (var i = 0, l = files.length; i < l; i++) {\n\t            if (_break) break;\n\t            item = items && items[i];\n\t\n\t            var entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\t\n\t            if (entry && entry.isDirectory) {\n\t                readEntry(entry, responders);\n\t            } else {\n\t                if (!collector(files[i], responders)) {\n\t                    _break = true;\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t    }\n\t    function readEntry(entry, responders) {\n\t        if (_break) return;\n\t        if (entry.isFile) {\n\t            entry.file(function (file) {\n\t                if (_break) return;\n\t                if (!collector(file, responders)) {\n\t                    _break = true;\n\t                }\n\t            });\n\t        } else if (entry.isDirectory) {\n\t            entry.createReader().readEntries(function (entries) {\n\t                if (_break) return;\n\t                for (var i = 0, l = entries.length; i < l; i++) {\n\t                    if (_break) break;\n\t                    readEntry(entries[i], responders);\n\t                }\n\t            });\n\t        }\n\t    }\n\t    return reader;\n\t}\n\t\n\tvar Area = (function (_Emitter) {\n\t    _inherits(Area, _Emitter);\n\t\n\t    function Area(area) {\n\t        _classCallCheck(this, Area);\n\t\n\t        _get(Object.getPrototypeOf(Area.prototype), 'constructor', this).call(this);\n\t\n\t        this.areaElement = area;\n\t    }\n\t\n\t    _createClass(Area, [{\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areaElement.contains(target);\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e, allowed) {\n\t            this.emit('start', e, allowed);\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e, allowed) {\n\t            allowed = allowed && this.contains(e.target);\n\t            this.emit('response', e, allowed);\n\t            return allowed;\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.emit('end', e);\n\t        }\n\t    }]);\n\t\n\t    return Area;\n\t})(_emitter2['default']);\n\t\n\tvar Collectors = [];\n\t\n\tfunction prepare() {\n\t    if (!('DataTransfer' in window) || !('FileList' in window)) {\n\t        return;\n\t    }\n\t\n\t    var $doc = (0, _jquery2['default'])(document),\n\t        runtime = _html5Runtime2['default'].getInstance();\n\t\n\t    var started = 0,\n\t        enter = 0,\n\t        endTimer = undefined;\n\t    var dataTransferReader = createReader(function (file, responders) {\n\t        if (!responders || responders.length < 1) {\n\t            return false;\n\t        }\n\t        file = new _file2['default'](runtime, file);\n\t        var total = responders.length;\n\t        return responders.some(function (responder) {\n\t            var ret = responder.recieve(file);\n\t            if (ret > 0) {\n\t                return true;\n\t            }\n\t            if (ret < 0) {\n\t                total -= 1;\n\t            }\n\t            return false;\n\t        }) || total > 0;\n\t    });\n\t\n\t    var start = function start(e) {\n\t        started = 1;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.start(e);\n\t        });\n\t    };\n\t\n\t    var move = function move(e) {\n\t        var has = Collectors.filter(function (responder) {\n\t            return responder.response(e);\n\t        }).length > 0;\n\t\n\t        var dataTransfer = (e.originalEvent || e).dataTransfer;\n\t\n\t        if (dataTransfer) {\n\t            dataTransfer.dropEffect = has ? 'copy' : 'none';\n\t        }\n\t        e.preventDefault();\n\t    };\n\t\n\t    var end = function end(e) {\n\t        started = 0;\n\t        enter = 0;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.end(e);\n\t        });\n\t    };\n\t\n\t    var drag = function drag(e) {\n\t        clearTimeout(endTimer);\n\t        var isLeave = e.type === 'dragleave';\n\t        if (!isLeave && !started) {\n\t            start(e);\n\t        }\n\t        move(e);\n\t        if (isLeave) {\n\t            endTimer = setTimeout(function () {\n\t                return end(e);\n\t            }, 100);\n\t        }\n\t    };\n\t    var drop = function drop(e) {\n\t        e.preventDefault();\n\t\n\t        clearTimeout(endTimer);\n\t        end(e);\n\t\n\t        var responders = Collectors.filter(function (responder) {\n\t            return responder.contains(e.target);\n\t        });\n\t\n\t        if (responders.length < 1) {\n\t            return;\n\t        }\n\t\n\t        var dataTransfer = (e.originalEvent || e).dataTransfer;\n\t\n\t        try {\n\t            if (dataTransfer.getData('text/html')) {\n\t                return;\n\t            }\n\t        } catch (ex) {}\n\t\n\t        dataTransferReader(dataTransfer, responders);\n\t    };\n\t\n\t    $doc.on('dragenter dragover dragleave', drag);\n\t    $doc.on('drop', drop);\n\t}\n\t\n\tvar DndCollector = (function () {\n\t    function DndCollector(context) {\n\t        _classCallCheck(this, DndCollector);\n\t\n\t        if (Collectors.length < 1) {\n\t            prepare();\n\t        }\n\t        Collectors.push(this);\n\t\n\t        this.context = context;\n\t        this.areas = [];\n\t    }\n\t\n\t    _createClass(DndCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            var _this = this;\n\t\n\t            area = new Area(area);\n\t            this.areas.push(area);\n\t            area.destroy = function () {\n\t                area.removeAllListeners();\n\t                var i = _this.areas.indexOf(area);\n\t                if (i > -1) {\n\t                    _this.areas.splice(i, 1);\n\t                }\n\t            };\n\t\n\t            return area;\n\t        }\n\t    }, {\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areas.some(function (area) {\n\t                return area.contains(target);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.start(e);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e) {\n\t            return this.areas.map(function (area) {\n\t                return area.response(e);\n\t            }).some(function (r) {\n\t                return r !== false;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'recieve',\n\t        value: function recieve(file) {\n\t            var ret = this.context.add(file);\n\t            if (ret > 0 && !this.context.isMultiple()) {\n\t                return -1;\n\t            } else {\n\t                return ret;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.end(e);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return DndCollector;\n\t})();\n\t\n\texports['default'] = DndCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar _runtime = __webpack_require__(11);\n\t\n\tvar _runtime2 = _interopRequireDefault(_runtime);\n\t\n\tvar _transport = __webpack_require__(12);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tvar instance = undefined;\n\t\n\tvar Html5Runtime = (function (_Runtime) {\n\t    _inherits(Html5Runtime, _Runtime);\n\t\n\t    function Html5Runtime() {\n\t        _classCallCheck(this, Html5Runtime);\n\t\n\t        _get(Object.getPrototypeOf(Html5Runtime.prototype), 'constructor', this).apply(this, arguments);\n\t    }\n\t\n\t    _createClass(Html5Runtime, [{\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(blob, timeout) {\n\t            var i = (0, _jquery.Deferred)(),\n\t                fr = new FileReader(),\n\t                timer = undefined;\n\t\n\t            fr.onloadend = function () {\n\t                if (fr.readyState == FileReader.DONE) {\n\t                    i.resolve(fr.result);\n\t                } else {\n\t                    i.reject();\n\t                }\n\t                clearTimeout(timer);\n\t                fr.onloadend = null;\n\t            };\n\t            fr.readAsDataURL(blob);\n\t\n\t            var abort = function abort() {\n\t                fr && fr.abort();\n\t                fr = null;\n\t            };\n\t            if (timeout) {\n\t                timer = setTimeout(abort, timeout);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            if (!this.transport) {\n\t                this.transport = new _transport2['default'](this);\n\t            }\n\t            return this.transport;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob, start, end) {\n\t            var blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\t\n\t            return blobSlice.call(blob, start, end);\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = (0, _jquery.Deferred)();\n\t\n\t            if (!window.SparkMD5) {\n\t                i.reject();\n\t                return i.promise();\n\t            }\n\t\n\t            var chunkSize = 2 * 1024 * 1024,\n\t                chunks = Math.ceil(blob.size / chunkSize),\n\t                chunk = 0,\n\t                spark = new SparkMD5.ArrayBuffer(),\n\t                blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\t\n\t            var fr = new FileReader();\n\t\n\t            var _loadNext = function loadNext() {\n\t                if (!fr) return;\n\t                var start = undefined,\n\t                    end = undefined;\n\t\n\t                start = chunk * chunkSize;\n\t                end = Math.min(start + chunkSize, blob.size);\n\t\n\t                fr.onload = function () {\n\t                    spark && spark.append(fr.result);\n\t                };\n\t\n\t                fr.onloadend = function () {\n\t                    if (!fr) return;\n\t                    if (fr.readyState == FileReader.DONE) {\n\t                        if (++chunk < chunks) {\n\t                            setTimeout(_loadNext, 1);\n\t                        } else {\n\t                            setTimeout(function () {\n\t                                spark && i.resolve(spark.end());\n\t                                _loadNext = blob = spark = null;\n\t                            }, 50);\n\t                        }\n\t                    } else {\n\t                        i.reject();\n\t                    }\n\t                    fr.onloadend = fr.onload = null;\n\t                };\n\t\n\t                fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n\t            };\n\t\n\t            _loadNext();\n\t\n\t            var ret = i.promise();\n\t            ret.abort = function () {\n\t                fr && fr.abort();\n\t                spark = null;\n\t                fr = null;\n\t            };\n\t\n\t            return ret;\n\t        }\n\t    }], [{\n\t        key: 'getInstance',\n\t        value: function getInstance() {\n\t            if (!instance) {\n\t                instance = new Html5Runtime();\n\t            }\n\t            return instance;\n\t        }\n\t    }]);\n\t\n\t    return Html5Runtime;\n\t})(_runtime2['default']);\n\t\n\texports['default'] = Html5Runtime;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar Runtime = (function (_Emitter) {\n\t    _inherits(Runtime, _Emitter);\n\t\n\t    function Runtime() {\n\t        _classCallCheck(this, Runtime);\n\t\n\t        _get(Object.getPrototypeOf(Runtime.prototype), 'constructor', this).apply(this, arguments);\n\t    }\n\t\n\t    _createClass(Runtime, [{\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = (0, _jquery.Deferred)();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(file, timeout) {\n\t            var i = (0, _jquery.Deferred)();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            return null;\n\t        }\n\t    }, {\n\t        key: 'getUploading',\n\t        value: function getUploading() {\n\t            if (!this.uploading) {\n\t                this.uploading = new Uploading(this);\n\t            }\n\t            return this.uploading;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob) {\n\t            throw new Error('this runtime current not support slice');\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {}\n\t    }]);\n\t\n\t    return Runtime;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = Runtime;\n\t\n\tvar Uploading = (function () {\n\t    function Uploading(runtime) {\n\t        _classCallCheck(this, Uploading);\n\t\n\t        this.runtime = runtime;\n\t    }\n\t\n\t    /**\n\t     * @param {FileRequest} request\n\t     * @returns {*}\n\t     */\n\t\n\t    _createClass(Uploading, [{\n\t        key: 'generate',\n\t        value: function generate(request) {\n\t            var _this = this;\n\t\n\t            var i = (0, _jquery.Deferred)(),\n\t                file = request.getFile(),\n\t                runtime = this.runtime;\n\t\n\t            var source = file.getSource(),\n\t                size = file.size,\n\t                chunkSize = request.getChunkSize(),\n\t                useChunk = request.isChunkEnable(),\n\t                threads = request.getChunkProcessThreads(),\n\t                start = 0,\n\t                end = 0,\n\t                slots = [];\n\t\n\t            var getActives = function getActives() {\n\t                return slots.reduce(function (sum, slot) {\n\t                    return sum + (slot.state() === 'pending' ? 1 : 0);\n\t                }, 0);\n\t            };\n\t\n\t            var readChunk = function readChunk() {\n\t                var slot = undefined,\n\t                    req = undefined,\n\t                    blob = undefined;\n\t                while (end < size && getActives() < threads) {\n\t                    start = end;\n\t                    end = Math.min(end + chunkSize, size);\n\t                    blob = runtime.slice(source, start, end);\n\t                    req = request.createChunkRequest(slots.length, blob);\n\t                    slot = _this.slot(req, request.getChunkRetries());\n\t                    slot.progress(progress).done(done).fail(fail);\n\t                    slots.push(slot);\n\t                }\n\t            };\n\t\n\t            var progress = function progress() {\n\t                var total = size - end,\n\t                    loaded = 0;\n\t                slots.forEach(function (slot) {\n\t                    total += slot.total;\n\t                    loaded += slot.loaded;\n\t                });\n\t                i.notify({ total: total, loaded: loaded });\n\t            };\n\t\n\t            var done = function done(res) {\n\t                useChunk && readChunk();\n\t\n\t                if (end >= size && slots.every(function (slot) {\n\t                    return slot.state() === 'resolved';\n\t                })) {\n\t                    i.resolve(res);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                slots.forEach(function (slot) {\n\t                    return slot.abort();\n\t                });\n\t            };\n\t\n\t            var fail = function fail(error) {\n\t                i.reject(error);\n\t                abort();\n\t            };\n\t\n\t            if (useChunk) {\n\t                readChunk();\n\t            } else {\n\t                end = size;\n\t                var slot = this.slot(request.createChunkRequest(0, source), 0);\n\t                slot.progress(progress).done(done).fail(fail);\n\t                slots.push(slot);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'slot',\n\t        value: function slot(request, retries) {\n\t            var i = (0, _jquery.Deferred)(),\n\t                runtime = this.runtime,\n\t                context = request.getFile().getContext();\n\t\n\t            var slot = i.promise();\n\t\n\t            var progress = function progress(e) {\n\t                if (e.total) {\n\t                    slot.total = e.total;\n\t                }\n\t                if (e.loaded) {\n\t                    slot.loaded = e.loaded;\n\t                }\n\t                i.notify(e);\n\t            };\n\t\n\t            var process = function process() {\n\t                var prepare, transport, completion;\n\t                slot.abort = function () {\n\t                    prepare && prepare.abort();\n\t                    transport && transport.abort();\n\t                    completion && completion.abort();\n\t                };\n\t                slot.total = request.getBlob().size;\n\t                slot.loaded = 0;\n\t\n\t                prepare = context.invoke(_events2['default'].CHUNK_UPLOAD_PREPARING, request);\n\t\n\t                prepare.then(function (request) {\n\t                    transport = runtime.getTransport().generate(request);\n\t                    transport.progress(progress);\n\t                    return transport;\n\t                }).then(function (response) {\n\t                    completion = context.invoke(_events2['default'].CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n\t                    return completion;\n\t                }).done(i.resolve).fail(error);\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e instanceof _errors.NetworkError && retries-- > 0) {\n\t                    // retry\n\t                    setTimeout(process, 500);\n\t                } else {\n\t                    i.reject(e);\n\t                }\n\t                slot.abort();\n\t            };\n\t\n\t            process();\n\t\n\t            return slot;\n\t        }\n\t    }]);\n\t\n\t    return Uploading;\n\t})();\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar Html5Transport = (function () {\n\t    function Html5Transport() {\n\t        _classCallCheck(this, Html5Transport);\n\t    }\n\t\n\t    _createClass(Html5Transport, [{\n\t        key: 'generate',\n\t\n\t        /**\n\t         * @param {ChunkRequest} request\n\t         * @returns {*}\n\t         */\n\t        value: function generate(request) {\n\t            var i = (0, _jquery.Deferred)();\n\t\n\t            var timeoutTimer = undefined,\n\t                withCredentials = false;\n\t            var xhr = new XMLHttpRequest();\n\t\n\t            if (request.isWithCredentials && !('withCredentials' in xhr) && 'XDomainRequest' in window) {\n\t                xhr = new XDomainRequest();\n\t                withCredentials = true;\n\t            }\n\t\n\t            var clean = function clean() {\n\t                xhr.onload = xhr.onerror = null;\n\t                if (xhr.upload) {\n\t                    xhr.upload.onprogress = null;\n\t                }\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                clean();\n\t                try {\n\t                    xhr.abort();\n\t                } catch (e) {}\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                clean();\n\t                if (!xhr.status && e.type === 'error') {\n\t                    return i.reject(new _errors.AbortError(e.message));\n\t                }\n\t                if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n\t                    return i.resolve(xhr.responseText);\n\t                }\n\t                return i.reject(new _errors.NetworkError(xhr.status, xhr.statusText));\n\t            };\n\t\n\t            if (xhr.upload) {\n\t                xhr.upload.onprogress = function (e) {\n\t                    return i.notify(e);\n\t                };\n\t            }\n\t            xhr.onerror = complete;\n\t            xhr.onload = complete;\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new _errors.TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                (function () {\n\t                    if (withCredentials) {\n\t                        xhr.open('POST', request.getUrl(), true);\n\t                        xhr.withCredentials = true;\n\t                    } else {\n\t                        xhr.open('POST', request.getUrl());\n\t                    }\n\t\n\t                    request.getHeaders().forEach(function (header) {\n\t                        return xhr.setRequestHeader(header.name, header.value);\n\t                    });\n\t\n\t                    var formData = new FormData(),\n\t                        blob = request.getBlob();\n\t\n\t                    request.getParams().toArray().forEach(function (param) {\n\t                        return formData.append(param.name, param.value);\n\t                    });\n\t\n\t                    formData.append(request.getName(), blob, blob.name || 'blob');\n\t\n\t                    xhr.send(formData);\n\t                })();\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return Html5Transport;\n\t})();\n\t\n\texports['default'] = Html5Transport;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(4);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _status = __webpack_require__(5);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar uid = 0;\n\tfunction guid() {\n\t    return 'FILE-' + (uid++).toString(16).toUpperCase();\n\t}\n\t\n\tvar RE_EXT = /\\.([^.]+)$/,\n\t    RE_IMAGE = /\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\n\tfunction guessExt(blob) {\n\t    var m = blob.name && RE_EXT.exec(blob.name);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    m = blob.type && RE_IMAGE.exec(blob.type);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    return '';\n\t}\n\t\n\tfunction guessType(ext) {\n\t    if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'].indexOf(ext.toLowerCase())) {\n\t        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n\t    }\n\t    return null;\n\t}\n\t\n\tvar Progress = (function () {\n\t    function Progress(total, loaded) {\n\t        _classCallCheck(this, Progress);\n\t\n\t        this.change(total, loaded);\n\t    }\n\t\n\t    _createClass(Progress, [{\n\t        key: 'change',\n\t        value: function change(total, loaded) {\n\t            this.total = total;\n\t            this.loaded = loaded || 0;\n\t            this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100);\n\t        }\n\t    }, {\n\t        key: 'done',\n\t        value: function done() {\n\t            this.change(this.total, this.total);\n\t        }\n\t    }]);\n\t\n\t    return Progress;\n\t})();\n\t\n\texports['default'] = Progress;\n\t\n\tvar File = (function (_Emitter) {\n\t    _inherits(File, _Emitter);\n\t\n\t    function File(runtime, source, filename) {\n\t        _classCallCheck(this, File);\n\t\n\t        _get(Object.getPrototypeOf(File.prototype), 'constructor', this).call(this);\n\t\n\t        this.id = guid();\n\t\n\t        this.name = source.name || filename || this.id;\n\t\n\t        var ext = guessExt(source).toLowerCase();\n\t\n\t        if (ext && !RE_EXT.test(this.name)) {\n\t            this.name += '.' + ext;\n\t        }\n\t\n\t        this.ext = ext;\n\t\n\t        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\t\n\t        this.lastModified = source.lastModified || +new Date();\n\t\n\t        this.size = source.size || 0;\n\t\n\t        this.runtime = runtime;\n\t\n\t        this.source = source;\n\t\n\t        this.status = _status2['default'].INITED;\n\t\n\t        this.progress = new Progress(this.size, 0);\n\t    }\n\t\n\t    _createClass(File, [{\n\t        key: 'getContext',\n\t        value: function getContext() {\n\t            return this.context;\n\t        }\n\t    }, {\n\t        key: 'setContext',\n\t        value: function setContext(context) {\n\t            this.context = context;\n\t            this.setPropagationTarget(context);\n\t        }\n\t    }, {\n\t        key: 'getRuntime',\n\t        value: function getRuntime() {\n\t            return this.runtime;\n\t        }\n\t    }, {\n\t        key: 'isImage',\n\t        value: function isImage() {\n\t            return RE_IMAGE.test(this.type);\n\t        }\n\t    }, {\n\t        key: 'setStatus',\n\t        value: function setStatus(status) {\n\t            var prevStatus = this.status;\n\t\n\t            if (prevStatus !== _status2['default'].CANCELLED && status !== prevStatus) {\n\t                this.status = status;\n\t                this.emit(_events2['default'].FILE_STATUS_CHANGE, status, prevStatus);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getStatus',\n\t        value: function getStatus() {\n\t            return this.status;\n\t        }\n\t    }, {\n\t        key: 'getStatusName',\n\t        value: function getStatusName() {\n\t            if (this.status in _status.StatusName) {\n\t                return _status.StatusName[this.status];\n\t            } else {\n\t                return 'unknow';\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getSource',\n\t        value: function getSource() {\n\t            return this.source;\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(timeout) {\n\t            if (!this._dataUrlPromise) {\n\t                this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n\t            }\n\t            return this._dataUrlPromise;\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5() {\n\t            if (!this._md5Promise) {\n\t                this._md5Promise = this.runtime.md5(this.source);\n\t            }\n\t            return this._md5Promise;\n\t        }\n\t    }, {\n\t        key: 'session',\n\t        value: function session() {\n\t            var _this = this;\n\t\n\t            if (this._sessionPromise) {\n\t                return this._sessionPromise;\n\t            }\n\t\n\t            var session = (0, _jquery.Deferred)();\n\t\n\t            session.progress(function (progress) {\n\t                _this.setStatus(_status2['default'].PROGRESS);\n\t                _this.emit(_events2['default'].FILE_UPLOAD_PROGRESS, progress);\n\t            }).done(function (response) {\n\t                _this.response = response;\n\t                _this._session = null;\n\t                _this._sessionPromise = null;\n\t                _this._flows = [];\n\t                _this.setStatus(_status2['default'].SUCCESS);\n\t                _this.emit(_events2['default'].FILE_UPLOAD_SUCCESS, response);\n\t            }).fail(function (error) {\n\t                _this._session = null;\n\t                _this._sessionPromise = null;\n\t                var flow = undefined;\n\t                while (flow = _this._flows.shift()) {\n\t                    flow.abort();\n\t                }\n\t\n\t                if (error instanceof Error) {\n\t                    _this.setStatus(_status2['default'].ERROR);\n\t                    _this.emit(_events2['default'].FILE_UPLOAD_ERROR, error);\n\t                }\n\t            }).always(function () {\n\t                _this.emit(_events2['default'].FILE_UPLOAD_COMPLETED, _this.getStatus());\n\t            });\n\t\n\t            this._flows = [];\n\t            this._session = session;\n\t            this._sessionPromise = session.promise();\n\t\n\t            return this._sessionPromise;\n\t        }\n\t    }, {\n\t        key: 'prepare',\n\t        value: function prepare() {\n\t            var _this2 = this;\n\t\n\t            if (this.status !== _status2['default'].PENDING || !this.context) {\n\t                return false;\n\t            }\n\t\n\t            this.session();\n\t            this.setStatus(_status2['default'].PROGRESS);\n\t\n\t            this.emit(_events2['default'].FILE_UPLOAD_START);\n\t\n\t            this.request = this.context.createFileRequest(this);\n\t\n\t            var prepare = this.context.invoke(_events2['default'].FILE_UPLOAD_PREPARING, this.request);\n\t\n\t            this._flows.push(prepare);\n\t\n\t            prepare.then(function (request) {\n\t                _this2.emit(_events2['default'].FILE_UPLOAD_PREPARED, request);\n\t\n\t                var upload = _this2.runtime.getUploading().generate(request);\n\t\n\t                _this2._flows.push(upload);\n\t\n\t                upload.progress(function (e) {\n\t                    _this2.progress.change(e.total, e.loaded);\n\t                    _this2._session.notify(_this2.progress);\n\t                });\n\t\n\t                return upload;\n\t            }).then(function (response) {\n\t                return _this2.complete(response);\n\t            }, this._session.reject);\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'complete',\n\t        value: function complete(response) {\n\t            if (this.status !== _status2['default'].PROGRESS) return;\n\t\n\t            var flow = undefined;\n\t            while (flow = this._flows.shift()) {\n\t                flow.abort();\n\t            }\n\t\n\t            this.progress.done();\n\t            this._session.notify(this.progress);\n\t\n\t            response = this.request.createFileResponse(response);\n\t\n\t            this.setStatus(_status2['default'].END);\n\t            this.emit(_events2['default'].FILE_UPLOAD_END);\n\t\n\t            var complete = this.context.invoke(_events2['default'].FILE_UPLOAD_COMPLETING, response);\n\t\n\t            this._flows.push(complete);\n\t\n\t            complete.then(this._session.resolve, this._session.reject);\n\t        }\n\t    }, {\n\t        key: 'pending',\n\t        value: function pending() {\n\t            if (this.status === _status2['default'].ERROR || this.status === _status2['default'].QUEUED) {\n\t                this.progress.change(this.size, 0);\n\t                this.setStatus(_status2['default'].PENDING);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort() {\n\t            this._session && this._session.reject();\n\t            this._session = null;\n\t            this._sessionPromise = null;\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel() {\n\t            this.setStatus(_status2['default'].CANCELLED);\n\t            this.emit(_events2['default'].FILE_CANCEL);\n\t            this.abort();\n\t            this.runtime.cancel(this.source);\n\t            this._dataUrlPromise && this._dataUrlPromise.abort();\n\t            this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n\t            this.removeAllListeners();\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this.cancel();\n\t        }\n\t    }]);\n\t\n\t    return File;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = File;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(10);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _file = __webpack_require__(13);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar PasteCollector = (function () {\n\t    function PasteCollector(context) {\n\t        _classCallCheck(this, PasteCollector);\n\t\n\t        this.context = context;\n\t        this.runtime = _html5Runtime2['default'].getInstance();\n\t    }\n\t\n\t    _createClass(PasteCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            area = area.on ? area : (0, _jquery2['default'])(area);\n\t\n\t            var context = this.context,\n\t                runtime = this.runtime,\n\t                emitter = new _emitter2['default']();\n\t\n\t            var paste = function paste(e) {\n\t                if (e.isDefaultPrevented()) {\n\t                    return;\n\t                }\n\t\n\t                var clipboardData = (e.originalEvent || e).clipboardData || window.clipboardData,\n\t                    items = clipboardData.items,\n\t                    files = clipboardData.files;\n\t\n\t                if (!files && !items) {\n\t                    return;\n\t                }\n\t\n\t                var prevent = undefined,\n\t                    i = undefined,\n\t                    l = undefined,\n\t                    file = undefined,\n\t                    item = undefined,\n\t                    addRet = undefined;\n\t\n\t                if (files && files.length) {\n\t                    // safari has files\n\t                    prevent = files.length > 0;\n\t                    for (i = 0, l = files.length; i < l; i++) {\n\t                        file = new _file2['default'](runtime, files[i]);\n\t\n\t                        prevent = 1;\n\t\n\t                        addRet = context.add(file);\n\t                        if (addRet < 0 || addRet > 0 && !context.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                } else if (items && items.length) {\n\t                    // chrome has items\n\t                    var filename = clipboardData.getData('text/plain');\n\t                    for (i = 0, l = items.length; i < l && !context.isLimit(); i++) {\n\t                        item = items[i];\n\t\n\t                        if (item.kind !== 'file' || !(file = item.getAsFile())) {\n\t                            continue;\n\t                        }\n\t\n\t                        file = new _file2['default'](runtime, file, filename);\n\t                        filename = null;\n\t\n\t                        prevent = 1;\n\t\n\t                        addRet = context.add(file);\n\t                        if (addRet < 0 || addRet > 0 && !context.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                if (prevent) {\n\t                    e.preventDefault();\n\t                    e.stopPropagation();\n\t                    emitter.emit('paste', clipboardData);\n\t                }\n\t            };\n\t\n\t            if ('DataTransfer' in window && 'FileList' in window) {\n\t                area.on('paste', paste);\n\t            }\n\t\n\t            emitter.destroy = function () {\n\t                emitter.removeAllListeners();\n\t                area.off('paste', paste);\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return PasteCollector;\n\t})();\n\t\n\texports['default'] = PasteCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _emitter = __webpack_require__(2);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(10);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _flashRuntime = __webpack_require__(16);\n\t\n\tvar _flashRuntime2 = _interopRequireDefault(_flashRuntime);\n\t\n\tvar _file = __webpack_require__(13);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar SWF_URL = '';\n\t\n\tvar FlashTriggerCollection = (function () {\n\t    function FlashTriggerCollection(context, onFiles) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, FlashTriggerCollection);\n\t\n\t        var overlay = (0, _jquery2['default'])('<label></label>');\n\t        overlay.css({\n\t            position: 'fixed',\n\t            opacity: 0,\n\t            left: -100,\n\t            top: -100,\n\t            width: 50,\n\t            height: 50,\n\t            display: 'block',\n\t            cursor: 'pointer',\n\t            background: 'black',\n\t            overflow: 'hidden',\n\t            zIndex: 99999\n\t        });\n\t        var runtime = new _flashRuntime2['default'](overlay, SWF_URL, function () {\n\t            return {\n\t                accept: context.getAccept(),\n\t                multiple: context.isMultiple()\n\t            };\n\t        });\n\t\n\t        runtime.on('select', function (e) {\n\t            onFiles(e.files, runtime);\n\t            _this.current && _this.current.emit('files', e.files, runtime);\n\t        });\n\t\n\t        runtime.on('rollOut', function () {\n\t            return _this.hideOverlay();\n\t        });\n\t        this.overlay = overlay.appendTo(document.body);\n\t    }\n\t\n\t    _createClass(FlashTriggerCollection, [{\n\t        key: 'hideOverlay',\n\t        value: function hideOverlay() {\n\t            this.overlay.css({\n\t                left: -100,\n\t                top: -100,\n\t                width: 50,\n\t                height: 50\n\t            });\n\t            if (this.current) {\n\t                this.current.emit('rollOut');\n\t                this.current = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            var _this2 = this;\n\t\n\t            var overlay = this.overlay,\n\t                emitter = new _emitter2['default']();\n\t            trigger = trigger.on ? trigger : (0, _jquery2['default'])(trigger);\n\t            trigger.on('mouseover.flashpicker', function (e) {\n\t                var rect = e.currentTarget.getBoundingClientRect();\n\t                overlay.css({\n\t                    left: rect.left,\n\t                    top: rect.top,\n\t                    width: rect.right - rect.left,\n\t                    height: rect.bottom - rect.top\n\t                });\n\t                emitter.emit('rollOver');\n\t                if (_this2.current && _this2.current !== emitter) {\n\t                    _this2.current.emit('rollOut');\n\t                }\n\t                _this2.current = emitter;\n\t            });\n\t\n\t            emitter.destroy = function () {\n\t                if (_this2.current === emitter) {\n\t                    _this2.hideOverlay();\n\t                }\n\t                emitter.removeAllListeners();\n\t                trigger.off('mouseover.flashpicker');\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return FlashTriggerCollection;\n\t})();\n\t\n\tvar Html5TriggerCollection = (function () {\n\t    function Html5TriggerCollection(context, onFiles) {\n\t        var _this3 = this;\n\t\n\t        _classCallCheck(this, Html5TriggerCollection);\n\t\n\t        var runtime = _html5Runtime2['default'].getInstance();\n\t\n\t        this._createInput = function (label) {\n\t            var input = (0, _jquery2['default'])(document.createElement('input'));\n\t\n\t            input.attr('type', 'file');\n\t            input.css({\n\t                position: 'absolute',\n\t                clip: 'rect(1px 1px 1px 1px)'\n\t            });\n\t\n\t            var accept = context.getAccept();\n\t            if (accept && accept.length > 0) {\n\t                accept = accept.map(function (item) {\n\t                    return item.mimeTypes || '.' + item.extensions.join(',.');\n\t                });\n\t\n\t                input.attr('accept', accept.join(','));\n\t            }\n\t            if (context.isMultiple()) {\n\t                input.attr('multiple', 'multiple');\n\t            }\n\t\n\t            input.on('change', function (e) {\n\t                onFiles(e.target.files, runtime);\n\t                input.remove();\n\t                _this3._createInput(label);\n\t            });\n\t            label.html(input);\n\t        };\n\t    }\n\t\n\t    _createClass(Html5TriggerCollection, [{\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            var label = (0, _jquery2['default'])('<label></label>'),\n\t                emitter = new _emitter2['default']();\n\t            label.css({\n\t                position: 'absolute',\n\t                opacity: 0,\n\t                top: 0, left: 0,\n\t                width: '100%',\n\t                height: '100%',\n\t                display: 'inline-block',\n\t                cursor: 'pointer',\n\t                background: '#fff',\n\t                overflow: 'hidden'\n\t            });\n\t            this._createInput(label);\n\t            trigger = trigger.append ? trigger : (0, _jquery2['default'])(trigger);\n\t            trigger.append(label);\n\t\n\t            emitter.destroy = function () {\n\t                emitter.removeAllListeners();\n\t                label.remove();\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return Html5TriggerCollection;\n\t})();\n\t\n\tvar PickerCollector = (function () {\n\t    _createClass(PickerCollector, null, [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            SWF_URL = url;\n\t        }\n\t    }]);\n\t\n\t    function PickerCollector(context) {\n\t        _classCallCheck(this, PickerCollector);\n\t\n\t        var onFiles = function onFiles(files, runtime) {\n\t            for (var i = 0, l = files.length; i < l; i++) {\n\t                if (context.add(new _file2['default'](runtime, files[i])) < 0) {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t\n\t        if ('DataTransfer' in window && 'FileList' in window) {\n\t            this.triggerCollection = new Html5TriggerCollection(context, onFiles);\n\t        } else {\n\t            this.triggerCollection = new FlashTriggerCollection(context, onFiles);\n\t        }\n\t    }\n\t\n\t    _createClass(PickerCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            return this.triggerCollection.add(area);\n\t        }\n\t    }]);\n\t\n\t    return PickerCollector;\n\t})();\n\t\n\texports['default'] = PickerCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _runtime = __webpack_require__(11);\n\t\n\tvar _runtime2 = _interopRequireDefault(_runtime);\n\t\n\tvar _transport = __webpack_require__(17);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tfunction getFlashVersion() {\n\t    var version = undefined;\n\t\n\t    try {\n\t        version = navigator.plugins['Shockwave Flash'];\n\t        version = version.description;\n\t    } catch (e1) {\n\t        try {\n\t            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t        } catch (e2) {\n\t            version = '0.0';\n\t        }\n\t    }\n\t    version = version.match(/\\d+/g);\n\t    return parseFloat(version[0] + '.' + version[1]);\n\t}\n\t\n\tfunction callFlash(movie, functionName, argumentArray) {\n\t    try {\n\t        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n\t    } catch (ex) {\n\t        throw \"Call to \" + functionName + \" failed\";\n\t    }\n\t}\n\t\n\tfunction createFlash(swf, callInterface) {\n\t    if (getFlashVersion() < 11.4) {\n\t        throw 'flash player is not available';\n\t    }\n\t    var div = document.createElement('div');\n\t    var url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n\t    var attrs = ['id=\"' + callInterface + '-Picker\"', 'type=\"application/x-shockwave-flash\"', 'data=\"' + url + '\"', 'width=\"100%\" height=\"100%\"', 'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'];\n\t    if (window.ActiveXObject) {\n\t        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n\t    }\n\t    div.innerHTML = '<object ' + attrs.join(' ') + '>' + '<param name=\"movie\" value=\"' + url + '\" />' + '<param name=\"wmode\" value=\"transparent\" />' + '<param name=\"allowscriptaccess\" value=\"always\" />' + '</object>';\n\t\n\t    return div.firstChild;\n\t}\n\t\n\tvar _guid = +new Date();\n\tfunction guid(_x4) {\n\t    var _again2 = true;\n\t\n\t    _function2: while (_again2) {\n\t        var prefix = _x4;\n\t        ret = undefined;\n\t        _again2 = false;\n\t\n\t        var ret = prefix + (_guid++).toString(16);\n\t        if (ret in window) {\n\t            _x4 = prefix;\n\t            _again2 = true;\n\t            continue _function2;\n\t        }\n\t        return ret;\n\t    }\n\t}\n\t\n\tvar FlashRuntime = (function (_Runtime) {\n\t    _inherits(FlashRuntime, _Runtime);\n\t\n\t    function FlashRuntime(trigger, swf, options) {\n\t        _classCallCheck(this, FlashRuntime);\n\t\n\t        _get(Object.getPrototypeOf(FlashRuntime.prototype), 'constructor', this).call(this);\n\t\n\t        var callInterface = guid('FlashRuntime');\n\t\n\t        this.callInterface = callInterface;\n\t        window[callInterface] = this;\n\t\n\t        this.options = options;\n\t\n\t        var _this = this;\n\t        function display() {\n\t            var w = trigger[0].offsetWidth,\n\t                h = trigger[0].offsetHeight,\n\t                flash = undefined;\n\t            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n\t                setTimeout(display, 1000);\n\t                return;\n\t            }\n\t\n\t            trigger.append(_this.flash = flash);\n\t        }\n\t\n\t        display();\n\t    }\n\t\n\t    _createClass(FlashRuntime, [{\n\t        key: 'getOptions',\n\t        value: function getOptions() {\n\t            var options = this.options;\n\t            if (typeof options === 'function') {\n\t                options = options();\n\t            }\n\t            return options;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport(name, blob, options) {\n\t            return new _transport2['default'](this, name, blob, options);\n\t        }\n\t    }, {\n\t        key: 'send',\n\t        value: function send(name, blob, url, params) {\n\t            callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort(blob) {\n\t            try {\n\t                callFlash(this.flash, 'exec', ['abort', blob.id]);\n\t            } catch (e) {}\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {\n\t            callFlash(this.flash, 'exec', ['cancel', blob.id]);\n\t        }\n\t    }, {\n\t        key: 'ping',\n\t        value: function ping() {\n\t            callFlash(this.flash, 'exec', ['pang']);\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            delete window[this.callInterface];\n\t        }\n\t    }]);\n\t\n\t    return FlashRuntime;\n\t})(_runtime2['default']);\n\t\n\texports['default'] = FlashRuntime;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _jquery = __webpack_require__(3);\n\t\n\tvar FlashTransport = (function () {\n\t    function FlashTransport(flashRuntime) {\n\t        _classCallCheck(this, FlashTransport);\n\t\n\t        this.flashRuntime = flashRuntime;\n\t    }\n\t\n\t    /**\n\t     * @param {ChunkRequest} request\n\t     * @returns {*}\n\t     */\n\t\n\t    _createClass(FlashTransport, [{\n\t        key: 'generate',\n\t        value: function generate(request) {\n\t            var i = (0, _jquery.Deferred)(),\n\t                flashRuntime = this.flashRuntime,\n\t                blob = request.getBlob();\n\t\n\t            var timeoutTimer = undefined;\n\t\n\t            var clean = function clean() {\n\t                flashRuntime.off('uploadprogress', progress);\n\t                flashRuntime.off('uploadcomplete', complete);\n\t                flashRuntime.off('uploaderror', error);\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t            var abort = function abort() {\n\t                clean();\n\t                flashRuntime.abort(blob.id);\n\t            };\n\t\n\t            var progress = function progress(e) {\n\t                if (e.id !== blob.id) return;\n\t                i.notify(e);\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                if (e.status === 304 || e.status >= 200 && e.status < 300) {\n\t                    flashRuntime.cancel(blob);\n\t                    return i.resolve(e.response);\n\t                }\n\t                return i.reject(new _errors.NetworkError(e.status, e.response));\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            };\n\t            flashRuntime.on('uploadprogress', progress);\n\t            flashRuntime.on('uploadcomplete', complete);\n\t            flashRuntime.on('uploaderror', error);\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new _errors.TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return FlashTransport;\n\t})();\n\t\n\texports['default'] = FlashTransport;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** uploader.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3eb190160c1bf7091bd0\n **/","import Uploader from './src/context';\nimport Events from './src/events';\nimport Status from './src/status';\n\nexport default Uploader;\nexport {Uploader, Events, Status};\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport Status from './status';\nimport {QueueLimitError, FilterError, DuplicateError, FileExtensionError, FileSizeError} from './errors';\nimport {formatSize, parseSize, normalizeAccept} from './util';\nimport FileRequest from './filerequest';\nimport DndCollector from './collector/dnd';\nimport PasteCollector from './collector/paste';\nimport PickerCollector from './collector/picker';\n\nexport default class Context extends Emitter {\n\n    constructor(options) {\n        super();\n\n        let {processThreads, autoPending, queueCapcity, accept, sizeLimit, preventDuplicate, multiple} = options;\n\n        this.stat = new Stat;\n        this.constraints = new Constraints;\n        this.filters = new Filters;\n        this.accept = normalizeAccept(accept);\n        this.autoPending = autoPending;\n        this.multiple = multiple == null ? true : multiple;\n        this.pending = new Pending(processThreads);\n\n        if (queueCapcity && queueCapcity > 0) {\n            this.addConstraint(() => this.stat.getTotal() >= queueCapcity);\n        }\n\n        if (this.accept && this.accept.length > 0) {\n            this.addFilter((file) => {\n                if (!this.accept.some((item) => {\n                    return item.extensions && item.extensions.indexOf(file.ext) > -1\n                }))\n                {\n                    return new FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n                }\n            });\n        }\n\n        if (sizeLimit && (sizeLimit = parseSize(sizeLimit)) > 0) {\n            this.addFilter((file) => {\n                if (file.size > sizeLimit) {\n                    return new FileSizeError(file, 'filesize:' + formatSize(file.size) + ' is greater than limit:' + formatSize(sizeLimit));\n                }\n            });\n        }\n\n        if (preventDuplicate) {\n            this.addFilter((file) => {\n                if (this.stat.getFiles().some((item) => item.name === file.name && item.size === file.size)) {\n                    return new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n                }\n            });\n        }\n\n        this.requestOptions = options.request || {};\n    }\n\n    createFileRequest(file) {\n        return new FileRequest(file, this.requestOptions);\n    }\n\n    isLimit() {\n        return this.constraints.some();\n    }\n\n    addConstraint(constraint) {\n        return this.constraints.add(constraint);\n    }\n\n    addFilter(filter) {\n        return this.filters.add(filter);\n    }\n\n    add(file) {\n        if (this.isLimit()) {\n            this.emit(Events.QUEUE_ERROR, new QueueLimitError);\n            return -1;\n        }\n\n        let error = this.filters.filter(file);\n        if (!error && !this.stat.add(file)) {\n            error = new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n        }\n\n        if (error) {\n            this.emit(Events.QUEUE_FILE_FILTERED, file, error);\n            this.emit(Events.QUEUE_ERROR, error);\n            return 0;\n        }\n\n        file.setStatus(Status.QUEUED);\n\n        file.on(Events.FILE_STATUS_CHANGE, (status) => {\n            if (status === Status.CANCELLED) {\n                this.stat.remove(file);\n            } else if (status === Status.PENDING) {\n                setTimeout(() => {\n                    if (this.pending.add(file) && this.pending.size() === 1) {\n                        this.emit(Events.QUEUE_UPLOAD_START);\n                    }\n                }, 1);\n            }\n\n            this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n            if (this.stat.getFiles(Status.PROCESS).length < 1) {\n                this.emit(Events.QUEUE_UPLOAD_END);\n            }\n        });\n\n        file.setContext(this);\n\n        this.emit(Events.QUEUE_FILE_ADDED, file);\n\n        this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n        if (this.autoPending) {\n            file.pending();\n        }\n\n        return 1;\n    }\n\n    isMultiple() {\n        return this.multiple;\n    }\n\n    getAccept() {\n        return this.accept;\n    }\n\n    getStat() {\n        return this.stat;\n    }\n\n    static setSWF(url) {\n        PickerCollector.setSWF(url);\n    }\n\n    getPickerCollector() {\n        if (!this.picker) {\n            this.picker = new PickerCollector(this);\n        }\n        return this.picker;\n    }\n\n    getDndCollector() {\n        if (!this.dnd) {\n            this.dnd = new DndCollector(this);\n        }\n        return this.dnd;\n    }\n\n    getPasteCollector() {\n        if (!this.paster) {\n            this.paster = new PasteCollector(this);\n        }\n        return this.paster;\n    }\n}\n\n\nclass Set {\n    constructor() {\n        this._set = [];\n    }\n\n    /**\n     * 项目总数\n     *\n     * @returns {Number}\n     */\n    size() {\n        return this._set.length;\n    }\n\n    /**\n     * 从头部取出一项\n     *\n     * @returns {*}\n     */\n    shift() {\n        return this._set.shift();\n    }\n\n    /**\n     * 从尾部取出一项\n     *\n     * @returns {*}\n     */\n    pop() {\n        return this._set.pop();\n    }\n\n    /**\n     * 获得所有项\n     *\n     * @returns {Array}\n     */\n    toArray() {\n        return this._set.slice(0);\n    }\n\n    /**\n     * 添加一项\n     *\n     * @param item\n     * @returns {boolean} success if true\n     */\n    add(item) {\n        if (this.has(item)) {\n            return false;\n        }\n        this._set.push(item);\n        return true;\n    }\n\n    /**\n     * 是否存在该项\n     *\n     * @param item\n     * @returns {boolean}\n     */\n    has(item) {\n        return this._set.indexOf(item) > -1;\n    }\n\n    /**\n     * 删除某项\n     *\n     * @returns {boolean} success if true\n     */\n    remove(item) {\n        var i = this._set.indexOf(item);\n        if (i > -1) {\n            this._set.splice(i, 1);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * 清空\n     */\n    clear() {\n        this._set = [];\n    }\n}\n\nclass Stat {\n    constructor() {\n        this.files = new Set;\n    }\n    add(file) {\n        return this.files.add(file);\n    }\n    remove(file) {\n        this.files.remove(file);\n    }\n    getTotal() {\n        return this.files.size();\n    }\n    getFiles(flag) {\n        var files = this.files.toArray();\n        if (!flag) {\n            return files;\n        }\n        return files.filter((file) => {\n            return !!(file.getStatus() & flag);\n        });\n    }\n    stat(flag) {\n        let stat = {}, files = this.getFiles(flag);\n\n        files.forEach((file) => {\n            let status = file.getStatus();\n            stat[status] = (status in stat) ?  (stat[status] + 1) : 1;\n        });\n\n        stat['sum'] = files.length;\n\n        return stat;\n    }\n}\n\nclass Constraints {\n    constructor() {\n        this.constraints = new Set;\n    }\n\n    add(constraint) {\n        this.constraints.add(constraint);\n        return this;\n    }\n\n    remove(constraint) {\n        this.constraints.remove(constraint);\n        return this;\n    }\n\n    some() {\n        return this.constraints.toArray().some((fn) => fn.call(this));\n    }\n}\n\nclass Filters {\n    constructor() {\n        this.filters = new Set;\n    }\n\n    add(filter) {\n        this.filters.add(filter);\n        return this;\n    }\n\n    remove(filter) {\n        this.filters.remove(filter);\n        return this;\n    }\n\n    filter(file) {\n        let error = null;\n        this.filters.toArray().every((filter) => {\n            let ret;\n            try {\n                ret = filter(file);\n            } catch (e) {\n                ret = e;\n            }\n            if (typeof ret === 'string') {\n                error = new FilterError(file, ret);\n                return false;\n            } else if (ret instanceof Error) {\n                error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n                return false;\n            }\n            return true;\n        });\n        return error;\n    }\n}\n\nclass Pending {\n    constructor(threads) {\n        this.threads = threads || 2;\n        this.heading = new Set;\n        this.pending = new Set;\n    }\n\n    add(file) {\n        if (!this.pending.add(file)) return false;\n\n        file.session().always(() => this.pending.remove(file));\n\n        this.load();\n\n        return true;\n    }\n\n    size() {\n        return this.pending.size() + this.heading.size();\n    }\n\n    process(file) {\n        if (!this.heading.add(file)) return;\n\n        file.session().always(() => {\n            this.heading.remove(file);\n            this.load();\n        });\n    }\n\n    load () {\n        var file;\n        while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n            if (file.prepare()) {\n                this.process(file);\n            }\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/context.js\n **/","import {Deferred} from 'jquery';\n\nexport default class Emitter {\n\n    on(event, listener) {\n        event = event.toLowerCase();\n        if (!this._events) {\n            this._events = {};\n        }\n\n        if (!this._events[event]) {\n            this._events[event] = [];\n        }\n\n        this._events[event].push(listener);\n\n        return this;\n    }\n\n    once(event, listener) {\n        event = event.toLowerCase();\n\n        let that = this;\n\n        function fn() {\n            that.off(event, fn);\n            listener.apply(this, arguments);\n        }\n\n        fn.listener = listener;\n\n        this.on(event, fn);\n\n        return this;\n    }\n\n    off(event, listener) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            return this;\n        }\n\n        let i = listeners.length;\n        while (i-- > 0) {\n            if (listeners[i] === listener || listeners[i].listener === listener) {\n                listeners.splice(i, 1);\n                break;\n            }\n        }\n\n        if (listeners.length === 0) {\n            delete this._events[event];\n        }\n\n        return this;\n    }\n\n    removeAllListeners(event) {\n        if (!event) {\n            this._events = [];\n        } else {\n            delete this._events[event.toLowerCase()];\n        }\n\n        return this;\n    }\n\n    setPropagationTarget(emitter) {\n        if (emitter instanceof Emitter) {\n            this.propagationTarget = emitter;\n        }\n    }\n\n    emit(event, ...args) {\n        this.applyEmit(event, args);\n\n        return this;\n    }\n\n    applyEmit(event, args) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (this._events && (listeners = this._events[event])) {\n            listeners.slice(0).forEach(fn => fn.apply(this, args));\n        }\n\n        if (this.propagationTarget) {\n            const pArgs = args.slice(0);\n            pArgs.unshift(this);\n            this.propagationTarget.applyEmit(event, pArgs);\n        }\n\n        return this;\n    }\n\n    invoke(event, data) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            listeners = [];\n        }\n\n        return HookInvoker(listeners.slice(0), data, this);\n    }\n}\n\nfunction HookInvoker(hooks, initialData, context) {\n    let _data = initialData;\n    let _error = null;\n    let _aborted;\n\n    const i = Deferred();\n    const ret = i.promise();\n\n    ret.abort = () => {\n        _aborted = true;\n    };\n\n    const fail = (e) => {\n        if (_aborted) return;\n        if (e) {\n            _error = e instanceof Error ? e : new Error(e);\n        }\n        i.reject(_error || new Error('Unknown'));\n    };\n\n    const done = () => {\n        if (_aborted) return;\n        if (_error != null) {\n            fail();\n        } else {\n            i.resolve(_data);\n        }\n    };\n\n    const setData = (data) => {\n        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n            _data = data;\n        }\n    };\n\n    const next = (data) => {\n        if (_aborted) return;\n\n        if (data instanceof Error) {\n            _error = data;\n        }\n\n        if (_error != null) {\n            return fail();\n        }\n\n        setData(data);\n\n        const hook = hooks.shift();\n        if (!hook) {\n            return done();\n        }\n        let res;\n        try {\n            res = hook.call(context, _data);\n        } catch (e) {\n            return fail(e);\n        }\n\n        if (res && res.then) {\n            res.then(next, fail);\n        } else {\n            next(res);\n        }\n    };\n\n    setTimeout(next, 1);\n\n    return ret;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/emitter.js\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 3\n ** module chunks = 0\n **/","export default {\n    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n    QUEUE_FILE_ADDED: 'queuefileadded', // 队列添加了一个文件\n    QUEUE_FILE_FILTERED: 'queuefilefiltered', // 队列过滤了一个文件\n    QUEUE_ERROR: 'queueerror', // 队列错误\n    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\n    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\n    FILE_CANCEL: 'filecancel', // 文件退出\n    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","export default {\n    ALL: 255, // 所有状态\n\n    PROCESS: 31, // INITED -> END\n    INITED: 1, // 初始状态\n    QUEUED: 2, // 进入队列\n    PENDING: 4, // 队列中等待\n    PROGRESS: 8, // 上传中\n    END: 16, // 上传完成, 等待后续处理\n\n    SUCCESS: 32,  // 上传成功\n    ERROR: 64, // 上传出错\n    CANCELLED: 128  // 上传取消 和 queued 相反, 退出队列\n};\n\nexport var StatusName = {\n    1: 'inited',\n    2: 'queued',\n    4: 'pending',\n    8: 'progress',\n    16: 'end',\n    32: 'success',\n    64: 'error',\n    128: 'cancelled'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/status.js\n **/","class _Error extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n    }\n}\n\nexport class AbortError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'AbortError';\n    }\n}\n\nexport class TimeoutError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'TimeoutError';\n    }\n}\n\nexport class NetworkError extends _Error {\n    constructor(status, message) {\n        super(message);\n        this.name = 'NetworkError';\n        this.status = status;\n    }\n}\n\nexport class QueueLimitError extends _Error {\n    constructor() {\n        super('queue limit');\n        this.name = 'QueueLimitError';\n    }\n}\n\nexport class FilterError extends _Error {\n    constructor(file, message) {\n        super(message);\n        this.name = 'FilterError';\n        this.file = file;\n    }\n}\n\nexport class DuplicateError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'DuplicateError';\n    }\n}\n\nexport class FileExtensionError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileExtensionError';\n    }\n}\n\nexport class FileSizeError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileSizeError';\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors.js\n **/","export function formatSize(size) {\n    size = parseFloat(size);\n    const prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n        base = 1024;\n    let index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n    index = Math.min(index, prefixesSI.length - 1);\n    let powedPrecision = Math.pow(10, index < 2 ? 0 : (index > 2 ? 2 : 1));\n    size = size / Math.pow(base, index);\n    size = Math.round(size * powedPrecision) / powedPrecision;\n    return size + prefixesSI[index] + 'B';\n}\n\nexport function parseSize(size) {\n    if (typeof size !== 'string') {\n        return size;\n    }\n\n    const units = {\n        t: 1099511627776,\n        g: 1073741824,\n        m: 1048576,\n        k: 1024\n    };\n\n    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n    const u = size[2];\n    size = +size[1];\n\n    if (units.hasOwnProperty(u)) {\n        size *= units[u];\n    }\n    return size;\n}\n\nconst ACCEPTs = {\n    images: {\n        title: 'Images',\n        extensions: ['jpg','jpeg','gif','png','bmp','svg','tiff','tif','ico','jpe','svgz','pct','psp','ai','psd','raw','webp']\n    },\n\n    audios: {\n        title: 'Audios',\n        extensions: ['aac','aif','flac','iff','m4a','m4b','mid','midi','mp3','mpa','mpc','oga','ogg','ra','ram','snd','wav','wma']\n    },\n\n    videos: {\n        title: 'Videos',\n        extensions: ['avi','divx','flv','m4v','mkv','mov','mp4','mpeg','mpg','ogm','ogv','ogx','rm','rmvb','smil','webm','wmv','xvid']\n    }\n};\n\nfunction normalizeExtensions(extensions) {\n    if (typeof extensions !== 'string') {\n        return '';\n    }\n\n    return extensions.toLowerCase().split(/ *[ ,;|+] */).map((ext) => {\n        let m = /^\\*?\\.?(\\w+)$/.exec(ext);\n        return m ? m[1] : null;\n    }).filter(ext => ext !== null);\n}\n\nexport function normalizeAccept(accepts) {\n    if (!accepts) return null;\n\n    if (!Array.isArray(accepts)) {\n        accepts = [accepts];\n    }\n\n    return accepts.map((accept) => {\n        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n            return ACCEPTs[accept];\n        } else {\n            let extensions = normalizeExtensions(accept.extensions || accept);\n\n            return extensions.length ? {\n                title: accept.title || '',\n                extensions: extensions,\n                mimeTypes: accept.mimeTypes || ''\n            } : null;\n        }\n    }).filter(accept => accept !== null);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","import {parseSize} from './util';\n\nclass ChunkResponse {\n    /**\n     * @param {string|null} rawResponse\n     * @param {ChunkRequest} chunkRequest\n     */\n    constructor(rawResponse, chunkRequest) {\n        this.rawResponse = rawResponse;\n        this.chunkRequest = chunkRequest;\n    }\n\n    getChunkRequest() {\n        return this.chunkRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        return this.response || this.rawResponse;\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass ChunkRequest {\n    /**\n     *\n     * @param {int} index\n     * @param {Blob} blob\n     * @param {FileRequest} fileRequest\n     */\n    constructor(index, blob, fileRequest) {\n        this.index = index;\n        this.blob = blob;\n        this.fileRequest = fileRequest;\n    }\n\n    getName() {\n        return this.fileRequest.getName();\n    }\n\n    getFile() {\n        return this.fileRequest.getFile();\n    }\n\n    getBlob() {\n        return this.blob;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    isMultiChunk() {\n        return this.getFile().source !== this.blob;\n    }\n\n    getParams() {\n        if (!this.params) {\n            this.params = this.fileRequest.getParams().clone();\n        }\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.getParams().setParam(name, value);\n\n        return this;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getUrl() {\n        return this.url || this.fileRequest.getUrl();\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getHeaders() {\n        if (!this.headers) {\n            this.headers = this.fileRequest.getHeaders().slice(0);\n        }\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        var headers = this.getHeaders();\n        headers.push({name: name, value: value});\n        return this;\n    }\n\n    isWithCredentials() {\n        return this.fileRequest.isWithCredentials();\n    }\n\n    getTimeout() {\n        return this.fileRequest.getTimeout();\n    }\n\n    createChunkResponse(response) {\n        return new ChunkResponse(response, this);\n    }\n}\n\nclass FileResponse {\n    /**\n     * @param {ChunkResponse|Object|string} rawResponse\n     * @param {FileRequest} fileRequest\n     */\n    constructor(rawResponse, fileRequest) {\n        this.rawResponse = rawResponse;\n        this.fileRequest = fileRequest;\n    }\n\n    isFromMultiChunkResponse() {\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getChunkRequest().isMultiChunk();\n        }\n        return false;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        if (this.response != null) {\n            return this.response;\n        }\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getResponse();\n        } else {\n            return this.rawResponse;\n        }\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass Params {\n    constructor(params) {\n        if (Array.isArray(params)) {\n            this.params = params.slice(0);\n        } else if (typeof params === 'object') {\n            this.params = [];\n            for (let name in params) {\n                if (params.hasOwnProperty(name)) {\n                    this.params.push({name, value: params[name]});\n                }\n            }\n        } else {\n            this.params = [];\n        }\n    }\n\n    setParam(name, value) {\n        this.removeParam(name);\n        this.addParam(name, value);\n    }\n\n    addParam(name, value) {\n        this.params.push({name, value});\n    }\n\n    removeParam(name) {\n        this.params = this.params.filter((param) => param.name !== name);\n    }\n\n    getParam(name, single) {\n        let ret = this.params.filter((param) => param.name === name)\n            .map((param) => param.value);\n\n        if (single) {\n            return ret.shift();\n        }\n\n        return ret;\n    }\n\n    clone() {\n        return new Params(this.params);\n    }\n\n    toArray() {\n        return this.params;\n    }\n\n    toString() {\n        const params = this.params.map((param) => {\n            return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n        });\n\n        return params.join('&'); //.replace( /%20/g, '+');\n    }\n}\n\nconst MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\nexport default class FileRequest {\n    constructor(file, options = {}) {\n        this.file = file;\n        this.name = options.name || 'file';\n        this.url = options.url;\n        this.params = new Params(options.params);\n        this.headers = options.headers || [];\n        this.withCredentials = options.withCredentials;\n        this.timeout = options.timeout || 0;\n        this.chunkSize = options.chunkSize || 0;\n        this.chunkRetries = options.chunkRetries || 0;\n        this.chunkEnable = options.chunkEnable || false;\n        this.chunkProcessThreads = options.chunkProcessThreads || 0;\n    }\n\n    getFile() {\n        return this.file;\n    }\n\n    getUrl() {\n        return this.url || '';\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    setName(name) {\n        this.name = name;\n        return this;\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getParams() {\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.params.setParam(name, value);\n        return this;\n    }\n\n    getHeaders() {\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        this.headers.push({name: name, value: value});\n    }\n\n    isWithCredentials() {\n        return this.withCredentials;\n    }\n\n    setWithCredentials(flag) {\n        this.withCredentials = flag;\n        return this;\n    }\n\n    getTimeout() {\n        return this.timeout;\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n        return this;\n    }\n\n    getChunkSize() {\n        return parseSize(this.chunkSize);\n    }\n\n    setChunkSize(chunkSize) {\n        this.chunkSize = chunkSize;\n        return this;\n    }\n\n    getChunkRetries() {\n        return this.chunkRetries;\n    }\n\n    setChunkRetries(retries) {\n        this.chunkRetries = retries;\n        return 0;\n    }\n\n    isChunkEnable() {\n        const chunkSize = this.getChunkSize();\n        return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE\n            && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n    }\n\n    setChunkEnable(flag) {\n        this.chunkEnable = flag;\n        return this;\n    }\n\n    getChunkProcessThreads() {\n        return this.chunkProcessThreads;\n    }\n\n    setChunkProcessThreads(threads) {\n        this.chunkProcessThreads = threads;\n        return this;\n    }\n\n    createChunkRequest(index, blob) {\n        return new ChunkRequest(index, blob, this);\n    }\n\n    createFileResponse(response) {\n        return new FileResponse(response, this);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/filerequest.js\n **/","import $ from 'jquery';\nimport Emitter from '../emitter';\nimport Runtime from '../html5/runtime';\nimport File from '../file';\n\nfunction createReader(collector) {\n    let _break = false;\n    function reader(dataTransfer, responders) {\n        var items = dataTransfer.items,\n            files = dataTransfer.files,\n            item;\n\n        for (let i = 0, l = files.length; i < l; i++) {\n            if (_break) break;\n            item = items && items[i];\n\n            let entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\n            if (entry && entry.isDirectory) {\n                readEntry(entry, responders);\n            } else {\n                if (!collector(files[i], responders)) {\n                    _break = true;\n                    break;\n                }\n            }\n        }\n    }\n    function readEntry(entry, responders) {\n        if (_break) return;\n        if (entry.isFile) {\n            entry.file((file) => {\n                if (_break) return;\n                if (!collector(file, responders)) {\n                    _break = true;\n                }\n            });\n        } else if (entry.isDirectory) {\n            entry.createReader().readEntries((entries) => {\n                if (_break) return;\n                for (let i = 0, l = entries.length; i < l; i++) {\n                    if (_break) break;\n                    readEntry(entries[i], responders);\n                }\n            });\n        }\n    }\n    return reader;\n}\n\nclass Area extends Emitter {\n    constructor(area) {\n        super();\n\n        this.areaElement = area;\n    }\n\n    contains(target) {\n        return this.areaElement.contains(target);\n    }\n\n    start(e, allowed) {\n        this.emit('start', e, allowed);\n    }\n\n    response(e, allowed) {\n        allowed = allowed && this.contains(e.target);\n        this.emit('response', e, allowed);\n        return allowed;\n    }\n\n    end(e) {\n        this.emit('end', e);\n    }\n}\n\nconst Collectors = [];\n\nfunction prepare() {\n    if (!('DataTransfer' in window) || !('FileList' in window)) {\n        return;\n    }\n\n    const $doc = $(document),\n        runtime = Runtime.getInstance();\n\n    let started = 0, enter = 0, endTimer;\n    const dataTransferReader = createReader((file, responders) => {\n        if (!responders || responders.length < 1) {\n            return false;\n        }\n        file = new File(runtime, file);\n        let total = responders.length;\n        return responders.some((responder) => {\n            const ret = responder.recieve(file);\n            if (ret > 0) {\n                return true;\n            }\n            if (ret < 0) {\n                total -= 1;\n            }\n            return false;\n        }) || total > 0;\n    });\n\n    const start = (e) => {\n        started = 1;\n        Collectors.forEach((responder) => responder.start(e));\n    };\n\n    const move = (e) => {\n        const has = Collectors.filter(responder => responder.response(e)).length > 0;\n\n        const dataTransfer = (e.originalEvent || e).dataTransfer;\n\n        if (dataTransfer) {\n            dataTransfer.dropEffect = has ? 'copy' : 'none';\n        }\n        e.preventDefault();\n    };\n\n    const end = (e) => {\n        started = 0;\n        enter = 0;\n        Collectors.forEach((responder) => responder.end(e));\n    };\n\n    const drag = (e) => {\n        clearTimeout(endTimer);\n        let isLeave = e.type === 'dragleave';\n        if (!isLeave && !started) {\n            start(e);\n        }\n        move(e);\n        if (isLeave) {\n            endTimer = setTimeout(() => end(e), 100);\n        }\n    };\n    const drop = (e) => {\n        e.preventDefault();\n\n        clearTimeout(endTimer);\n        end(e);\n\n        const responders = Collectors.filter((responder) => responder.contains(e.target));\n\n        if (responders.length < 1) {\n            return;\n        }\n\n        let dataTransfer = (e.originalEvent || e).dataTransfer;\n\n        try {\n            if (dataTransfer.getData('text/html')) {\n                return;\n            }\n        } catch (ex) {}\n\n        dataTransferReader(dataTransfer, responders);\n    };\n\n    $doc.on('dragenter dragover dragleave', drag);\n    $doc.on('drop', drop);\n}\n\nexport default class DndCollector {\n\n    constructor(context) {\n        if (Collectors.length < 1) {\n            prepare();\n        }\n        Collectors.push(this);\n\n        this.context = context;\n        this.areas = [];\n    }\n\n    addArea(area) {\n        area = new Area(area);\n        this.areas.push(area);\n        area.destroy = () => {\n            area.removeAllListeners();\n            let i = this.areas.indexOf(area);\n            if (i > -1) {\n                this.areas.splice(i, 1);\n            }\n        };\n\n        return area;\n    }\n\n    contains(target) {\n        return this.areas.some((area) => area.contains(target));\n    }\n\n    start(e) {\n        this.areas.forEach((area) => area.start(e));\n    }\n\n    response(e) {\n        return this.areas.map((area) => area.response(e)).some(r => r !== false);\n    }\n\n    recieve(file) {\n        const ret = this.context.add(file);\n        if (ret > 0 && !this.context.isMultiple()) {\n            return -1;\n        } else {\n            return ret;\n        }\n    }\n\n    end(e) {\n        this.areas.forEach((area) => area.end(e));\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/dnd.js\n **/","import {Deferred} from 'jquery';\nimport Runtime from '../runtime';\nimport Transport from './transport';\n\nlet instance;\n\nexport default class Html5Runtime extends Runtime {\n    static getInstance() {\n        if (!instance) {\n            instance = new Html5Runtime;\n        }\n        return instance;\n    }\n\n    getAsDataUrl(blob, timeout) {\n        let i = Deferred(),\n            fr = new FileReader, timer;\n\n        fr.onloadend = () => {\n            if (fr.readyState == FileReader.DONE) {\n                i.resolve(fr.result);\n            } else {\n                i.reject();\n            }\n            clearTimeout(timer);\n            fr.onloadend = null;\n        };\n        fr.readAsDataURL(blob);\n\n        let abort = () => {\n            fr && fr.abort();\n            fr = null;\n        };\n        if (timeout) {\n            timer = setTimeout(abort, timeout);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    getTransport() {\n        if (!this.transport) {\n            this.transport = new Transport(this);\n        }\n        return this.transport;\n    }\n\n    canSlice() {\n        return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n    }\n\n    slice(blob, start, end) {\n        let blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\n        return blobSlice.call(blob, start, end);\n    }\n\n    md5(blob) {\n        const i = Deferred();\n\n        if (!window.SparkMD5) {\n            i.reject();\n            return i.promise();\n        }\n\n        let chunkSize = 2 * 1024 * 1024,\n            chunks = Math.ceil(blob.size / chunkSize),\n            chunk = 0,\n            spark = new SparkMD5.ArrayBuffer(),\n            blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\n        let fr = new FileReader;\n\n        var loadNext = () => {\n            if (!fr) return;\n            let start, end;\n\n            start = chunk * chunkSize;\n            end = Math.min(start + chunkSize, blob.size);\n\n            fr.onload = () => {\n                spark && spark.append(fr.result);\n            };\n\n            fr.onloadend = () => {\n                if (!fr) return;\n                if (fr.readyState == FileReader.DONE) {\n                    if (++chunk < chunks) {\n                        setTimeout(loadNext, 1);\n                    } else {\n                        setTimeout(() => {\n                            spark && i.resolve(spark.end());\n                            loadNext = blob = spark = null;\n                        }, 50);\n                    }\n                } else {\n                    i.reject();\n                }\n                fr.onloadend = fr.onload = null;\n            };\n\n            fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n        };\n\n        loadNext();\n\n        let ret = i.promise();\n        ret.abort = function () {\n            fr && fr.abort();\n            spark = null;\n            fr = null;\n        };\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/runtime.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport {NetworkError} from './errors';\nimport {Deferred} from 'jquery';\n\nexport default class Runtime extends Emitter {\n    md5(blob) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getAsDataUrl(file, timeout) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getTransport() {\n        return null;\n    }\n    getUploading() {\n        if (!this.uploading) {\n            this.uploading = new Uploading(this);\n        }\n        return this.uploading;\n    }\n    canSlice() {\n        return false;\n    }\n    slice(blob) {\n        throw new Error('this runtime current not support slice');\n    }\n\n    cancel(blob) {\n\n    }\n}\n\n\nclass Uploading {\n    constructor(runtime) {\n        this.runtime = runtime;\n    }\n\n    /**\n     * @param {FileRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(),\n            file = request.getFile(),\n            runtime = this.runtime;\n\n        let source = file.getSource(), size = file.size,\n            chunkSize = request.getChunkSize(),\n            useChunk = request.isChunkEnable(),\n            threads = request.getChunkProcessThreads(),\n            start = 0, end = 0, slots = [];\n\n        const getActives = () => {\n            return slots.reduce((sum, slot) => sum + (slot.state() === 'pending' ? 1 : 0), 0);\n        };\n\n        const readChunk = () => {\n            let slot, req, blob;\n            while (end < size && getActives() < threads) {\n                start = end;\n                end = Math.min(end + chunkSize, size);\n                blob = runtime.slice(source, start, end);\n                req = request.createChunkRequest(slots.length, blob);\n                slot = this.slot(req, request.getChunkRetries());\n                slot.progress(progress).done(done).fail(fail);\n                slots.push(slot);\n            }\n        };\n\n        const progress = () => {\n            let total = size - end, loaded = 0;\n            slots.forEach((slot) => {\n                total += slot.total;\n                loaded += slot.loaded;\n            });\n            i.notify({total, loaded});\n        };\n\n        const done = (res) => {\n            useChunk && readChunk();\n\n            if (end >= size && slots.every((slot) => slot.state() === 'resolved')) {\n                i.resolve(res);\n            }\n        };\n\n        const abort = () => {\n            slots.forEach((slot) => slot.abort());\n        };\n\n        const fail = (error) => {\n            i.reject(error);\n            abort();\n        };\n\n        if (useChunk) {\n            readChunk();\n        } else {\n            end = size;\n            let slot = this.slot(request.createChunkRequest(0, source), 0);\n            slot.progress(progress).done(done).fail(fail);\n            slots.push(slot);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    slot(request, retries) {\n        let i = Deferred(),\n            runtime = this.runtime,\n            context = request.getFile().getContext();\n\n        let slot = i.promise();\n\n        const progress = (e) => {\n            if (e.total) {\n                slot.total = e.total;\n            }\n            if (e.loaded) {\n                slot.loaded = e.loaded;\n            }\n            i.notify(e);\n        };\n\n        const process = () => {\n            var prepare, transport, completion;\n            slot.abort = function () {\n                prepare && prepare.abort();\n                transport && transport.abort();\n                completion && completion.abort();\n            };\n            slot.total = request.getBlob().size;\n            slot.loaded = 0;\n\n            prepare = context.invoke(Events.CHUNK_UPLOAD_PREPARING, request);\n\n            prepare.then((request) => {\n                transport = runtime.getTransport().generate(request);\n                transport.progress(progress);\n                return transport;\n            }).then((response) => {\n                completion = context.invoke(Events.CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n                return completion;\n            }).done(i.resolve).fail(error);\n        };\n\n        const error = (e) => {\n            if (e instanceof NetworkError && retries-- > 0) {\n                // retry\n                setTimeout(process, 500);\n            } else {\n                i.reject(e);\n            }\n            slot.abort();\n        };\n\n        process();\n\n        return slot;\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/runtime.js\n **/","import {TimeoutError, AbortError, NetworkError} from '../errors';\nimport {Deferred} from 'jquery';\n\nexport default class Html5Transport {\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred();\n\n        let timeoutTimer, withCredentials = false;\n        let xhr = new XMLHttpRequest;\n\n        if (request.isWithCredentials && !('withCredentials' in xhr) && ('XDomainRequest' in window)) {\n            xhr = new XDomainRequest;\n            withCredentials = true;\n        }\n\n        const clean = () => {\n            xhr.onload = xhr.onerror = null;\n            if (xhr.upload) {\n                xhr.upload.onprogress = null;\n            }\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n\n        const abort = () => {\n            clean();\n            try {\n                xhr.abort();\n            } catch (e) {}\n        };\n\n        const complete = (e) => {\n            clean();\n            if (!xhr.status && e.type === 'error') {\n                return i.reject(new AbortError(e.message));\n            }\n            if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n                return i.resolve(xhr.responseText);\n            }\n            return i.reject(new NetworkError(xhr.status, xhr.statusText));\n        };\n\n        if (xhr.upload) {\n            xhr.upload.onprogress = (e) => i.notify(e);\n        }\n        xhr.onerror = complete;\n        xhr.onload = complete;\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            if (withCredentials) {\n                xhr.open('POST', request.getUrl(), true);\n                xhr.withCredentials = true;\n            } else {\n                xhr.open('POST', request.getUrl());\n            }\n\n            request.getHeaders().forEach((header) => xhr.setRequestHeader(header.name, header.value));\n\n            const formData = new FormData, blob = request.getBlob();\n\n            request.getParams().toArray().forEach((param) => formData.append(param.name, param.value));\n\n            formData.append(request.getName(), blob, blob.name || 'blob');\n\n            xhr.send(formData);\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/transport.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport Status, {StatusName} from './status';\nimport {Deferred} from 'jquery';\n\nlet uid = 0;\nfunction guid() {\n    return 'FILE-' + (uid++).toString(16).toUpperCase();\n}\n\nconst RE_EXT = /\\.([^.]+)$/, RE_IMAGE = /\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\nfunction guessExt(blob) {\n    let m = blob.name && RE_EXT.exec(blob.name);\n    if (m) {\n        return m[1];\n    }\n    m = blob.type && RE_IMAGE.exec(blob.type);\n    if (m) {\n        return m[1];\n    }\n    return '';\n}\n\nfunction guessType(ext) {\n    if (['jpg','jpeg','png','gif','bmp','webp'].indexOf(ext.toLowerCase())) {\n        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n    }\n    return null;\n}\n\nexport default class Progress {\n    constructor(total, loaded) {\n        this.change(total, loaded);\n    }\n\n    change(total, loaded) {\n        this.total = total;\n        this.loaded = loaded || 0;\n        this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100)\n    }\n\n    done() {\n        this.change(this.total, this.total);\n    }\n}\n\nexport default class File extends Emitter {\n    constructor(runtime, source, filename) {\n        super();\n\n        this.id = guid();\n\n        this.name = source.name || filename || this.id;\n\n        var ext = guessExt(source).toLowerCase();\n\n        if (ext && !RE_EXT.test(this.name)) {\n            this.name += '.' + ext;\n        }\n\n        this.ext = ext;\n\n        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\n        this.lastModified = source.lastModified || (+new Date);\n\n        this.size = source.size || 0;\n\n        this.runtime = runtime;\n\n        this.source = source;\n\n        this.status = Status.INITED;\n\n        this.progress = new Progress(this.size, 0);\n    }\n\n    getContext() {\n        return this.context;\n    }\n\n    setContext(context) {\n        this.context = context;\n        this.setPropagationTarget(context);\n    }\n\n    getRuntime() {\n        return this.runtime;\n    }\n\n    isImage() {\n        return RE_IMAGE.test(this.type);\n    }\n\n    setStatus(status) {\n        let prevStatus = this.status;\n\n        if (prevStatus !== Status.CANCELLED && status !== prevStatus) {\n            this.status = status;\n            this.emit(Events.FILE_STATUS_CHANGE, status, prevStatus);\n        }\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    getStatusName() {\n        if (this.status in StatusName) {\n            return StatusName[this.status];\n        } else {\n            return 'unknow';\n        }\n    }\n\n    getSource() {\n        return this.source;\n    }\n\n    getAsDataUrl(timeout) {\n        if (!this._dataUrlPromise) {\n            this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n        }\n        return this._dataUrlPromise;\n    }\n\n    md5() {\n        if (!this._md5Promise) {\n            this._md5Promise = this.runtime.md5(this.source);\n        }\n        return this._md5Promise;\n    }\n\n    session() {\n        if (this._sessionPromise) {\n            return this._sessionPromise;\n        }\n\n        let session = Deferred();\n\n        session.progress((progress) => {\n            this.setStatus(Status.PROGRESS);\n            this.emit(Events.FILE_UPLOAD_PROGRESS, progress);\n        }).done((response) => {\n            this.response = response;\n            this._session = null;\n            this._sessionPromise = null;\n            this._flows = [];\n            this.setStatus(Status.SUCCESS);\n            this.emit(Events.FILE_UPLOAD_SUCCESS, response);\n        }).fail((error) => {\n            this._session = null;\n            this._sessionPromise = null;\n            let flow;\n            while (flow = this._flows.shift()) {\n                flow.abort();\n            }\n\n            if (error instanceof Error) {\n                this.setStatus(Status.ERROR);\n                this.emit(Events.FILE_UPLOAD_ERROR, error);\n            }\n        }).always(() => {\n            this.emit(Events.FILE_UPLOAD_COMPLETED, this.getStatus());\n        });\n\n        this._flows = [];\n        this._session = session;\n        this._sessionPromise = session.promise();\n\n        return this._sessionPromise;\n    }\n\n    prepare() {\n        if (this.status !== Status.PENDING || !this.context) {\n            return false;\n        }\n\n        this.session();\n        this.setStatus(Status.PROGRESS);\n\n        this.emit(Events.FILE_UPLOAD_START);\n\n        this.request = this.context.createFileRequest(this);\n\n        const prepare = this.context.invoke(Events.FILE_UPLOAD_PREPARING, this.request);\n\n        this._flows.push(prepare);\n\n        prepare.then((request) => {\n            this.emit(Events.FILE_UPLOAD_PREPARED, request);\n\n            const upload = this.runtime.getUploading().generate(request);\n\n            this._flows.push(upload);\n\n            upload.progress((e) => {\n                this.progress.change(e.total, e.loaded);\n                this._session.notify(this.progress);\n            });\n\n            return upload;\n        }).then((response) => this.complete(response), this._session.reject);\n\n        return true;\n    }\n\n    complete(response) {\n        if (this.status !== Status.PROGRESS) return;\n\n        let flow;\n        while (flow = this._flows.shift()) {\n            flow.abort();\n        }\n\n        this.progress.done();\n        this._session.notify(this.progress);\n\n        response = this.request.createFileResponse(response);\n\n        this.setStatus(Status.END);\n        this.emit(Events.FILE_UPLOAD_END);\n\n        const complete = this.context.invoke(Events.FILE_UPLOAD_COMPLETING, response);\n\n        this._flows.push(complete);\n\n        complete.then(this._session.resolve, this._session.reject);\n    }\n\n    pending() {\n        if (this.status === Status.ERROR || this.status === Status.QUEUED) {\n            this.progress.change(this.size, 0);\n            this.setStatus(Status.PENDING);\n        }\n    }\n\n    abort() {\n        this._session && this._session.reject();\n        this._session = null;\n        this._sessionPromise = null;\n    }\n\n    cancel() {\n        this.setStatus(Status.CANCELLED);\n        this.emit(Events.FILE_CANCEL);\n        this.abort();\n        this.runtime.cancel(this.source);\n        this._dataUrlPromise && this._dataUrlPromise.abort();\n        this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n        this.removeAllListeners();\n    }\n\n    destroy() {\n        this.cancel();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/file.js\n **/","import $ from 'jquery';\nimport Emitter from '../emitter';\nimport Runtime from '../html5/runtime';\nimport File from '../file';\n\nexport default class PasteCollector {\n    constructor(context) {\n        this.context = context;\n        this.runtime = Runtime.getInstance();\n    }\n\n    addArea(area) {\n        area = area.on ? area : $(area);\n\n        const context = this.context,\n            runtime = this.runtime,\n            emitter = new Emitter;\n\n        const paste = (e) => {\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            const clipboardData = (e.originalEvent || e).clipboardData || window.clipboardData,\n                items = clipboardData.items,\n                files = clipboardData.files;\n\n            if (!files && !items) {\n                return;\n            }\n\n            let prevent, i, l, file, item, addRet;\n\n            if (files && files.length) {\n                // safari has files\n                prevent = files.length > 0;\n                for (i = 0, l = files.length; i < l; i++) {\n                    file = new File(runtime, files[i]);\n\n                    prevent = 1;\n\n                    addRet = context.add(file);\n                    if (addRet < 0 || (addRet > 0 && !context.isMultiple())) {\n                        break;\n                    }\n                }\n            } else if (items && items.length) {\n                // chrome has items\n                let filename = clipboardData.getData('text/plain');\n                for (i = 0, l = items.length; i < l && !context.isLimit(); i++) {\n                    item = items[i];\n\n                    if (item.kind !== 'file' || !(file = item.getAsFile())) {\n                        continue;\n                    }\n\n                    file = new File(runtime, file, filename);\n                    filename = null;\n\n                    prevent = 1;\n\n                    addRet = context.add(file);\n                    if (addRet < 0 || (addRet > 0 && !context.isMultiple())) {\n                        break;\n                    }\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n                e.stopPropagation();\n                emitter.emit('paste', clipboardData);\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window)) {\n            area.on('paste', paste);\n        }\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            area.off('paste', paste);\n        };\n\n        return emitter;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/paste.js\n **/","import $ from 'jquery';\nimport Emitter from '../emitter';\nimport Html5Runtime from '../html5/runtime';\nimport FlashRuntime from '../flash/runtime';\nimport File from '../file';\n\nlet SWF_URL = '';\n\nclass FlashTriggerCollection {\n    constructor(context, onFiles) {\n        let overlay = $('<label></label>');\n        overlay.css({\n            position: 'fixed',\n            opacity: 0,\n            left: -100,\n            top: -100,\n            width: 50,\n            height: 50,\n            display: 'block',\n            cursor: 'pointer',\n            background: 'black',\n            overflow: 'hidden',\n            zIndex: 99999\n        });\n        const runtime = new FlashRuntime(overlay, SWF_URL, () => {\n            return {\n                accept: context.getAccept(),\n                multiple: context.isMultiple()\n            };\n        });\n\n        runtime.on('select', (e) => {\n            onFiles(e.files, runtime);\n            this.current && this.current.emit('files', e.files, runtime);\n        });\n\n        runtime.on('rollOut', () => this.hideOverlay());\n        this.overlay = overlay.appendTo(document.body);\n    }\n\n    hideOverlay() {\n        this.overlay.css({\n            left: -100,\n            top: -100,\n            width: 50,\n            height: 50\n        });\n        if (this.current) {\n            this.current.emit('rollOut');\n            this.current = null;\n        }\n    }\n\n\n    add(trigger) {\n        const overlay = this.overlay, emitter = new Emitter;\n        trigger = trigger.on ? trigger : $(trigger);\n        trigger.on('mouseover.flashpicker', (e) => {\n            let rect = e.currentTarget.getBoundingClientRect();\n            overlay.css({\n                left: rect.left,\n                top: rect.top,\n                width: rect.right - rect.left,\n                height: rect.bottom - rect.top\n            });\n            emitter.emit('rollOver');\n            if (this.current && this.current !== emitter) {\n                this.current.emit('rollOut');\n            }\n            this.current = emitter;\n        });\n\n        emitter.destroy = () => {\n            if (this.current === emitter) {\n                this.hideOverlay();\n            }\n            emitter.removeAllListeners();\n            trigger.off('mouseover.flashpicker');\n        };\n\n        return emitter;\n    }\n}\n\nclass Html5TriggerCollection {\n    constructor(context, onFiles) {\n        const runtime = Html5Runtime.getInstance();\n\n        this._createInput = (label) => {\n            let input = $(document.createElement('input'));\n\n            input.attr('type', 'file');\n            input.css({\n                position:'absolute',\n                clip: 'rect(1px 1px 1px 1px)'\n            });\n\n            let accept = context.getAccept();\n            if (accept && accept.length > 0) {\n                accept = accept.map((item) => {\n                    return item.mimeTypes || ('.' + item.extensions.join(',.'));\n                });\n\n                input.attr('accept', accept.join(','));\n            }\n            if (context.isMultiple()) {\n                input.attr('multiple', 'multiple');\n            }\n\n            input.on('change', (e) => {\n                onFiles(e.target.files, runtime);\n                input.remove();\n                this._createInput(label);\n            });\n            label.html(input);\n        };\n    }\n\n    add(trigger) {\n        const label = $('<label></label>'), emitter = new Emitter;\n        label.css({\n            position: 'absolute',\n            opacity: 0,\n            top:0,left:0,\n            width: '100%',\n            height: '100%',\n            display: 'inline-block',\n            cursor: 'pointer',\n            background: '#fff',\n            overflow: 'hidden'\n        });\n        this._createInput(label);\n        trigger = trigger.append ? trigger : $(trigger);\n        trigger.append(label);\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            label.remove();\n        };\n\n        return emitter;\n    }\n}\n\nexport default class PickerCollector {\n    static setSWF(url) {\n        SWF_URL = url;\n    }\n    constructor(context) {\n\n        const onFiles = (files, runtime) => {\n            for (let i = 0, l = files.length; i < l; i++) {\n                if (context.add(new File(runtime, files[i])) < 0) {\n                    break;\n                }\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window)) {\n            this.triggerCollection = new Html5TriggerCollection(context, onFiles);\n        } else {\n            this.triggerCollection = new FlashTriggerCollection(context, onFiles);\n        }\n    }\n\n    addArea(area) {\n        return this.triggerCollection.add(area);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/picker.js\n **/","import Runtime from '../runtime';\nimport Transport from './transport';\n\nfunction getFlashVersion() {\n    let version;\n\n    try {\n        version = navigator.plugins['Shockwave Flash'];\n        version = version.description;\n    } catch (e1) {\n        try {\n            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n        } catch (e2) {\n            version = '0.0';\n        }\n    }\n    version = version.match(/\\d+/g);\n    return parseFloat(version[0] + '.' + version[1]);\n}\n\nfunction callFlash(movie, functionName, argumentArray) {\n    try {\n        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n    } catch (ex) {\n        throw \"Call to \" + functionName + \" failed\";\n    }\n}\n\nfunction createFlash(swf, callInterface) {\n    if (getFlashVersion() < 11.4) {\n        throw 'flash player is not available';\n    }\n    const div = document.createElement('div');\n    let url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n    let attrs = [\n        'id=\"' + callInterface + '-Picker\"',\n        'type=\"application/x-shockwave-flash\"',\n        'data=\"' + url + '\"',\n        'width=\"100%\" height=\"100%\"',\n        'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'\n    ];\n    if (window.ActiveXObject) {\n        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n    }\n    div.innerHTML = '<object ' + attrs.join(' ') + '>' +\n        '<param name=\"movie\" value=\"' + url + '\" />' +\n        '<param name=\"wmode\" value=\"transparent\" />' +\n        '<param name=\"allowscriptaccess\" value=\"always\" />' +\n    '</object>';\n\n    return div.firstChild;\n}\n\nlet _guid = +new Date;\nfunction guid(prefix) {\n    let ret = prefix + (_guid++).toString(16);\n    if (ret in window) {\n        return guid(prefix);\n    }\n    return ret;\n}\n\nexport default class FlashRuntime extends Runtime {\n    constructor(trigger, swf, options) {\n        super();\n\n        const callInterface = guid('FlashRuntime');\n\n        this.callInterface = callInterface;\n        window[callInterface] = this;\n\n        this.options = options;\n\n        const _this = this;\n        function display() {\n            let w = trigger[0].offsetWidth, h = trigger[0].offsetHeight, flash;\n            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n                setTimeout(display, 1000);\n                return;\n            }\n\n            trigger.append(_this.flash = flash);\n        }\n\n        display();\n    }\n    getOptions() {\n        let options = this.options;\n        if (typeof options === 'function') {\n            options = options();\n        }\n        return options;\n    }\n    getTransport(name, blob, options) {\n        return new Transport(this, name, blob, options);\n    }\n    send(name, blob, url, params) {\n        callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n    }\n    abort(blob) {\n        try {\n            callFlash(this.flash, 'exec', ['abort', blob.id]);\n        } catch (e) {}\n    }\n    cancel(blob) {\n        callFlash(this.flash, 'exec', ['cancel', blob.id]);\n    }\n    ping() {\n        callFlash(this.flash, 'exec', ['pang']);\n    }\n    destroy() {\n        delete window[this.callInterface];\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/runtime.js\n **/","import {TimeoutError, AbortError, NetworkError} from '../errors';\nimport {Deferred} from 'jquery';\n\nexport default class FlashTransport {\n    constructor(flashRuntime) {\n        this.flashRuntime = flashRuntime;\n    }\n\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(), flashRuntime = this.flashRuntime, blob = request.getBlob();\n\n        let timeoutTimer;\n\n        const clean = () => {\n            flashRuntime.off('uploadprogress', progress);\n            flashRuntime.off('uploadcomplete', complete);\n            flashRuntime.off('uploaderror', error);\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n        const abort = () => {\n            clean();\n            flashRuntime.abort(blob.id);\n        };\n\n        const progress = (e) => {\n            if (e.id !== blob.id) return;\n            i.notify(e);\n        };\n\n        const complete = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            if (e.status === 304 || e.status >= 200 && e.status < 300) {\n                flashRuntime.cancel(blob);\n                return i.resolve(e.response);\n            }\n            return i.reject(new NetworkError(e.status, e.response));\n        };\n\n        const error = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            i.reject(new AbortError(e.message));\n        };\n        flashRuntime.on('uploadprogress', progress);\n        flashRuntime.on('uploadcomplete', complete);\n        flashRuntime.on('uploaderror', error);\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/transport.js\n **/"],"sourceRoot":""}