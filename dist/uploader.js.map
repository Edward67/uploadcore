{"version":3,"sources":["webpack:///uploader.js","webpack:///webpack/bootstrap b56ab9866a37a9318819","webpack:///./index.js","webpack:///./src/collector/paste.js","webpack:///./src/events.js","webpack:///./src/status.js","webpack:///./src/filerequest.js","webpack:///./src/emitter.js","webpack:///./src/errors.js","webpack:///./src/collector/dnd.js","webpack:///./src/context.js","webpack:///./src/collector/picker.js","webpack:///external \"jQuery\"","webpack:///./src/html5/runtime.js","webpack:///./src/file.js","webpack:///./src/flash/runtime.js","webpack:///./src/runtime.js","webpack:///./src/html5/transport.js","webpack:///./src/flash/transport.js"],"names":["UXUploader","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_srcContext","_srcContext2","_srcEvents","_srcEvents2","_srcStatus","_srcStatus2","Events","Status","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_jquery","_jquery2","_emitter","_emitter2","_html5Runtime","_html5Runtime2","_file","_file2","PasteCollector","context","this","runtime","getInstance","area","on","emitter","paste","e","isDefaultPrevented","clipboardData","originalEvent","items","files","getData","ex","prevent","undefined","l","file","item","isLimit","add","isMultiple","filename","kind","getAsFile","preventDefault","stopPropagation","emit","destroy","removeAllListeners","off","window","QUEUE_UPLOAD_START","QUEUE_UPLOAD_END","QUEUE_ADD","QUEUE_ERROR","QUEUE_STAT_CHANGE","FILE_UPLOAD_START","FILE_UPLOAD_PREPARING","FILE_UPLOAD_PREPARED","CHUNK_UPLOAD_PREPARING","CHUNK_UPLOAD_COMPLETING","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_END","FILE_UPLOAD_COMPLETING","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_ERROR","FILE_UPLOAD_COMPLETED","FILE_CANCEL","FILE_STATUS_CHANGE","ALL","PROCESS","INITED","QUEUED","PENDING","PROGRESS","END","SUCCESS","ERROR","CANCELLED","StatusName",1,2,4,8,16,32,64,128,"ChunkResponse","rawResponse","chunkRequest","response","ChunkRequest","index","blob","fileRequest","getName","getFile","source","params","getParams","clone","name","getParam","setParam","url","getUrl","headers","getHeaders","slice","push","isWithCredentials","getTimeout","FileResponse","getResponse","fromChunkResponse","getChunkRequest","isMultiChunk","Params","Array","isArray","_name","hasOwnProperty","removeParam","addParam","filter","param","single","ret","map","shift","encodeURIComponent","join","MIN_CHUNK_SIZE","FileRequest","options","arguments","withCredentials","timeout","chunkSize","chunkRetries","chunkEnable","chunkProcessThreads","flag","retries","getRuntime","canSlice","size","threads","HookInvoker","hooks","initialData","_data","_error","_aborted","Deferred","promise","abort","fail","Error","reject","done","resolve","setData","data","constructor","next","hook","res","then","setTimeout","Emitter","event","listener","toLowerCase","_events","fn","that","apply","listeners","splice","propagationTarget","_len","args","_key","applyEmit","_this","forEach","pArgs","unshift","_inherits","subClass","superClass","create","__proto__","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","getOwnPropertyDescriptor","get","getPrototypeOf","AbortError","_Error","message","TimeoutError","_Error2","NetworkError","_Error3","status","QueueLimitError","_Error4","FilterError","_Error5","DuplicateError","_FilterError","FileExtensionError","_FilterError2","FileSizeError","_FilterError3","createReader","collector","reader","dataTransfer","responders","entry","webkitGetAsEntry","isDirectory","readEntry","isFile","readEntries","entries","prepare","$doc","document","started","enter","endTimer","dataTransferReader","some","responder","recieve","start","Collectors","move","allowed","dropEffect","end","drag","clearTimeout","isLeave","type","drop","contains","Area","_Emitter","areaElement","DndCollector","areas","indexOf","r","_events2","_status","_status2","_errors","_filerequest","_filerequest2","_collectorDnd","_collectorDnd2","_collectorPaste","_collectorPaste2","_collectorPicker","_collectorPicker2","Context","processThreads","autoPending","queueCapcity","accept","sizeLimit","preventDuplicate","multiple","stat","Stat","limiter","Limiter","Filter","pending","Pending","addLimit","getTotal","addFilter","extensions","split","ext","has","getFiles","requestOptions","request","limit","_this2","isAllow","setContext","setStatus","remove","getError","setSWF","picker","dnd","paster","Set","_set","pop","toArray","getStatus","limits","_this3","filters","_this4","error","every","toString","heading","_this5","session","always","load","_this6","process","_flashRuntime","_flashRuntime2","SWF_URL","FlashTriggerCollection","onFiles","overlay","css","position","opacity","left","top","width","height","display","cursor","background","overflow","zIndex","getAccept","current","hideOverlay","appendTo","body","trigger","rect","getBoundingClientRect","Html5TriggerCollection","_createInput","label","input","createElement","attr","clip","mimeTypes","html","append","PickerCollector","triggerCollection","jQuery","_runtime","_runtime2","_transport","_transport2","Html5Runtime","_Runtime","fr","FileReader","timer","onloadend","readyState","DONE","result","readAsDataURL","transport","Blob","mozSlice","webkitSlice","blobSlice","SparkMD5","chunks","Math","ceil","chunk","spark","ArrayBuffer","_loadNext","min","onload","readAsArrayBuffer","guid","uid","toUpperCase","guessExt","RE_EXT","exec","RE_IMAGE","guessType","Progress","total","File","test","lastModified","Date","progress","setPropagationTarget","prevStatus","_dataUrlPromise","getAsDataUrl","_md5Promise","md5","_sessionPromise","_session","_flows","flow","createFileRequest","invoke","upload","getUploading","generate","notify","complete","createFileResponse","cancel","getFlashVersion","version","navigator","plugins","description","e1","ActiveXObject","GetVariable","e2","match","parseFloat","callFlash","movie","functionName","argumentArray","CallFunction","__flash__argumentsToXML","createFlash","swf","callInterface","div","attrs","innerHTML","firstChild","_x4","_again2","prefix","_guid","FlashRuntime","w","offsetWidth","h","offsetHeight","flash","Runtime","uploading","Uploading","getSource","getChunkSize","useChunk","isChunkEnable","getChunkProcessThreads","slots","getActives","reduce","sum","slot","state","readChunk","req","createChunkRequest","getChunkRetries","getContext","completion","getBlob","getTransport","createChunkResponse","Html5Transport","timeoutTimer","xhr","XMLHttpRequest","XDomainRequest","clean","onerror","onprogress","responseText","statusText","open","header","setRequestHeader","formData","FormData","send","FlashTransport","flashRuntime"],"mappings":"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","file":"uploader.js","sourcesContent":["var UXUploader =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _srcContext = __webpack_require__(8);\n\t\n\tvar _srcContext2 = _interopRequireDefault(_srcContext);\n\t\n\tvar _srcEvents = __webpack_require__(2);\n\t\n\tvar _srcEvents2 = _interopRequireDefault(_srcEvents);\n\t\n\tvar _srcStatus = __webpack_require__(3);\n\t\n\tvar _srcStatus2 = _interopRequireDefault(_srcStatus);\n\t\n\texports['default'] = _srcContext2['default'];\n\texports.Events = _srcEvents2['default'];\n\texports.Status = _srcStatus2['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _emitter = __webpack_require__(5);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(11);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _file = __webpack_require__(12);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar PasteCollector = (function () {\n\t    function PasteCollector(context) {\n\t        _classCallCheck(this, PasteCollector);\n\t\n\t        this.context = context;\n\t        this.runtime = _html5Runtime2['default'].getInstance();\n\t    }\n\t\n\t    _createClass(PasteCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            area = area.on ? area : (0, _jquery2['default'])(area);\n\t\n\t            var context = this.context,\n\t                runtime = this.runtime,\n\t                emitter = new _emitter2['default']();\n\t\n\t            var paste = function paste(e) {\n\t                if (e.isDefaultPrevented()) {\n\t                    return;\n\t                }\n\t\n\t                var clipboardData = (e.originalEvent || e).clipboardData,\n\t                    items = clipboardData.items,\n\t                    files = clipboardData.files;\n\t\n\t                try {\n\t                    if (!items && !files || clipboardData.getData('text/html')) {\n\t                        return;\n\t                    }\n\t                } catch (ex) {}\n\t\n\t                var prevent = undefined,\n\t                    i = undefined,\n\t                    l = undefined,\n\t                    file = undefined,\n\t                    item = undefined;\n\t\n\t                if (files && files.length) {\n\t                    // safari has files\n\t                    prevent = files.length > 0;\n\t                    for (i = 0, l = files.length; i < l && !context.isLimit(); i++) {\n\t                        file = new _file2['default'](runtime, files[i]);\n\t\n\t                        prevent = 1;\n\t\n\t                        if (context.add(file) && !context.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                } else if (items && items.length) {\n\t                    // chrome has items\n\t                    var filename = clipboardData.getData('text/plain');\n\t                    for (i = 0, l = items.length; i < l && !context.isLimit(); i++) {\n\t                        item = items[i];\n\t\n\t                        if (item.kind !== 'file' || !(file = item.getAsFile())) {\n\t                            continue;\n\t                        }\n\t\n\t                        file = new _file2['default'](runtime, file, filename);\n\t                        filename = null;\n\t\n\t                        prevent = 1;\n\t\n\t                        if (context.add(file) && !context.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                if (prevent) {\n\t                    e.preventDefault();\n\t                    e.stopPropagation();\n\t                    emitter.emit('paste', clipboardData);\n\t                }\n\t            };\n\t\n\t            area.on('paste', paste);\n\t\n\t            emitter.destroy = function () {\n\t                emitter.removeAllListeners();\n\t                area.off('paste', paste);\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }], [{\n\t        key: 'isSupport',\n\t        value: function isSupport() {\n\t            return 'DataTransfer' in window && 'FileList' in window;\n\t        }\n\t    }]);\n\t\n\t    return PasteCollector;\n\t})();\n\t\n\texports['default'] = PasteCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n\t    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n\t    QUEUE_ADD: 'queueadd', // 队列添加了一个文件\n\t    QUEUE_ERROR: 'queueerror', // 队列错误\n\t    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\t\n\t    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n\t    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n\t    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n\t    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n\t    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n\t    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n\t    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n\t    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n\t    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n\t    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n\t    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\t\n\t    FILE_CANCEL: 'filecancel', // 文件退出\n\t    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports['default'] = {\n\t    ALL: 255, // 所有状态\n\t\n\t    PROCESS: 31, // INITED -> END\n\t    INITED: 1, // 初始状态\n\t    QUEUED: 2, // 进入队列\n\t    PENDING: 4, // 队列中等待\n\t    PROGRESS: 8, // 上传中\n\t    END: 16, // 上传完成, 等待后续处理\n\t\n\t    SUCCESS: 32, // 上传成功\n\t    ERROR: 64, // 上传出错\n\t    CANCELLED: 128 // 上传取消 和 queued 相反, 退出队列\n\t};\n\tvar StatusName = {\n\t    1: 'inited',\n\t    2: 'queued',\n\t    4: 'pending',\n\t    8: 'progress',\n\t    16: 'end',\n\t    32: 'success',\n\t    64: 'error',\n\t    128: 'cancelled'\n\t};\n\texports.StatusName = StatusName;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar ChunkResponse = (function () {\n\t    function ChunkResponse(rawResponse, chunkRequest) {\n\t        _classCallCheck(this, ChunkResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.chunkRequest = chunkRequest;\n\t    }\n\t\n\t    _createClass(ChunkResponse, [{\n\t        key: 'getChunkRequest',\n\t        value: function getChunkRequest() {\n\t            return this.chunkRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            return this.response || this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return ChunkResponse;\n\t})();\n\t\n\tvar ChunkRequest = (function () {\n\t    /**\n\t     *\n\t     * @param {int} index\n\t     * @param {Blob} blob\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function ChunkRequest(index, blob, fileRequest) {\n\t        _classCallCheck(this, ChunkRequest);\n\t\n\t        this.index = index;\n\t        this.blob = blob;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(ChunkRequest, [{\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.fileRequest.getName();\n\t        }\n\t    }, {\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.fileRequest.getFile();\n\t        }\n\t    }, {\n\t        key: 'getBlob',\n\t        value: function getBlob() {\n\t            return this.blob;\n\t        }\n\t    }, {\n\t        key: 'getIndex',\n\t        value: function getIndex() {\n\t            return this.index;\n\t        }\n\t    }, {\n\t        key: 'isMultiChunk',\n\t        value: function isMultiChunk() {\n\t            return this.getFile().source !== this.blob;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            if (!this.params) {\n\t                this.params = this.fileRequest.getParams().clone();\n\t            }\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.getParams().setParam(name, value);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || this.fileRequest.getUrl();\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            if (!this.headers) {\n\t                this.headers = this.fileRequest.getHeaders().slice(0);\n\t            }\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            var headers = this.getHeaders();\n\t            headers.push({ name: name, value: value });\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.fileRequest.isWithCredentials();\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.fileRequest.getTimeout();\n\t        }\n\t    }, {\n\t        key: 'createChunkResponse',\n\t        value: function createChunkResponse(response) {\n\t            return new ChunkResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return ChunkRequest;\n\t})();\n\t\n\tvar FileResponse = (function () {\n\t    /**\n\t     * @param {string|ChunkResponse} rawResponse\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function FileResponse(rawResponse, fileRequest) {\n\t        _classCallCheck(this, FileResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        if (rawResponse instanceof ChunkResponse) {\n\t            this.response = rawResponse.getResponse();\n\t            this.fromChunkResponse = true;\n\t        }\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(FileResponse, [{\n\t        key: 'isFromMultiChunkResponse',\n\t        value: function isFromMultiChunkResponse() {\n\t            if (this.fromChunkResponse) {\n\t                return this.rawResponse.getChunkRequest().isMultiChunk();\n\t            }\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            return this.response || this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return FileResponse;\n\t})();\n\t\n\tvar Params = (function () {\n\t    function Params(params) {\n\t        _classCallCheck(this, Params);\n\t\n\t        if (Array.isArray(params)) {\n\t            this.params = params.slice(0);\n\t        } else if (typeof params === 'object') {\n\t            this.params = [];\n\t            for (var _name in params) {\n\t                if (params.hasOwnProperty(_name)) {\n\t                    this.params.push({ name: _name, value: params[_name] });\n\t                }\n\t            }\n\t        } else {\n\t            this.params = [];\n\t        }\n\t    }\n\t\n\t    _createClass(Params, [{\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.removeParam(name);\n\t            this.addParam(name, value);\n\t        }\n\t    }, {\n\t        key: 'addParam',\n\t        value: function addParam(name, value) {\n\t            this.params.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'removeParam',\n\t        value: function removeParam(name) {\n\t            this.params = this.params.filter(function (param) {\n\t                return param.name !== name;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name, single) {\n\t            var ret = this.params.filter(function (param) {\n\t                return param.name === name;\n\t            }).map(function (param) {\n\t                return param.value;\n\t            });\n\t\n\t            if (single) {\n\t                return ret.shift();\n\t            }\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'clone',\n\t        value: function clone() {\n\t            return new Params(this.params);\n\t        }\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'toString',\n\t        value: function toString() {\n\t            var params = this.params.map(function (param) {\n\t                return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n\t            });\n\t\n\t            return params.join('&'); //.replace( /%20/g, '+');\n\t        }\n\t    }]);\n\t\n\t    return Params;\n\t})();\n\t\n\tvar MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\t\n\tvar FileRequest = (function () {\n\t    function FileRequest(file) {\n\t        var options = arguments[1] === undefined ? {} : arguments[1];\n\t\n\t        _classCallCheck(this, FileRequest);\n\t\n\t        this.file = file;\n\t        this.name = options.name || 'file';\n\t        this.url = options.url;\n\t        this.params = new Params(options.params);\n\t        this.headers = options.headers || [];\n\t        this.withCredentials = options.withCredentials;\n\t        this.timeout = options.timeout || 0;\n\t        this.chunkSize = options.chunkSize || 0;\n\t        this.chunkRetries = options.chunkRetries || 0;\n\t        this.chunkEnable = options.chunkEnable || false;\n\t        this.chunkProcessThreads = options.chunkProcessThreads || 0;\n\t    }\n\t\n\t    _createClass(FileRequest, [{\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.file;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || '';\n\t        }\n\t    }, {\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.name;\n\t        }\n\t    }, {\n\t        key: 'setName',\n\t        value: function setName(name) {\n\t            this.name = name;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.params.setParam(name, value);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            this.headers.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.withCredentials;\n\t        }\n\t    }, {\n\t        key: 'setWithCredentials',\n\t        value: function setWithCredentials(flag) {\n\t            this.withCredentials = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.timeout;\n\t        }\n\t    }, {\n\t        key: 'setTimeout',\n\t        value: function setTimeout(timeout) {\n\t            this.timeout = timeout;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkSize',\n\t        value: function getChunkSize() {\n\t            return this.chunkSize;\n\t        }\n\t    }, {\n\t        key: 'setChunkSize',\n\t        value: function setChunkSize(chunkSize) {\n\t            this.chunkSize = chunkSize;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkRetries',\n\t        value: function getChunkRetries() {\n\t            return this.chunkRetries;\n\t        }\n\t    }, {\n\t        key: 'setChunkRetries',\n\t        value: function setChunkRetries(retries) {\n\t            this.chunkRetries = retries;\n\t            return 0;\n\t        }\n\t    }, {\n\t        key: 'isChunkEnable',\n\t        value: function isChunkEnable() {\n\t            return this.chunkEnable && this.chunkSize > MIN_CHUNK_SIZE && this.file.getRuntime().canSlice() && this.file.size > this.chunkSize;\n\t        }\n\t    }, {\n\t        key: 'setChunkEnable',\n\t        value: function setChunkEnable(flag) {\n\t            this.chunkEnable = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkProcessThreads',\n\t        value: function getChunkProcessThreads() {\n\t            return this.chunkProcessThreads;\n\t        }\n\t    }, {\n\t        key: 'setChunkProcessThreads',\n\t        value: function setChunkProcessThreads(threads) {\n\t            this.chunkProcessThreads = threads;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'createChunkRequest',\n\t        value: function createChunkRequest(index, blob) {\n\t            return new ChunkRequest(index, blob, this);\n\t        }\n\t    }, {\n\t        key: 'createFileResponse',\n\t        value: function createFileResponse(response) {\n\t            return new FileResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return FileRequest;\n\t})();\n\t\n\texports['default'] = FileRequest;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar Emitter = (function () {\n\t    function Emitter() {\n\t        _classCallCheck(this, Emitter);\n\t    }\n\t\n\t    _createClass(Emitter, [{\n\t        key: 'on',\n\t        value: function on(event, listener) {\n\t            event = event.toLowerCase();\n\t            if (!this._events) {\n\t                this._events = {};\n\t            }\n\t\n\t            if (!this._events[event]) {\n\t                this._events[event] = [];\n\t            }\n\t\n\t            this._events[event].push(listener);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'once',\n\t        value: function once(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var that = this;\n\t\n\t            function fn() {\n\t                that.off(event, fn);\n\t                listener.apply(this, arguments);\n\t            }\n\t\n\t            fn.listener = listener;\n\t\n\t            this.on(event, fn);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'off',\n\t        value: function off(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                return this;\n\t            }\n\t\n\t            var i = listeners.length;\n\t            while (i-- > 0) {\n\t                if (listeners[i] === listener || listeners[i].listener === listener) {\n\t                    listeners.splice(i, 1);\n\t                    break;\n\t                }\n\t            }\n\t\n\t            if (listeners.length === 0) {\n\t                delete this._events[event];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'removeAllListeners',\n\t        value: function removeAllListeners(event) {\n\t            if (!event) {\n\t                this._events = [];\n\t            } else {\n\t                delete this._events[event.toLowerCase()];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setPropagationTarget',\n\t        value: function setPropagationTarget(emitter) {\n\t            if (emitter instanceof Emitter) {\n\t                this.propagationTarget = emitter;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'emit',\n\t        value: function emit(event) {\n\t            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t                args[_key - 1] = arguments[_key];\n\t            }\n\t\n\t            this.applyEmit(event, args);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'applyEmit',\n\t        value: function applyEmit(event, args) {\n\t            var _this = this;\n\t\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (this._events && (listeners = this._events[event])) {\n\t                listeners.slice(0).forEach(function (fn) {\n\t                    return fn.apply(_this, args);\n\t                });\n\t            }\n\t\n\t            if (this.propagationTarget) {\n\t                var pArgs = args.slice(0);\n\t                pArgs.unshift(this);\n\t                this.propagationTarget.applyEmit(event, pArgs);\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'invoke',\n\t        value: function invoke(event, data) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                listeners = [];\n\t            }\n\t\n\t            return HookInvoker(listeners.slice(0), data, this);\n\t        }\n\t    }]);\n\t\n\t    return Emitter;\n\t})();\n\t\n\texports['default'] = Emitter;\n\t\n\tfunction HookInvoker(hooks, initialData, context) {\n\t    var _data = initialData;\n\t    var _error = null;\n\t    var _aborted = undefined;\n\t\n\t    var i = (0, _jquery.Deferred)();\n\t    var ret = i.promise();\n\t\n\t    ret.abort = function () {\n\t        _aborted = true;\n\t    };\n\t\n\t    var fail = function fail(e) {\n\t        if (_aborted) return;\n\t        if (e) {\n\t            _error = e instanceof Error ? e : new Error(e);\n\t        }\n\t        i.reject(_error || new Error('Unknown'));\n\t    };\n\t\n\t    var done = function done() {\n\t        if (_aborted) return;\n\t        if (_error != null) {\n\t            fail();\n\t        } else {\n\t            i.resolve(_data);\n\t        }\n\t    };\n\t\n\t    var setData = function setData(data) {\n\t        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n\t            _data = data;\n\t        }\n\t    };\n\t\n\t    var next = function next(data) {\n\t        if (_aborted) return;\n\t\n\t        if (data instanceof Error) {\n\t            _error = data;\n\t        }\n\t\n\t        if (_error != null) {\n\t            return fail();\n\t        }\n\t\n\t        setData(data);\n\t\n\t        var hook = hooks.shift();\n\t        if (!hook) {\n\t            return done();\n\t        }\n\t        var res = undefined;\n\t        try {\n\t            res = hook.call(context, _data);\n\t        } catch (e) {\n\t            return fail(e);\n\t        }\n\t\n\t        if (res && res.then) {\n\t            res.then(next, fail);\n\t        } else {\n\t            next(res);\n\t        }\n\t    };\n\t\n\t    setTimeout(next, 1);\n\t\n\t    return ret;\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar AbortError = (function (_Error) {\n\t    function AbortError(message) {\n\t        _classCallCheck(this, AbortError);\n\t\n\t        _get(Object.getPrototypeOf(AbortError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'AbortError';\n\t    }\n\t\n\t    _inherits(AbortError, _Error);\n\t\n\t    return AbortError;\n\t})(Error);\n\t\n\texports.AbortError = AbortError;\n\t\n\tvar TimeoutError = (function (_Error2) {\n\t    function TimeoutError(message) {\n\t        _classCallCheck(this, TimeoutError);\n\t\n\t        _get(Object.getPrototypeOf(TimeoutError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'TimeoutError';\n\t    }\n\t\n\t    _inherits(TimeoutError, _Error2);\n\t\n\t    return TimeoutError;\n\t})(Error);\n\t\n\texports.TimeoutError = TimeoutError;\n\t\n\tvar NetworkError = (function (_Error3) {\n\t    function NetworkError(status, message) {\n\t        _classCallCheck(this, NetworkError);\n\t\n\t        _get(Object.getPrototypeOf(NetworkError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'NetworkError';\n\t        this.status = status;\n\t    }\n\t\n\t    _inherits(NetworkError, _Error3);\n\t\n\t    return NetworkError;\n\t})(Error);\n\t\n\texports.NetworkError = NetworkError;\n\t\n\tvar QueueLimitError = (function (_Error4) {\n\t    function QueueLimitError() {\n\t        _classCallCheck(this, QueueLimitError);\n\t\n\t        _get(Object.getPrototypeOf(QueueLimitError.prototype), 'constructor', this).call(this, 'queue limit');\n\t        this.name = 'QueueLimitError';\n\t    }\n\t\n\t    _inherits(QueueLimitError, _Error4);\n\t\n\t    return QueueLimitError;\n\t})(Error);\n\t\n\texports.QueueLimitError = QueueLimitError;\n\t\n\tvar FilterError = (function (_Error5) {\n\t    function FilterError(file, message) {\n\t        _classCallCheck(this, FilterError);\n\t\n\t        _get(Object.getPrototypeOf(FilterError.prototype), 'constructor', this).call(this, message);\n\t        this.name = 'FilterError';\n\t        this.file = file;\n\t    }\n\t\n\t    _inherits(FilterError, _Error5);\n\t\n\t    return FilterError;\n\t})(Error);\n\t\n\texports.FilterError = FilterError;\n\t\n\tvar DuplicateError = (function (_FilterError) {\n\t    function DuplicateError(file, message) {\n\t        _classCallCheck(this, DuplicateError);\n\t\n\t        _get(Object.getPrototypeOf(DuplicateError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'DuplicateError';\n\t    }\n\t\n\t    _inherits(DuplicateError, _FilterError);\n\t\n\t    return DuplicateError;\n\t})(FilterError);\n\t\n\texports.DuplicateError = DuplicateError;\n\t\n\tvar FileExtensionError = (function (_FilterError2) {\n\t    function FileExtensionError(file, message) {\n\t        _classCallCheck(this, FileExtensionError);\n\t\n\t        _get(Object.getPrototypeOf(FileExtensionError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'FileExtensionError';\n\t    }\n\t\n\t    _inherits(FileExtensionError, _FilterError2);\n\t\n\t    return FileExtensionError;\n\t})(FilterError);\n\t\n\texports.FileExtensionError = FileExtensionError;\n\t\n\tvar FileSizeError = (function (_FilterError3) {\n\t    function FileSizeError(file, message) {\n\t        _classCallCheck(this, FileSizeError);\n\t\n\t        _get(Object.getPrototypeOf(FileSizeError.prototype), 'constructor', this).call(this, file, message);\n\t        this.name = 'FileSizeError';\n\t    }\n\t\n\t    _inherits(FileSizeError, _FilterError3);\n\t\n\t    return FileSizeError;\n\t})(FilterError);\n\t\n\texports.FileSizeError = FileSizeError;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _emitter = __webpack_require__(5);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(11);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _file = __webpack_require__(12);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tfunction createReader(collector) {\n\t    function reader(dataTransfer, responders) {\n\t        var items = dataTransfer.items,\n\t            files = dataTransfer.files,\n\t            item;\n\t\n\t        for (var i = 0, l = files.length; i < l; i++) {\n\t            item = items && items[i];\n\t\n\t            var entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\t\n\t            if (entry && entry.isDirectory) {\n\t                readEntry(entry, responders);\n\t            } else {\n\t                collector(files[i], responders);\n\t            }\n\t        }\n\t    }\n\t    function readEntry(entry, responders) {\n\t        if (entry.isFile) {\n\t            entry.file(function (file) {\n\t                return collector(file, responders);\n\t            });\n\t        } else if (entry.isDirectory) {\n\t            entry.createReader().readEntries(function (entries) {\n\t                for (var i = 0, l = entries.length; i < l; i++) {\n\t                    readEntry(entries[i], responders);\n\t                }\n\t            });\n\t        }\n\t    }\n\t    return reader;\n\t}\n\t\n\tvar Area = (function (_Emitter) {\n\t    function Area(area) {\n\t        _classCallCheck(this, Area);\n\t\n\t        _get(Object.getPrototypeOf(Area.prototype), 'constructor', this).call(this);\n\t\n\t        this.areaElement = area;\n\t    }\n\t\n\t    _inherits(Area, _Emitter);\n\t\n\t    _createClass(Area, [{\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areaElement.contains(target);\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e, allowed) {\n\t            this.emit('start', e, allowed);\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e, allowed) {\n\t            allowed = allowed && this.contains(e.target);\n\t            this.emit('response', e, allowed);\n\t            return allowed;\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.emit('end', e);\n\t        }\n\t    }]);\n\t\n\t    return Area;\n\t})(_emitter2['default']);\n\t\n\tvar Collectors = [];\n\t\n\tfunction prepare() {\n\t    var $doc = (0, _jquery2['default'])(document),\n\t        runtime = _html5Runtime2['default'].getInstance();\n\t\n\t    var started = 0,\n\t        enter = 0,\n\t        endTimer = undefined;\n\t    var dataTransferReader = createReader(function (file, responders) {\n\t        if (!responders || responders.length < 1) {\n\t            return;\n\t        }\n\t        file = new _file2['default'](runtime, file);\n\t        responders.some(function (responder) {\n\t            return responder.recieve(file);\n\t        });\n\t    });\n\t\n\t    var start = function start(e) {\n\t        started = 1;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.start(e);\n\t        });\n\t    };\n\t\n\t    var move = function move(e) {\n\t        var allowed = Collectors.filter(function (responder) {\n\t            return responder.response(e);\n\t        });\n\t\n\t        var dataTransfer = (e.originalEvent || e).dataTransfer;\n\t\n\t        if (dataTransfer) {\n\t            dataTransfer.dropEffect = allowed.length ? 'copy' : 'none';\n\t        }\n\t        e.preventDefault();\n\t    };\n\t\n\t    var end = function end(e) {\n\t        started = 0;\n\t        enter = 0;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.end(e);\n\t        });\n\t    };\n\t\n\t    var drag = function drag(e) {\n\t        clearTimeout(endTimer);\n\t        var isLeave = e.type === 'dragleave';\n\t        if (!isLeave && !started) {\n\t            start(e);\n\t        }\n\t        move(e);\n\t        if (isLeave) {\n\t            endTimer = setTimeout(function () {\n\t                return end(e);\n\t            }, 100);\n\t        }\n\t    };\n\t    var drop = function drop(e) {\n\t        e.preventDefault();\n\t\n\t        clearTimeout(endTimer);\n\t        end(e);\n\t\n\t        var responders = Collectors.filter(function (responder) {\n\t            return responder.contains(e.target);\n\t        });\n\t\n\t        if (responders.length < 1) {\n\t            return;\n\t        }\n\t\n\t        var dataTransfer = (e.originalEvent || e).dataTransfer;\n\t\n\t        try {\n\t            if (dataTransfer.getData('text/html')) {\n\t                return;\n\t            }\n\t        } catch (ex) {}\n\t\n\t        dataTransferReader(dataTransfer, responders);\n\t    };\n\t\n\t    $doc.on('dragenter dragover dragleave', drag);\n\t    $doc.on('drop', drop);\n\t}\n\t\n\tvar DndCollector = (function () {\n\t    function DndCollector(context) {\n\t        _classCallCheck(this, DndCollector);\n\t\n\t        if (Collectors.length < 1) {\n\t            prepare();\n\t        }\n\t        Collectors.push(this);\n\t\n\t        this.context = context;\n\t        this.areas = [];\n\t    }\n\t\n\t    _createClass(DndCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            var _this = this;\n\t\n\t            area = new Area(area);\n\t            this.areas.push(area);\n\t            area.destroy = function () {\n\t                area.removeAllListeners();\n\t                var i = _this.areas.indexOf(area);\n\t                if (i > -1) {\n\t                    _this.areas.splice(i, 1);\n\t                }\n\t            };\n\t\n\t            return area;\n\t        }\n\t    }, {\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areas.some(function (area) {\n\t                return area.contains(target);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e) {\n\t            var allowed = !this.context.isLimit();\n\t            this.areas.forEach(function (area) {\n\t                return area.start(e, allowed);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e) {\n\t            var allowed = !this.context.isLimit(),\n\t                res = this.areas.map(function (area) {\n\t                return area.response(e, allowed);\n\t            });\n\t            return allowed && res.some(function (r) {\n\t                return !!r;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'recieve',\n\t        value: function recieve(file) {\n\t            return this.context.add(file);\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.end(e);\n\t            });\n\t        }\n\t    }], [{\n\t        key: 'isSupport',\n\t        value: function isSupport() {\n\t            return 'DataTransfer' in window && 'FileList' in window;\n\t        }\n\t    }]);\n\t\n\t    return DndCollector;\n\t})();\n\t\n\texports['default'] = DndCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(5);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(2);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _status = __webpack_require__(3);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _filerequest = __webpack_require__(4);\n\t\n\tvar _filerequest2 = _interopRequireDefault(_filerequest);\n\t\n\tvar _collectorDnd = __webpack_require__(7);\n\t\n\tvar _collectorDnd2 = _interopRequireDefault(_collectorDnd);\n\t\n\tvar _collectorPaste = __webpack_require__(1);\n\t\n\tvar _collectorPaste2 = _interopRequireDefault(_collectorPaste);\n\t\n\tvar _collectorPicker = __webpack_require__(9);\n\t\n\tvar _collectorPicker2 = _interopRequireDefault(_collectorPicker);\n\t\n\tvar Context = (function (_Emitter) {\n\t    function Context(options) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, Context);\n\t\n\t        _get(Object.getPrototypeOf(Context.prototype), 'constructor', this).call(this);\n\t\n\t        var processThreads = options.processThreads;\n\t        var autoPending = options.autoPending;\n\t        var queueCapcity = options.queueCapcity;\n\t        var accept = options.accept;\n\t        var sizeLimit = options.sizeLimit;\n\t        var preventDuplicate = options.preventDuplicate;\n\t        var multiple = options.multiple;\n\t\n\t        this.stat = new Stat();\n\t        this.limiter = new Limiter();\n\t        this.filter = new Filter();\n\t        this.accept = accept;\n\t        this.autoPending = autoPending;\n\t        this.multiple = multiple == null ? true : multiple;\n\t        this.pending = new Pending(processThreads);\n\t\n\t        if (queueCapcity && queueCapcity > 0) {\n\t            this.addLimit(function () {\n\t                return _this.stat.getTotal() >= queueCapcity;\n\t            });\n\t        }\n\t\n\t        if (accept && accept.length > 0) {\n\t            this.addFilter(function (file) {\n\t                if (!accept) {\n\t                    return;\n\t                }\n\t                var allowed = accept.some(function (item) {\n\t                    return item.extensions && item.extensions.split(',').indexOf(file.ext) > -1;\n\t                });\n\t                if (allowed) {\n\t                    return;\n\t                }\n\t                return new _errors.FileExtensionError(file, file.ext + ' is not allowed.');\n\t            });\n\t        }\n\t\n\t        if (sizeLimit && sizeLimit > 0) {\n\t            this.addFilter(function (file) {\n\t                if (file.size > sizeLimit) {\n\t                    return new _errors.FileSizeError(file, file.size + ' is greater than limit:' + sizeLimit);\n\t                }\n\t            });\n\t        }\n\t\n\t        if (preventDuplicate) {\n\t            this.addFilter(function (file) {\n\t                var has = _this.stat.getFiles().some(function (item) {\n\t                    return item.name === file.name && item.size === file.size;\n\t                });\n\t                if (has) {\n\t                    return new _errors.DuplicateError(file, file.name + ' already in queue');\n\t                }\n\t            });\n\t        }\n\t\n\t        this.requestOptions = options.request || {};\n\t    }\n\t\n\t    _inherits(Context, _Emitter);\n\t\n\t    _createClass(Context, [{\n\t        key: 'createFileRequest',\n\t        value: function createFileRequest(file) {\n\t            return new _filerequest2['default'](file, this.requestOptions);\n\t        }\n\t    }, {\n\t        key: 'isLimit',\n\t        value: function isLimit() {\n\t            return this.limiter.isLimit();\n\t        }\n\t    }, {\n\t        key: 'addLimit',\n\t        value: function addLimit(limit) {\n\t            return this.limiter.add(limit);\n\t        }\n\t    }, {\n\t        key: 'addFilter',\n\t        value: function addFilter(filter) {\n\t            return this.filter.add(filter);\n\t        }\n\t    }, {\n\t        key: 'isAllow',\n\t        value: function isAllow(file) {\n\t            return this.filter.filter(file);\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this2 = this;\n\t\n\t            if (this.isLimit()) {\n\t                this.emit(_events2['default'].QUEUE_ERROR, new _errors.QueueLimitError());\n\t                return false;\n\t            }\n\t\n\t            if (!this.isAllow(file)) {\n\t                this.emit(_events2['default'].QUEUE_ERROR, this.filter.getError());\n\t                return false;\n\t            }\n\t\n\t            if (!this.stat.add(file)) {\n\t                this.emit(_events2['default'].QUEUE_ERROR, new _errors.DuplicateError(file, file.name + ' already in queue'));\n\t                return false;\n\t            }\n\t\n\t            file.setContext(this);\n\t            file.setStatus(_status2['default'].QUEUED);\n\t\n\t            file.on(_events2['default'].FILE_STATUS_CHANGE, function (status) {\n\t                if (status === _status2['default'].CANCELLED) {\n\t                    _this2.stat.remove(file);\n\t                } else if (status === _status2['default'].PENDING) {\n\t                    setTimeout(function () {\n\t                        if (_this2.pending.add(file) && _this2.pending.size() === 1) {\n\t                            _this2.emit(_events2['default'].QUEUE_UPLOAD_START);\n\t                        }\n\t                    }, 1);\n\t                }\n\t\n\t                _this2.emit(_events2['default'].QUEUE_STAT_CHANGE, _this2.stat);\n\t\n\t                if (_this2.stat.getFiles(_status2['default'].PROCESS).length < 1) {\n\t                    _this2.emit(_events2['default'].QUEUE_UPLOAD_END);\n\t                }\n\t            });\n\t\n\t            this.emit(_events2['default'].QUEUE_ADD, file);\n\t\n\t            this.emit(_events2['default'].QUEUE_STAT_CHANGE, this.stat);\n\t\n\t            if (this.autoPending) {\n\t                file.pending();\n\t            }\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'setAutoPending',\n\t\n\t        /**\n\t         * 设置自动上传\n\t         *\n\t         * @param {Boolean} flag\n\t         */\n\t        value: function setAutoPending(flag) {\n\t            this.autoPending = flag;\n\t            if (this.autoPending) {\n\t                this.stat.getFiles(_status2['default'].QUEUED).forEach(function (file) {\n\t                    return file.pending();\n\t                });\n\t            }\n\t        }\n\t    }, {\n\t        key: 'setMultiple',\n\t\n\t        /**\n\t         * 设置是否多选上传\n\t         *\n\t         * @param {Boolean} flag\n\t         */\n\t        value: function setMultiple(flag) {\n\t            this.multiple = flag;\n\t        }\n\t    }, {\n\t        key: 'isMultiple',\n\t        value: function isMultiple() {\n\t            return this.multiple;\n\t        }\n\t    }, {\n\t        key: 'getAccept',\n\t        value: function getAccept() {\n\t            return this.accept;\n\t        }\n\t    }, {\n\t        key: 'getStat',\n\t        value: function getStat() {\n\t            return this.stat;\n\t        }\n\t    }, {\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            _collectorPicker2['default'].setSWF(url);\n\t        }\n\t    }, {\n\t        key: 'getPickerCollector',\n\t        value: function getPickerCollector() {\n\t            if (!this.picker) {\n\t                this.picker = new _collectorPicker2['default'](this);\n\t            }\n\t            return this.picker;\n\t        }\n\t    }, {\n\t        key: 'getDndCollector',\n\t        value: function getDndCollector() {\n\t            if (!this.dnd) {\n\t                this.dnd = new _collectorDnd2['default'](this);\n\t            }\n\t            return this.dnd;\n\t        }\n\t    }, {\n\t        key: 'getPasteCollector',\n\t        value: function getPasteCollector() {\n\t            if (!this.paster) {\n\t                this.paster = new _collectorPaste2['default'](this);\n\t            }\n\t            return this.paster;\n\t        }\n\t    }]);\n\t\n\t    return Context;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = Context;\n\t\n\tvar Set = (function () {\n\t    function Set() {\n\t        _classCallCheck(this, Set);\n\t\n\t        this._set = [];\n\t    }\n\t\n\t    _createClass(Set, [{\n\t        key: 'size',\n\t\n\t        /**\n\t         * 项目总数\n\t         *\n\t         * @returns {Number}\n\t         */\n\t        get: function () {\n\t            return this._set.length;\n\t        }\n\t    }, {\n\t        key: 'shift',\n\t\n\t        /**\n\t         * 从头部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t        value: function shift() {\n\t            return this._set.shift();\n\t        }\n\t    }, {\n\t        key: 'pop',\n\t\n\t        /**\n\t         * 从尾部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t        value: function pop() {\n\t            return this._set.pop();\n\t        }\n\t    }, {\n\t        key: 'toArray',\n\t\n\t        /**\n\t         * 获得所有项\n\t         *\n\t         * @returns {Array}\n\t         */\n\t        value: function toArray() {\n\t            return this._set.slice(0);\n\t        }\n\t    }, {\n\t        key: 'add',\n\t\n\t        /**\n\t         * 添加一项\n\t         *\n\t         * @param item\n\t         * @returns {boolean} success if true\n\t         */\n\t        value: function add(item) {\n\t            if (this.has(item)) {\n\t                return false;\n\t            }\n\t            this._set.push(item);\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'has',\n\t\n\t        /**\n\t         * 是否存在该项\n\t         *\n\t         * @param item\n\t         * @returns {boolean}\n\t         */\n\t        value: function has(item) {\n\t            return this._set.indexOf(item) > -1;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t\n\t        /**\n\t         * 删除某项\n\t         *\n\t         * @returns {boolean} success if true\n\t         */\n\t        value: function remove(item) {\n\t            var i = this._set.indexOf(item);\n\t            if (i > -1) {\n\t                this._set.splice(i, 1);\n\t                return true;\n\t            }\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'clear',\n\t\n\t        /**\n\t         * 清空\n\t         */\n\t        value: function clear() {\n\t            this._set = [];\n\t        }\n\t    }]);\n\t\n\t    return Set;\n\t})();\n\t\n\tvar Stat = (function () {\n\t    function Stat() {\n\t        _classCallCheck(this, Stat);\n\t\n\t        this.files = new Set();\n\t    }\n\t\n\t    _createClass(Stat, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            return this.files.add(file);\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(file) {\n\t            this.files.remove(file);\n\t        }\n\t    }, {\n\t        key: 'getTotal',\n\t        value: function getTotal() {\n\t            return this.files.size;\n\t        }\n\t    }, {\n\t        key: 'getFiles',\n\t        value: function getFiles(flag) {\n\t            var files = this.files.toArray();\n\t            if (!flag) {\n\t                return files;\n\t            }\n\t            return files.filter(function (file) {\n\t                return !!(file.getStatus() & flag);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'stat',\n\t        value: function stat(flag) {\n\t            var stat = {},\n\t                files = this.getFiles(flag);\n\t\n\t            files.forEach(function (file) {\n\t                var status = file.getStatus();\n\t                stat[status] = status in stat ? stat[status] + 1 : 1;\n\t            });\n\t\n\t            stat['sum'] = files.length;\n\t\n\t            return stat;\n\t        }\n\t    }]);\n\t\n\t    return Stat;\n\t})();\n\t\n\tvar Limiter = (function () {\n\t    function Limiter() {\n\t        _classCallCheck(this, Limiter);\n\t\n\t        this.limits = new Set();\n\t    }\n\t\n\t    _createClass(Limiter, [{\n\t        key: 'add',\n\t        value: function add(limit) {\n\t            this.limits.add(limit);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(limit) {\n\t            this.limits.remove(limit);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'isLimit',\n\t        value: function isLimit() {\n\t            var _this3 = this;\n\t\n\t            return this.limits.toArray().some(function (fn) {\n\t                return fn.call(_this3);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Limiter;\n\t})();\n\t\n\tvar Filter = (function () {\n\t    function Filter() {\n\t        _classCallCheck(this, Filter);\n\t\n\t        this.filters = new Set();\n\t    }\n\t\n\t    _createClass(Filter, [{\n\t        key: 'add',\n\t        value: function add(filter) {\n\t            this.filters.add(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(filter) {\n\t            this.filters.remove(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'filter',\n\t        value: function filter(file) {\n\t            var _this4 = this;\n\t\n\t            this.error = null;\n\t            return this.filters.toArray().every(function (filter) {\n\t                var ret = undefined;\n\t                try {\n\t                    ret = filter(file);\n\t                } catch (e) {\n\t                    ret = e;\n\t                }\n\t                if (typeof ret === 'string') {\n\t                    _this4.error = new FilterError(file, ret);\n\t                    return false;\n\t                } else if (ret instanceof Error) {\n\t                    _this4.error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n\t                    return false;\n\t                }\n\t                return true;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'getError',\n\t        value: function getError() {\n\t            return this.error;\n\t        }\n\t    }]);\n\t\n\t    return Filter;\n\t})();\n\t\n\tvar Pending = (function () {\n\t    function Pending(threads) {\n\t        _classCallCheck(this, Pending);\n\t\n\t        this.threads = threads || 2;\n\t        this.heading = new Set();\n\t        this.pending = new Set();\n\t    }\n\t\n\t    _createClass(Pending, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this5 = this;\n\t\n\t            if (!this.pending.add(file)) return false;\n\t\n\t            file.session().always(function () {\n\t                return _this5.pending.remove(file);\n\t            });\n\t\n\t            this.load();\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'size',\n\t        value: function size() {\n\t            return this.pending.size + this.heading.size;\n\t        }\n\t    }, {\n\t        key: 'process',\n\t        value: function process(file) {\n\t            var _this6 = this;\n\t\n\t            if (!this.heading.add(file)) return;\n\t\n\t            file.session().always(function () {\n\t                _this6.heading.remove(file);\n\t                _this6.load();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'load',\n\t        value: function load() {\n\t            var file;\n\t            while (this.heading.size < this.threads && (file = this.pending.shift())) {\n\t                if (file.prepare()) {\n\t                    this.process(file);\n\t                }\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return Pending;\n\t})();\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _emitter = __webpack_require__(5);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _html5Runtime = __webpack_require__(11);\n\t\n\tvar _html5Runtime2 = _interopRequireDefault(_html5Runtime);\n\t\n\tvar _flashRuntime = __webpack_require__(13);\n\t\n\tvar _flashRuntime2 = _interopRequireDefault(_flashRuntime);\n\t\n\tvar _file = __webpack_require__(12);\n\t\n\tvar _file2 = _interopRequireDefault(_file);\n\t\n\tvar SWF_URL = '';\n\t\n\tvar FlashTriggerCollection = (function () {\n\t    function FlashTriggerCollection(context, onFiles) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, FlashTriggerCollection);\n\t\n\t        var overlay = (0, _jquery2['default'])('<label></label>');\n\t        overlay.css({\n\t            position: 'fixed',\n\t            opacity: 0,\n\t            left: -100,\n\t            top: -100,\n\t            width: 50,\n\t            height: 50,\n\t            display: 'block',\n\t            cursor: 'pointer',\n\t            background: '#fff',\n\t            overflow: 'hidden',\n\t            zIndex: 99999\n\t        });\n\t        var runtime = new _flashRuntime2['default'](overlay, SWF_URL, function () {\n\t            return {\n\t                accept: context.getAccept(),\n\t                multiple: context.isMultiple()\n\t            };\n\t        });\n\t\n\t        runtime.on('select', function (e) {\n\t            onFiles(e.files, runtime);\n\t            _this.current && _this.current.emit('files', e.files, runtime);\n\t        });\n\t\n\t        runtime.on('rollOut', function () {\n\t            return _this.hideOverlay();\n\t        });\n\t        this.overlay = overlay.appendTo(document.body);\n\t    }\n\t\n\t    _createClass(FlashTriggerCollection, [{\n\t        key: 'hideOverlay',\n\t        value: function hideOverlay() {\n\t            this.overlay.css({\n\t                left: -100,\n\t                top: -100,\n\t                width: 50,\n\t                height: 50\n\t            });\n\t            if (this.current) {\n\t                this.current.emit('rollOut');\n\t                this.current = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            var _this2 = this;\n\t\n\t            var overlay = this.overlay,\n\t                emitter = new _emitter2['default']();\n\t            trigger = trigger.on ? trigger : (0, _jquery2['default'])(trigger);\n\t            trigger.on('mouseover.flashpicker', function () {\n\t                var rect = this.getBoundingClientRect();\n\t                overlay.css({\n\t                    left: rect.left,\n\t                    top: rect.top,\n\t                    width: rect.width,\n\t                    height: rect.height\n\t                });\n\t                emitter.emit('rollOver');\n\t                if (this.current && this.current !== emitter) {\n\t                    this.current.emit('rollOut');\n\t                }\n\t                this.current = emitter;\n\t            });\n\t\n\t            emitter.destroy = function () {\n\t                if (_this2.current === emitter) {\n\t                    _this2.hideOverlay();\n\t                }\n\t                emitter.removeAllListeners();\n\t                trigger.off('mouseover.flashpicker');\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return FlashTriggerCollection;\n\t})();\n\t\n\tvar Html5TriggerCollection = (function () {\n\t    function Html5TriggerCollection(context, onFiles) {\n\t        var _this3 = this;\n\t\n\t        _classCallCheck(this, Html5TriggerCollection);\n\t\n\t        var runtime = _html5Runtime2['default'].getInstance();\n\t\n\t        this._createInput = function (label) {\n\t            var input = (0, _jquery2['default'])(document.createElement('input'));\n\t\n\t            input.attr('type', 'file');\n\t            input.css({\n\t                position: 'absolute',\n\t                clip: 'rect(1px 1px 1px 1px)'\n\t            });\n\t\n\t            var accept = context.getAccept();\n\t            if (accept && accept.length > 0) {\n\t                accept = accept.map(function (item) {\n\t                    return item.mimeTypes;\n\t                });\n\t\n\t                input.attr('accept', accept.join(','));\n\t            }\n\t            if (context.isMultiple()) {\n\t                input.attr('multiple', 'multiple');\n\t            }\n\t\n\t            input.on('change', function (e) {\n\t                onFiles(e.target.files, runtime);\n\t                input.remove();\n\t                _this3._createInput(label);\n\t            });\n\t            label.html(input);\n\t        };\n\t    }\n\t\n\t    _createClass(Html5TriggerCollection, [{\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            var label = (0, _jquery2['default'])('<label></label>'),\n\t                emitter = new _emitter2['default']();\n\t            label.css({\n\t                position: 'absolute',\n\t                opacity: 0,\n\t                top: 0, left: 0,\n\t                width: '100%',\n\t                height: '100%',\n\t                display: 'inline-block',\n\t                cursor: 'pointer',\n\t                background: '#fff',\n\t                overflow: 'hidden'\n\t            });\n\t            this._createInput(label);\n\t            trigger = trigger.append ? trigger : (0, _jquery2['default'])(trigger);\n\t            trigger.append(label);\n\t\n\t            emitter.destroy = function () {\n\t                emitter.removeAllListeners();\n\t                label.remove();\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return Html5TriggerCollection;\n\t})();\n\t\n\tvar PickerCollector = (function () {\n\t    function PickerCollector(context) {\n\t        _classCallCheck(this, PickerCollector);\n\t\n\t        var onFiles = function onFiles(files, runtime) {\n\t            for (var i = 0, l = files.length; i < l && !context.isLimit(); i++) {\n\t                context.add(new _file2['default'](runtime, files[i]));\n\t            }\n\t        };\n\t\n\t        if ('DataTransfer' in window && 'FileList' in window) {\n\t            this.triggerCollection = new Html5TriggerCollection(context, onFiles);\n\t        } else {\n\t            this.triggerCollection = new FlashTriggerCollection(context, onFiles);\n\t        }\n\t    }\n\t\n\t    _createClass(PickerCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            return this.triggerCollection.add(area);\n\t        }\n\t    }], [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            SWF_URL = url;\n\t        }\n\t    }]);\n\t\n\t    return PickerCollector;\n\t})();\n\t\n\texports['default'] = PickerCollector;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = jQuery;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar _runtime = __webpack_require__(14);\n\t\n\tvar _runtime2 = _interopRequireDefault(_runtime);\n\t\n\tvar _transport = __webpack_require__(15);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tvar instance = undefined;\n\t\n\tvar Html5Runtime = (function (_Runtime) {\n\t    function Html5Runtime() {\n\t        _classCallCheck(this, Html5Runtime);\n\t\n\t        if (_Runtime != null) {\n\t            _Runtime.apply(this, arguments);\n\t        }\n\t    }\n\t\n\t    _inherits(Html5Runtime, _Runtime);\n\t\n\t    _createClass(Html5Runtime, [{\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(blob, timeout) {\n\t            var i = (0, _jquery.Deferred)(),\n\t                fr = new FileReader(),\n\t                timer = undefined;\n\t\n\t            fr.onloadend = function () {\n\t                if (fr.readyState == FileReader.DONE) {\n\t                    i.resolve(fr.result);\n\t                } else {\n\t                    i.reject();\n\t                }\n\t                clearTimeout(timer);\n\t                fr.onloadend = null;\n\t            };\n\t            fr.readAsDataURL(blob);\n\t\n\t            var abort = function abort() {\n\t                fr && fr.abort();\n\t                fr = null;\n\t            };\n\t            if (timeout) {\n\t                timer = setTimeout(abort, timeout);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            if (!this.transport) {\n\t                this.transport = new _transport2['default'](this);\n\t            }\n\t            return this.transport;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob, start, end) {\n\t            var blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\t\n\t            return blobSlice.call(blob, start, end);\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = (0, _jquery.Deferred)();\n\t\n\t            if (!window.SparkMD5) {\n\t                i.reject();\n\t                return i.promise();\n\t            }\n\t\n\t            var chunkSize = 2 * 1024 * 1024,\n\t                chunks = Math.ceil(blob.size / chunkSize),\n\t                chunk = 0,\n\t                spark = new SparkMD5.ArrayBuffer(),\n\t                blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\t\n\t            var fr = new FileReader();\n\t\n\t            var _loadNext = function loadNext() {\n\t                if (!fr) return;\n\t                var start = undefined,\n\t                    end = undefined;\n\t\n\t                start = chunk * chunkSize;\n\t                end = Math.min(start + chunkSize, blob.size);\n\t\n\t                fr.onload = function () {\n\t                    spark && spark.append(fr.result);\n\t                };\n\t\n\t                fr.onloadend = function () {\n\t                    if (!fr) return;\n\t                    if (fr.readyState == FileReader.DONE) {\n\t                        if (++chunk < chunks) {\n\t                            setTimeout(_loadNext, 1);\n\t                        } else {\n\t                            setTimeout(function () {\n\t                                spark && i.resolve(spark.end());\n\t                                _loadNext = blob = spark = null;\n\t                            }, 50);\n\t                        }\n\t                    } else {\n\t                        i.reject();\n\t                    }\n\t                    fr.onloadend = fr.onload = null;\n\t                };\n\t\n\t                fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n\t            };\n\t\n\t            _loadNext();\n\t\n\t            var ret = i.promise();\n\t            ret.abort = function () {\n\t                fr && fr.abort();\n\t                spark = null;\n\t                fr = null;\n\t            };\n\t\n\t            return ret;\n\t        }\n\t    }], [{\n\t        key: 'getInstance',\n\t        value: function getInstance() {\n\t            if (!instance) {\n\t                instance = new Html5Runtime();\n\t            }\n\t            return instance;\n\t        }\n\t    }]);\n\t\n\t    return Html5Runtime;\n\t})(_runtime2['default']);\n\t\n\texports['default'] = Html5Runtime;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _emitter = __webpack_require__(5);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(2);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _status = __webpack_require__(3);\n\t\n\tvar _status2 = _interopRequireDefault(_status);\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar uid = 0;\n\tfunction guid() {\n\t    return 'FILE-' + (uid++).toString(16).toUpperCase();\n\t}\n\t\n\tvar RE_EXT = /\\.([^.]+)$/,\n\t    RE_IMAGE = /\\/(jpg|jpeg|png|gif|bmp)$/i;\n\tfunction guessExt(blob) {\n\t    var m = blob.name && RE_EXT.exec(blob.name);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    m = blob.type && RE_IMAGE.exec(blob.type);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    return '';\n\t}\n\t\n\tfunction guessType(ext) {\n\t    if (['jpg', 'jpeg', 'png', 'gif', 'bmp'].indexOf(ext.toLowerCase())) {\n\t        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n\t    }\n\t    return null;\n\t}\n\t\n\tvar Progress = (function () {\n\t    function Progress(total, loaded) {\n\t        _classCallCheck(this, Progress);\n\t\n\t        this.total = total;\n\t        this.loaded = loaded;\n\t    }\n\t\n\t    _createClass(Progress, [{\n\t        key: 'percentage',\n\t        get: function () {\n\t            return this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100);\n\t        }\n\t    }]);\n\t\n\t    return Progress;\n\t})();\n\t\n\texports['default'] = Progress;\n\t\n\tvar File = (function (_Emitter) {\n\t    function File(runtime, source, filename) {\n\t        _classCallCheck(this, File);\n\t\n\t        _get(Object.getPrototypeOf(File.prototype), 'constructor', this).call(this);\n\t\n\t        this.id = guid();\n\t\n\t        this.name = source.name || filename || this.id;\n\t\n\t        var ext = guessExt(source).toLowerCase();\n\t\n\t        if (ext && !RE_EXT.test(this.name)) {\n\t            this.name += '.' + ext;\n\t        }\n\t\n\t        this.ext = ext;\n\t\n\t        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\t\n\t        this.lastModified = source.lastModified || +new Date();\n\t\n\t        this.size = source.size || 0;\n\t\n\t        this.runtime = runtime;\n\t\n\t        this.source = source;\n\t\n\t        this.status = _status2['default'].INITED;\n\t\n\t        this.progress = new Progress(this.size, 0);\n\t    }\n\t\n\t    _inherits(File, _Emitter);\n\t\n\t    _createClass(File, [{\n\t        key: 'getContext',\n\t        value: function getContext() {\n\t            return this.context;\n\t        }\n\t    }, {\n\t        key: 'setContext',\n\t        value: function setContext(context) {\n\t            this.context = context;\n\t            this.setPropagationTarget(context);\n\t        }\n\t    }, {\n\t        key: 'getRuntime',\n\t        value: function getRuntime() {\n\t            return this.runtime;\n\t        }\n\t    }, {\n\t        key: 'isImage',\n\t        value: function isImage() {\n\t            return RE_IMAGE.test(this.type);\n\t        }\n\t    }, {\n\t        key: 'setStatus',\n\t        value: function setStatus(status) {\n\t            var prevStatus = this.status;\n\t\n\t            if (prevStatus !== _status2['default'].CANCELLED && status !== prevStatus) {\n\t                this.status = status;\n\t                this.emit(_events2['default'].FILE_STATUS_CHANGE, status, prevStatus);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getStatus',\n\t        value: function getStatus() {\n\t            return this.status;\n\t        }\n\t    }, {\n\t        key: 'getStatusName',\n\t        value: function getStatusName() {\n\t            if (this.status in _status.StatusName) {\n\t                return _status.StatusName[this.status];\n\t            } else {\n\t                return 'unknow';\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getSource',\n\t        value: function getSource() {\n\t            return this.source;\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(timeout) {\n\t            if (!this._dataUrlPromise) {\n\t                this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n\t            }\n\t            return this._dataUrlPromise;\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5() {\n\t            if (!this._md5Promise) {\n\t                this._md5Promise = this.runtime.md5(this.source);\n\t            }\n\t            return this._md5Promise;\n\t        }\n\t    }, {\n\t        key: 'session',\n\t        value: function session() {\n\t            var _this = this;\n\t\n\t            if (this._sessionPromise) {\n\t                return this._sessionPromise;\n\t            }\n\t\n\t            var session = (0, _jquery.Deferred)();\n\t\n\t            session.progress(function (progress) {\n\t                _this.setStatus(_status2['default'].PROGRESS);\n\t                _this.emit(_events2['default'].FILE_UPLOAD_PROGRESS, progress);\n\t            }).done(function (response) {\n\t                _this.response = response;\n\t                _this._session = null;\n\t                _this._sessionPromise = null;\n\t                _this._flows = [];\n\t                _this.setStatus(_status2['default'].SUCCESS);\n\t                _this.emit(_events2['default'].FILE_UPLOAD_SUCCESS, response);\n\t            }).fail(function (error) {\n\t                _this._session = null;\n\t                _this._sessionPromise = null;\n\t                var flow = undefined;\n\t                while (flow = _this._flows.shift()) {\n\t                    flow.abort();\n\t                }\n\t\n\t                if (error instanceof Error) {\n\t                    _this.setStatus(_status2['default'].ERROR);\n\t                    _this.emit(_events2['default'].FILE_UPLOAD_ERROR, error);\n\t                }\n\t            }).always(function () {\n\t                _this.emit(_events2['default'].FILE_UPLOAD_COMPLETED, _this.getStatus());\n\t            });\n\t\n\t            this._flows = [];\n\t            this._session = session;\n\t            this._sessionPromise = session.promise();\n\t\n\t            return this._sessionPromise;\n\t        }\n\t    }, {\n\t        key: 'prepare',\n\t        value: function prepare() {\n\t            var _this2 = this;\n\t\n\t            if (this.status !== _status2['default'].PENDING || !this.context) {\n\t                return false;\n\t            }\n\t\n\t            this.session();\n\t            this.setStatus(_status2['default'].PROGRESS);\n\t\n\t            this.emit(_events2['default'].FILE_UPLOAD_START);\n\t\n\t            this.request = this.context.createFileRequest(this);\n\t\n\t            var prepare = this.context.invoke(_events2['default'].FILE_UPLOAD_PREPARING, this.request);\n\t\n\t            this._flows.push(prepare);\n\t\n\t            prepare.then(function (request) {\n\t                _this2.emit(_events2['default'].FILE_UPLOAD_PREPARED, request);\n\t\n\t                var upload = _this2.runtime.getUploading().generate(request);\n\t\n\t                _this2._flows.push(upload);\n\t\n\t                upload.progress(function (e) {\n\t                    _this2.progress.total = e.total;\n\t                    _this2.progress.loaded = e.loaded;\n\t                    _this2._session.notify(_this2.progress);\n\t                });\n\t\n\t                return upload;\n\t            }).then(function (response) {\n\t                return _this2.complete(response);\n\t            }, this._session.reject);\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'complete',\n\t        value: function complete(response) {\n\t            if (this.status !== _status2['default'].PROGRESS) return;\n\t\n\t            var flow = undefined;\n\t            while (flow = this._flows.shift()) {\n\t                flow.abort();\n\t            }\n\t\n\t            this.progress.loaded = this.progress.total;\n\t            this._session.notify(this.progress);\n\t\n\t            response = this.request.createFileResponse(response);\n\t\n\t            this.setStatus(_status2['default'].END);\n\t            this.emit(_events2['default'].FILE_UPLOAD_END);\n\t\n\t            var complete = this.context.invoke(_events2['default'].FILE_UPLOAD_COMPLETING, response);\n\t\n\t            this._flows.push(complete);\n\t\n\t            complete.then(this._session.resolve, this._session.reject);\n\t        }\n\t    }, {\n\t        key: 'pending',\n\t        value: function pending() {\n\t            if (this.status === _status2['default'].ERROR || this.status === _status2['default'].QUEUED) {\n\t                this.progress.total = this.size;\n\t                this.progress.loaded = 0;\n\t                this.setStatus(_status2['default'].PENDING);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort() {\n\t            this._session && this._session.reject();\n\t            this._session = null;\n\t            this._sessionPromise = null;\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel() {\n\t            this.setStatus(_status2['default'].CANCELLED);\n\t            this.emit(_events2['default'].FILE_CANCEL);\n\t            this.abort();\n\t            this.runtime.cancel(this.source);\n\t            this._dataUrlPromise && this._dataUrlPromise.abort();\n\t            this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n\t            this.removeAllListeners();\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this.cancel();\n\t        }\n\t    }]);\n\t\n\t    return File;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = File;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _runtime = __webpack_require__(14);\n\t\n\tvar _runtime2 = _interopRequireDefault(_runtime);\n\t\n\tvar _transport = __webpack_require__(16);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tfunction getFlashVersion() {\n\t    var version = undefined;\n\t\n\t    try {\n\t        version = navigator.plugins['Shockwave Flash'];\n\t        version = version.description;\n\t    } catch (e1) {\n\t        try {\n\t            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t        } catch (e2) {\n\t            version = '0.0';\n\t        }\n\t    }\n\t    version = version.match(/\\d+/g);\n\t    return parseFloat(version[0] + '.' + version[1]);\n\t}\n\t\n\tfunction callFlash(movie, functionName, argumentArray) {\n\t    try {\n\t        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n\t    } catch (ex) {\n\t        throw 'Call to ' + functionName + ' failed';\n\t    }\n\t}\n\t\n\tfunction createFlash(swf, callInterface) {\n\t    if (getFlashVersion() < 11.4) {\n\t        throw 'flash player is not available';\n\t    }\n\t    var div = document.createElement('div');\n\t    var url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n\t    var attrs = ['id=\"' + callInterface + '-Picker\"', 'type=\"application/x-shockwave-flash\"', 'data=\"' + url + '\"', 'width=\"100%\" height=\"100%\"', 'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'];\n\t    if (window.ActiveXObject) {\n\t        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n\t    }\n\t    div.innerHTML = '<object ' + attrs.join(' ') + '>' + '<param name=\"movie\" value=\"' + url + '\" />' + '<param name=\"wmode\" value=\"transparent\" />' + '<param name=\"allowscriptaccess\" value=\"always\" />' + '</object>';\n\t\n\t    return div.firstChild;\n\t}\n\t\n\tvar _guid = +new Date();\n\tfunction guid(_x4) {\n\t    var _again2 = true;\n\t\n\t    _function2: while (_again2) {\n\t        var prefix = _x4;\n\t        ret = undefined;\n\t        _again2 = false;\n\t\n\t        var ret = prefix + (_guid++).toString(16);\n\t        if (ret in window) {\n\t            _x4 = prefix;\n\t            _again2 = true;\n\t            continue _function2;\n\t        }\n\t        return ret;\n\t    }\n\t}\n\t\n\tvar FlashRuntime = (function (_Runtime) {\n\t    function FlashRuntime(trigger, swf, options) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, FlashRuntime);\n\t\n\t        _get(Object.getPrototypeOf(FlashRuntime.prototype), 'constructor', this).call(this);\n\t\n\t        var callInterface = guid('FlashRuntime');\n\t\n\t        this.callInterface = callInterface;\n\t        window[callInterface] = this;\n\t\n\t        this.options = options;\n\t\n\t        var display = function display() {\n\t            var w = trigger[0].offsetWidth,\n\t                h = trigger[0].offsetHeight,\n\t                flash = undefined;\n\t            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n\t                setTimeout(display, 1000);\n\t                return;\n\t            }\n\t\n\t            trigger.append(_this.flash = flash);\n\t        };\n\t\n\t        display();\n\t    }\n\t\n\t    _inherits(FlashRuntime, _Runtime);\n\t\n\t    _createClass(FlashRuntime, [{\n\t        key: 'getOptions',\n\t        value: function getOptions() {\n\t            var options = this.options;\n\t            if (typeof options === 'function') {\n\t                options = options();\n\t            }\n\t            return options;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport(name, blob, options) {\n\t            return new _transport2['default'](this, name, blob, options);\n\t        }\n\t    }, {\n\t        key: 'send',\n\t        value: function send(name, blob, url, params) {\n\t            callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort(blob) {\n\t            try {\n\t                callFlash(this.flash, 'exec', ['abort', blob.id]);\n\t            } catch (e) {}\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {\n\t            callFlash(this.flash, 'exec', ['cancel', blob.id]);\n\t        }\n\t    }, {\n\t        key: 'ping',\n\t        value: function ping() {\n\t            callFlash(this.flash, 'exec', ['pang']);\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            delete window[this.callInterface];\n\t        }\n\t    }]);\n\t\n\t    return FlashRuntime;\n\t})(_runtime2['default']);\n\t\n\texports['default'] = FlashRuntime;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tvar _emitter = __webpack_require__(5);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _events = __webpack_require__(2);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar Runtime = (function (_Emitter) {\n\t    function Runtime() {\n\t        _classCallCheck(this, Runtime);\n\t\n\t        if (_Emitter != null) {\n\t            _Emitter.apply(this, arguments);\n\t        }\n\t    }\n\t\n\t    _inherits(Runtime, _Emitter);\n\t\n\t    _createClass(Runtime, [{\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = (0, _jquery.Deferred)();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(file, timeout) {\n\t            var i = (0, _jquery.Deferred)();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            return null;\n\t        }\n\t    }, {\n\t        key: 'getUploading',\n\t        value: function getUploading() {\n\t            if (!this.uploading) {\n\t                this.uploading = new Uploading(this);\n\t            }\n\t            return this.uploading;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob) {\n\t            throw new Error('this runtime current not support slice');\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {}\n\t    }]);\n\t\n\t    return Runtime;\n\t})(_emitter2['default']);\n\t\n\texports['default'] = Runtime;\n\t\n\tvar Uploading = (function () {\n\t    function Uploading(runtime) {\n\t        _classCallCheck(this, Uploading);\n\t\n\t        this.runtime = runtime;\n\t    }\n\t\n\t    _createClass(Uploading, [{\n\t        key: 'generate',\n\t\n\t        /**\n\t         * @param {FileRequest} request\n\t         * @returns {*}\n\t         */\n\t        value: function generate(request) {\n\t            var _this = this;\n\t\n\t            var i = (0, _jquery.Deferred)(),\n\t                file = request.getFile(),\n\t                runtime = this.runtime;\n\t\n\t            var source = file.getSource(),\n\t                size = file.size,\n\t                chunkSize = request.getChunkSize(),\n\t                useChunk = request.isChunkEnable(),\n\t                threads = request.getChunkProcessThreads(),\n\t                start = 0,\n\t                end = 0,\n\t                slots = [];\n\t\n\t            var getActives = function getActives() {\n\t                return slots.reduce(function (sum, slot) {\n\t                    return sum + (slot.state() === 'pending' ? 1 : 0);\n\t                }, 0);\n\t            };\n\t\n\t            var readChunk = function readChunk() {\n\t                var slot = undefined,\n\t                    req = undefined,\n\t                    blob = undefined;\n\t                while (end < size && getActives() < threads) {\n\t                    start = end;\n\t                    end = Math.min(end + chunkSize, size);\n\t                    blob = runtime.slice(source, start, end);\n\t                    req = request.createChunkRequest(slots.length, blob);\n\t                    slot = _this.slot(req, request.getChunkRetries());\n\t                    slot.progress(progress).done(done).fail(fail);\n\t                    slots.push(slot);\n\t                }\n\t            };\n\t\n\t            var progress = function progress() {\n\t                var total = size - end,\n\t                    loaded = 0;\n\t                slots.forEach(function (slot) {\n\t                    total += slot.total;\n\t                    loaded += slot.loaded;\n\t                });\n\t                i.notify({ total: total, loaded: loaded });\n\t            };\n\t\n\t            var done = function done(res) {\n\t                useChunk && readChunk();\n\t\n\t                if (end >= size && slots.every(function (slot) {\n\t                    return slot.state() === 'resolved';\n\t                })) {\n\t                    i.resolve(res);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                slots.forEach(function (slot) {\n\t                    return slot.abort();\n\t                });\n\t            };\n\t\n\t            var fail = function fail(error) {\n\t                i.reject(error);\n\t                abort();\n\t            };\n\t\n\t            if (useChunk) {\n\t                readChunk();\n\t            } else {\n\t                end = size;\n\t                var slot = this.slot(request.createChunkRequest(0, source), 0);\n\t                slot.progress(progress).done(done).fail(fail);\n\t                slots.push(slot);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'slot',\n\t        value: function slot(request, retries) {\n\t            var i = (0, _jquery.Deferred)(),\n\t                runtime = this.runtime,\n\t                context = request.getFile().getContext();\n\t\n\t            var slot = i.promise();\n\t\n\t            var progress = function progress(e) {\n\t                if (e.total) {\n\t                    slot.total = e.total;\n\t                }\n\t                if (e.loaded) {\n\t                    slot.loaded = e.loaded;\n\t                }\n\t                i.notify(e);\n\t            };\n\t\n\t            var process = function process() {\n\t                var prepare, transport, completion;\n\t                slot.abort = function () {\n\t                    prepare && prepare.abort();\n\t                    transport && transport.abort();\n\t                    completion && completion.abort();\n\t                };\n\t                slot.total = request.getBlob().size;\n\t                slot.loaded = 0;\n\t\n\t                prepare = context.invoke(_events2['default'].CHUNK_UPLOAD_PREPARING, request);\n\t\n\t                prepare.then(function (request) {\n\t                    transport = runtime.getTransport().generate(request);\n\t                    transport.progress(progress);\n\t                    return transport;\n\t                }).then(function (response) {\n\t                    completion = context.invoke(_events2['default'].CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n\t                    return completion;\n\t                }).done(i.resolve).fail(error);\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e instanceof _errors.NetworkError && retries-- > 0) {\n\t                    // retry\n\t                    setTimeout(process, 500);\n\t                } else {\n\t                    i.reject(e);\n\t                }\n\t                slot.abort();\n\t            };\n\t\n\t            process();\n\t\n\t            return slot;\n\t        }\n\t    }]);\n\t\n\t    return Uploading;\n\t})();\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar Html5Transport = (function () {\n\t    function Html5Transport() {\n\t        _classCallCheck(this, Html5Transport);\n\t    }\n\t\n\t    _createClass(Html5Transport, [{\n\t        key: 'generate',\n\t\n\t        /**\n\t         * @param {ChunkRequest} request\n\t         * @returns {*}\n\t         */\n\t        value: function generate(request) {\n\t            var i = (0, _jquery.Deferred)();\n\t\n\t            var timeoutTimer = undefined,\n\t                withCredentials = false;\n\t            var xhr = new XMLHttpRequest();\n\t\n\t            if (request.isWithCredentials && !('withCredentials' in xhr) && 'XDomainRequest' in window) {\n\t                xhr = new XDomainRequest();\n\t                withCredentials = true;\n\t            }\n\t\n\t            var clean = function clean() {\n\t                xhr.onload = xhr.onerror = null;\n\t                if (xhr.upload) {\n\t                    xhr.upload.onprogress = null;\n\t                }\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                clean();\n\t                try {\n\t                    xhr.abort();\n\t                } catch (e) {}\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                clean();\n\t                if (!xhr.status && e.type === 'error') {\n\t                    return i.reject(new _errors.AbortError(e.message));\n\t                }\n\t                if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n\t                    return i.resolve(xhr.responseText);\n\t                }\n\t                return i.reject(new _errors.NetworkError(xhr.status, xhr.statusText));\n\t            };\n\t\n\t            if (xhr.upload) {\n\t                xhr.upload.onprogress = function (e) {\n\t                    return i.notify(e);\n\t                };\n\t            }\n\t            xhr.onerror = complete;\n\t            xhr.onload = complete;\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new _errors.TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                (function () {\n\t                    if (withCredentials) {\n\t                        xhr.open('POST', request.getUrl(), true);\n\t                        xhr.withCredentials = true;\n\t                    } else {\n\t                        xhr.open('POST', request.getUrl());\n\t                    }\n\t\n\t                    request.getHeaders().forEach(function (header) {\n\t                        return xhr.setRequestHeader(header.name, header.value);\n\t                    });\n\t\n\t                    var formData = new FormData(),\n\t                        blob = request.getBlob();\n\t\n\t                    request.getParams().toArray().forEach(function (param) {\n\t                        return formData.append(param.name, param.value);\n\t                    });\n\t\n\t                    formData.append(request.getName(), blob, blob.name || 'blob');\n\t\n\t                    xhr.send(formData);\n\t                })();\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return Html5Transport;\n\t})();\n\t\n\texports['default'] = Html5Transport;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _errors = __webpack_require__(6);\n\t\n\tvar _jquery = __webpack_require__(10);\n\t\n\tvar FlashTransport = (function () {\n\t    function FlashTransport(flashRuntime) {\n\t        _classCallCheck(this, FlashTransport);\n\t\n\t        this.flashRuntime = flashRuntime;\n\t    }\n\t\n\t    _createClass(FlashTransport, [{\n\t        key: 'generate',\n\t\n\t        /**\n\t         * @param {ChunkRequest} request\n\t         * @returns {*}\n\t         */\n\t        value: function generate(request) {\n\t            var i = (0, _jquery.Deferred)(),\n\t                flashRuntime = this.flashRuntime,\n\t                blob = request.getBlob();\n\t\n\t            var timeoutTimer = undefined;\n\t\n\t            var clean = function clean() {\n\t                flashRuntime.off('uploadprogress', progress);\n\t                flashRuntime.off('uploadcomplete', complete);\n\t                flashRuntime.off('uploaderror', error);\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t            var abort = function abort() {\n\t                clean();\n\t                flashRuntime.abort(blob.id);\n\t            };\n\t\n\t            var progress = function progress(e) {\n\t                if (e.id !== blob.id) return;\n\t                i.notify(e);\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                if (e.status === 304 || e.status >= 200 && e.status < 300) {\n\t                    flashRuntime.cancel(blob);\n\t                    return i.resolve(e.response);\n\t                }\n\t                return i.reject(new _errors.NetworkError(e.status, e.response));\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            };\n\t            flashRuntime.on('uploadprogress', progress);\n\t            flashRuntime.on('uploadcomplete', complete);\n\t            flashRuntime.on('uploaderror', error);\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new _errors.TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new _errors.AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return FlashTransport;\n\t})();\n\t\n\texports['default'] = FlashTransport;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** uploader.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b56ab9866a37a9318819\n **/","import Context from './src/context';\nimport Events from './src/events';\nimport Status from './src/status';\n\nexport default Context;\nexport {Events, Status};\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","import $ from 'jquery';\nimport Emitter from '../emitter';\nimport Runtime from '../html5/runtime';\nimport File from '../file';\n\nexport default class PasteCollector {\n    static isSupport() {\n        return ('DataTransfer' in window) && ('FileList' in window);\n    }\n\n    constructor(context) {\n        this.context = context;\n        this.runtime = Runtime.getInstance();\n    }\n\n    addArea(area) {\n        area = area.on ? area : $(area);\n\n        const context = this.context,\n            runtime = this.runtime,\n            emitter = new Emitter;\n\n        const paste = (e) => {\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            const clipboardData = (e.originalEvent || e).clipboardData,\n                items = clipboardData.items,\n                files = clipboardData.files;\n\n            try {\n                if ((!items && !files) || clipboardData.getData('text/html')) {\n                    return;\n                }\n            } catch (ex) {}\n\n            let prevent, i, l, file, item;\n\n            if (files && files.length) {\n                // safari has files\n                prevent = files.length > 0;\n                for (i = 0, l = files.length; i < l && !context.isLimit(); i++) {\n                    file = new File(runtime, files[i]);\n\n                    prevent = 1;\n\n                    if (context.add(file) && !context.isMultiple()) {\n                        break;\n                    }\n                }\n            } else if (items && items.length) {\n                // chrome has items\n                let filename = clipboardData.getData('text/plain');\n                for (i = 0, l = items.length; i < l && !context.isLimit(); i++) {\n                    item = items[i];\n\n                    if (item.kind !== 'file' || !(file = item.getAsFile())) {\n                        continue;\n                    }\n\n                    file = new File(runtime, file, filename);\n                    filename = null;\n\n                    prevent = 1;\n\n                    if (context.add(file) && !context.isMultiple()) {\n                        break;\n                    }\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n                e.stopPropagation();\n                emitter.emit('paste', clipboardData);\n            }\n        };\n\n        area.on('paste', paste);\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            area.off('paste', paste);\n        };\n\n        return emitter;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/paste.js\n **/","export default {\n    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n    QUEUE_ADD: 'queueadd', // 队列添加了一个文件\n    QUEUE_ERROR: 'queueerror', // 队列错误\n    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\n    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\n    FILE_CANCEL: 'filecancel', // 文件退出\n    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","export default {\n    ALL: 255, // 所有状态\n\n    PROCESS: 31, // INITED -> END\n    INITED: 1, // 初始状态\n    QUEUED: 2, // 进入队列\n    PENDING: 4, // 队列中等待\n    PROGRESS: 8, // 上传中\n    END: 16, // 上传完成, 等待后续处理\n\n    SUCCESS: 32,  // 上传成功\n    ERROR: 64, // 上传出错\n    CANCELLED: 128  // 上传取消 和 queued 相反, 退出队列\n};\n\nexport var StatusName = {\n    1: 'inited',\n    2: 'queued',\n    4: 'pending',\n    8: 'progress',\n    16: 'end',\n    32: 'success',\n    64: 'error',\n    128: 'cancelled'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/status.js\n **/","\nclass ChunkResponse {\n    constructor(rawResponse, chunkRequest) {\n        this.rawResponse = rawResponse;\n        this.chunkRequest = chunkRequest;\n    }\n\n    getChunkRequest() {\n        return this.chunkRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        return this.response || this.rawResponse;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass ChunkRequest {\n    /**\n     *\n     * @param {int} index\n     * @param {Blob} blob\n     * @param {FileRequest} fileRequest\n     */\n    constructor(index, blob, fileRequest) {\n        this.index = index;\n        this.blob = blob;\n        this.fileRequest = fileRequest;\n    }\n\n    getName() {\n        return this.fileRequest.getName();\n    }\n\n    getFile() {\n        return this.fileRequest.getFile();\n    }\n\n    getBlob() {\n        return this.blob;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    isMultiChunk() {\n        return this.getFile().source !== this.blob;\n    }\n\n    getParams() {\n        if (!this.params) {\n            this.params = this.fileRequest.getParams().clone();\n        }\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.getParams().setParam(name, value);\n\n        return this;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getUrl() {\n        return this.url || this.fileRequest.getUrl();\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getHeaders() {\n        if (!this.headers) {\n            this.headers = this.fileRequest.getHeaders().slice(0);\n        }\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        var headers = this.getHeaders();\n        headers.push({name: name, value: value});\n        return this;\n    }\n\n    isWithCredentials() {\n        return this.fileRequest.isWithCredentials();\n    }\n\n    getTimeout() {\n        return this.fileRequest.getTimeout();\n    }\n\n    createChunkResponse(response) {\n        return new ChunkResponse(response, this);\n    }\n}\n\nclass FileResponse {\n    /**\n     * @param {string|ChunkResponse} rawResponse\n     * @param {FileRequest} fileRequest\n     */\n    constructor(rawResponse, fileRequest) {\n        this.rawResponse = rawResponse;\n        if (rawResponse instanceof ChunkResponse) {\n            this.response = rawResponse.getResponse();\n            this.fromChunkResponse = true;\n        }\n        this.fileRequest = fileRequest;\n    }\n\n    isFromMultiChunkResponse() {\n        if (this.fromChunkResponse) {\n            return this.rawResponse.getChunkRequest().isMultiChunk();\n        }\n        return false;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        return this.response || this.rawResponse;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass Params {\n    constructor(params) {\n        if (Array.isArray(params)) {\n            this.params = params.slice(0);\n        } else if (typeof params === 'object') {\n            this.params = [];\n            for (let name in params) {\n                if (params.hasOwnProperty(name)) {\n                    this.params.push({name, value: params[name]});\n                }\n            }\n        } else {\n            this.params = [];\n        }\n    }\n\n    setParam(name, value) {\n        this.removeParam(name);\n        this.addParam(name, value);\n    }\n\n    addParam(name, value) {\n        this.params.push({name, value});\n    }\n\n    removeParam(name) {\n        this.params = this.params.filter((param) => param.name !== name);\n    }\n\n    getParam(name, single) {\n        let ret = this.params.filter((param) => param.name === name)\n            .map((param) => param.value);\n\n        if (single) {\n            return ret.shift();\n        }\n\n        return ret;\n    }\n\n    clone() {\n        return new Params(this.params);\n    }\n\n    toArray() {\n        return this.params;\n    }\n\n    toString() {\n        const params = this.params.map((param) => {\n            return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n        });\n\n        return params.join('&'); //.replace( /%20/g, '+');\n    }\n}\n\nconst MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\nexport default class FileRequest {\n    constructor(file, options = {}) {\n        this.file = file;\n        this.name = options.name || 'file';\n        this.url = options.url;\n        this.params = new Params(options.params);\n        this.headers = options.headers || [];\n        this.withCredentials = options.withCredentials;\n        this.timeout = options.timeout || 0;\n        this.chunkSize = options.chunkSize || 0;\n        this.chunkRetries = options.chunkRetries || 0;\n        this.chunkEnable = options.chunkEnable || false;\n        this.chunkProcessThreads = options.chunkProcessThreads || 0;\n    }\n    \n    getFile() {\n        return this.file;\n    }\n\n    getUrl() {\n        return this.url || '';\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    setName(name) {\n        this.name = name;\n        return this;\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getParams() {\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.params.setParam(name, value);\n        return this;\n    }\n\n    getHeaders() {\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        this.headers.push({name: name, value: value});\n    }\n\n    isWithCredentials() {\n        return this.withCredentials;\n    }\n\n    setWithCredentials(flag) {\n        this.withCredentials = flag;\n        return this;\n    }\n\n    getTimeout() {\n        return this.timeout;\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n        return this;\n    }\n\n    getChunkSize() {\n        return this.chunkSize;\n    }\n\n    setChunkSize(chunkSize) {\n        this.chunkSize = chunkSize;\n        return this;\n    }\n\n    getChunkRetries() {\n        return this.chunkRetries;\n    }\n\n    setChunkRetries(retries) {\n        this.chunkRetries = retries;\n        return 0;\n    }\n\n    isChunkEnable() {\n        return this.chunkEnable && this.chunkSize > MIN_CHUNK_SIZE\n            && this.file.getRuntime().canSlice() && this.file.size > this.chunkSize;\n    }\n\n    setChunkEnable(flag) {\n        this.chunkEnable = flag;\n        return this;\n    }\n\n    getChunkProcessThreads() {\n        return this.chunkProcessThreads;\n    }\n\n    setChunkProcessThreads(threads) {\n        this.chunkProcessThreads = threads;\n        return this;\n    }\n\n    createChunkRequest(index, blob) {\n        return new ChunkRequest(index, blob, this);\n    }\n\n    createFileResponse(response) {\n        return new FileResponse(response, this);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/filerequest.js\n **/","import {Deferred} from 'jquery';\n\nexport default class Emitter {\n\n    on(event, listener) {\n        event = event.toLowerCase();\n        if (!this._events) {\n            this._events = {};\n        }\n\n        if (!this._events[event]) {\n            this._events[event] = [];\n        }\n\n        this._events[event].push(listener);\n\n        return this;\n    }\n\n    once(event, listener) {\n        event = event.toLowerCase();\n\n        let that = this;\n\n        function fn() {\n            that.off(event, fn);\n            listener.apply(this, arguments);\n        }\n\n        fn.listener = listener;\n\n        this.on(event, fn);\n\n        return this;\n    }\n\n    off(event, listener) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            return this;\n        }\n\n        let i = listeners.length;\n        while (i-- > 0) {\n            if (listeners[i] === listener || listeners[i].listener === listener) {\n                listeners.splice(i, 1);\n                break;\n            }\n        }\n\n        if (listeners.length === 0) {\n            delete this._events[event];\n        }\n\n        return this;\n    }\n\n    removeAllListeners(event) {\n        if (!event) {\n            this._events = [];\n        } else {\n            delete this._events[event.toLowerCase()];\n        }\n\n        return this;\n    }\n\n    setPropagationTarget(emitter) {\n        if (emitter instanceof Emitter) {\n            this.propagationTarget = emitter;\n        }\n    }\n\n    emit(event, ...args) {\n        this.applyEmit(event, args);\n\n        return this;\n    }\n\n    applyEmit(event, args) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (this._events && (listeners = this._events[event])) {\n            listeners.slice(0).forEach(fn => fn.apply(this, args));\n        }\n\n        if (this.propagationTarget) {\n            const pArgs = args.slice(0);\n            pArgs.unshift(this);\n            this.propagationTarget.applyEmit(event, pArgs);\n        }\n\n        return this;\n    }\n\n    invoke(event, data) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            listeners = [];\n        }\n\n        return HookInvoker(listeners.slice(0), data, this);\n    }\n}\n\nfunction HookInvoker(hooks, initialData, context) {\n    let _data = initialData;\n    let _error = null;\n    let _aborted;\n\n    const i = Deferred();\n    const ret = i.promise();\n\n    ret.abort = () => {\n        _aborted = true;\n    };\n\n    const fail = (e) => {\n        if (_aborted) return;\n        if (e) {\n            _error = e instanceof Error ? e : new Error(e);\n        }\n        i.reject(_error || new Error('Unknown'));\n    };\n\n    const done = () => {\n        if (_aborted) return;\n        if (_error != null) {\n            fail();\n        } else {\n            i.resolve(_data);\n        }\n    };\n\n    const setData = (data) => {\n        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n            _data = data;\n        }\n    };\n\n    const next = (data) => {\n        if (_aborted) return;\n\n        if (data instanceof Error) {\n            _error = data;\n        }\n\n        if (_error != null) {\n            return fail();\n        }\n\n        setData(data);\n\n        const hook = hooks.shift();\n        if (!hook) {\n            return done();\n        }\n        let res;\n        try {\n            res = hook.call(context, _data);\n        } catch (e) {\n            return fail(e);\n        }\n\n        if (res && res.then) {\n            res.then(next, fail);\n        } else {\n            next(res);\n        }\n    };\n\n    setTimeout(next, 1);\n\n    return ret;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/emitter.js\n **/","export class AbortError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'AbortError';\n    }\n}\n\nexport class TimeoutError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'TimeoutError';\n    }\n}\n\nexport class NetworkError extends Error {\n    constructor(status, message) {\n        super(message);\n        this.name = 'NetworkError';\n        this.status = status;\n    }\n}\n\nexport class QueueLimitError extends Error {\n    constructor() {\n        super('queue limit');\n        this.name = 'QueueLimitError';\n    }\n}\n\nexport class FilterError extends Error {\n    constructor(file, message) {\n        super(message);\n        this.name = 'FilterError';\n        this.file = file;\n    }\n}\n\nexport class DuplicateError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'DuplicateError';\n    }\n}\n\nexport class FileExtensionError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileExtensionError';\n    }\n}\n\nexport class FileSizeError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileSizeError';\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors.js\n **/","import $ from 'jquery';\nimport Emitter from '../emitter';\nimport Runtime from '../html5/runtime';\nimport File from '../file';\n\nfunction createReader(collector) {\n    function reader(dataTransfer, responders) {\n        var items = dataTransfer.items,\n            files = dataTransfer.files,\n            item;\n\n        for (let i = 0, l = files.length; i < l; i++) {\n            item = items && items[i];\n\n            let entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\n            if (entry && entry.isDirectory) {\n                readEntry(entry, responders);\n            } else {\n                collector(files[i], responders);\n            }\n        }\n    }\n    function readEntry(entry, responders) {\n        if (entry.isFile) {\n            entry.file((file) => collector(file, responders));\n        } else if (entry.isDirectory) {\n            entry.createReader().readEntries((entries) => {\n                for (let i = 0, l = entries.length; i < l; i++) {\n                    readEntry(entries[i], responders);\n                }\n            });\n        }\n    }\n    return reader;\n}\n\nclass Area extends Emitter {\n    constructor(area) {\n        super();\n\n        this.areaElement = area;\n    }\n\n    contains(target) {\n        return this.areaElement.contains(target);\n    }\n\n    start(e, allowed) {\n        this.emit('start', e, allowed);\n    }\n\n    response(e, allowed) {\n        allowed = allowed && this.contains(e.target);\n        this.emit('response', e, allowed);\n        return allowed;\n    }\n\n    end(e) {\n        this.emit('end', e);\n    }\n}\n\nconst Collectors = [];\n\nfunction prepare() {\n    const $doc = $(document),\n        runtime = Runtime.getInstance();\n\n    let started = 0, enter = 0, endTimer;\n    const dataTransferReader = createReader((file, responders) => {\n        if (!responders || responders.length < 1) {\n            return;\n        }\n        file = new File(runtime, file);\n        responders.some((responder) => responder.recieve(file));\n    });\n\n    const start = (e) => {\n        started = 1;\n        Collectors.forEach((responder) => responder.start(e));\n    };\n\n    const move = (e) => {\n        var allowed = Collectors.filter((responder) => responder.response(e));\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer;\n\n        if (dataTransfer) {\n            dataTransfer.dropEffect = allowed.length ? 'copy' : 'none';\n        }\n        e.preventDefault();\n    };\n\n    const end = (e) => {\n        started = 0;\n        enter = 0;\n        Collectors.forEach((responder) => responder.end(e));\n    };\n\n    const drag = (e) => {\n        clearTimeout(endTimer);\n        let isLeave = e.type === 'dragleave';\n        if (!isLeave && !started) {\n            start(e);\n        }\n        move(e);\n        if (isLeave) {\n            endTimer = setTimeout(() => end(e), 100);\n        }\n    };\n    const drop = (e) => {\n        e.preventDefault();\n\n        clearTimeout(endTimer);\n        end(e);\n\n        const responders = Collectors.filter((responder) => responder.contains(e.target));\n\n        if (responders.length < 1) {\n            return;\n        }\n\n        let dataTransfer = (e.originalEvent || e).dataTransfer;\n\n        try {\n            if (dataTransfer.getData('text/html')) {\n                return;\n            }\n        } catch (ex) {}\n\n        dataTransferReader(dataTransfer, responders);\n    };\n\n    $doc.on('dragenter dragover dragleave', drag);\n    $doc.on('drop', drop);\n}\n\nexport default class DndCollector {\n    static isSupport() {\n        return ('DataTransfer' in window) && ('FileList' in window);\n    }\n\n    constructor(context) {\n        if (Collectors.length < 1) {\n            prepare();\n        }\n        Collectors.push(this);\n\n        this.context = context;\n        this.areas = [];\n    }\n\n    addArea(area) {\n        area = new Area(area);\n        this.areas.push(area);\n        area.destroy = () => {\n            area.removeAllListeners();\n            let i = this.areas.indexOf(area);\n            if (i > -1) {\n                this.areas.splice(i, 1);\n            }\n        };\n\n        return area;\n    }\n\n    contains(target) {\n        return this.areas.some((area) => area.contains(target));\n    }\n\n    start(e) {\n        const allowed = !this.context.isLimit();\n        this.areas.forEach((area) => area.start(e, allowed));\n    }\n\n    response(e) {\n        const allowed = !this.context.isLimit(),\n            res = this.areas.map((area) => area.response(e, allowed));\n        return allowed && res.some((r) => !!r);\n    }\n\n    recieve(file) {\n        return this.context.add(file);\n    }\n\n    end(e) {\n        this.areas.forEach((area) => area.end(e));\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/dnd.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport Status from './status';\nimport {QueueLimitError, DuplicateError, FileExtensionError, FileSizeError} from './errors';\nimport FileRequest from './filerequest';\nimport DndCollector from './collector/dnd';\nimport PasteCollector from './collector/paste';\nimport PickerCollector from './collector/picker';\n\nexport default class Context extends Emitter {\n\n    constructor(options) {\n        super();\n\n        let {processThreads, autoPending, queueCapcity, accept, sizeLimit, preventDuplicate, multiple} = options;\n\n        this.stat = new Stat;\n        this.limiter = new Limiter;\n        this.filter = new Filter;\n        this.accept = accept;\n        this.autoPending = autoPending;\n        this.multiple = multiple == null ? true : multiple;\n        this.pending = new Pending(processThreads);\n\n        if (queueCapcity && queueCapcity > 0) {\n            this.addLimit(() => this.stat.getTotal() >= queueCapcity);\n        }\n\n        if (accept && accept.length > 0) {\n            this.addFilter((file) => {\n                if (!accept) {\n                    return;\n                }\n                let allowed = accept.some((item) => {\n                    return item.extensions && item.extensions.split(',').indexOf(file.ext) > -1\n                });\n                if (allowed) {\n                    return;\n                }\n                return new FileExtensionError(file, file.ext + ' is not allowed.');\n            });\n        }\n\n        if (sizeLimit && sizeLimit > 0) {\n            this.addFilter((file) => {\n                if (file.size > sizeLimit) {\n                    return new FileSizeError(file, file.size + ' is greater than limit:' + sizeLimit);\n                }\n            });\n        }\n\n        if (preventDuplicate) {\n            this.addFilter((file) => {\n                let has = this.stat.getFiles().some((item) => item.name === file.name && item.size === file.size);\n                if (has) {\n                    return new DuplicateError(file, file.name + ' already in queue');\n                }\n            });\n        }\n\n        this.requestOptions = options.request || {};\n    }\n\n    createFileRequest(file) {\n        return new FileRequest(file, this.requestOptions);\n    }\n\n    isLimit() {\n        return this.limiter.isLimit();\n    }\n\n    addLimit(limit) {\n        return this.limiter.add(limit);\n    }\n\n    addFilter(filter) {\n        return this.filter.add(filter);\n    }\n\n    isAllow(file) {\n        return this.filter.filter(file);\n    }\n\n    add(file) {\n        if (this.isLimit()) {\n            this.emit(Events.QUEUE_ERROR, new QueueLimitError);\n            return false;\n        }\n\n        if (!this.isAllow(file)) {\n            this.emit(Events.QUEUE_ERROR, this.filter.getError());\n            return false;\n        }\n\n        if (!this.stat.add(file)) {\n            this.emit(Events.QUEUE_ERROR, new DuplicateError(file, file.name + ' already in queue'));\n            return false;\n        }\n\n        file.setContext(this);\n        file.setStatus(Status.QUEUED);\n\n        file.on(Events.FILE_STATUS_CHANGE, (status) => {\n            if (status === Status.CANCELLED) {\n                this.stat.remove(file);\n            } else if (status === Status.PENDING) {\n                setTimeout(() => {\n                    if (this.pending.add(file) && this.pending.size() === 1) {\n                        this.emit(Events.QUEUE_UPLOAD_START);\n                    }\n                }, 1);\n            }\n\n            this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n            if (this.stat.getFiles(Status.PROCESS).length < 1) {\n                this.emit(Events.QUEUE_UPLOAD_END);\n            }\n        });\n\n        this.emit(Events.QUEUE_ADD, file);\n\n        this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n        if (this.autoPending) {\n            file.pending();\n        }\n\n        return true;\n    }\n\n    /**\n     * 设置自动上传\n     *\n     * @param {Boolean} flag\n     */\n    setAutoPending(flag) {\n        this.autoPending = flag;\n        if (this.autoPending) {\n            this.stat.getFiles(Status.QUEUED).forEach((file) => file.pending());\n        }\n    }\n\n    /**\n     * 设置是否多选上传\n     *\n     * @param {Boolean} flag\n     */\n    setMultiple(flag) {\n        this.multiple = flag;\n    }\n\n    isMultiple() {\n        return this.multiple;\n    }\n\n    getAccept() {\n        return this.accept;\n    }\n\n    getStat() {\n        return this.stat;\n    }\n\n    setSWF(url) {\n        PickerCollector.setSWF(url);\n    }\n\n    getPickerCollector() {\n        if (!this.picker) {\n            this.picker = new PickerCollector(this);\n        }\n        return this.picker;\n    }\n\n    getDndCollector() {\n        if (!this.dnd) {\n            this.dnd = new DndCollector(this);\n        }\n        return this.dnd;\n    }\n\n    getPasteCollector() {\n        if (!this.paster) {\n            this.paster = new PasteCollector(this);\n        }\n        return this.paster;\n    }\n}\n\n\nclass Set {\n    constructor() {\n        this._set = [];\n    }\n\n    /**\n     * 项目总数\n     *\n     * @returns {Number}\n     */\n    get size() {\n        return this._set.length;\n    }\n\n    /**\n     * 从头部取出一项\n     *\n     * @returns {*}\n     */\n    shift() {\n        return this._set.shift();\n    }\n\n    /**\n     * 从尾部取出一项\n     *\n     * @returns {*}\n     */\n    pop() {\n        return this._set.pop();\n    }\n\n    /**\n     * 获得所有项\n     *\n     * @returns {Array}\n     */\n    toArray() {\n        return this._set.slice(0);\n    }\n\n    /**\n     * 添加一项\n     *\n     * @param item\n     * @returns {boolean} success if true\n     */\n    add(item) {\n        if (this.has(item)) {\n            return false;\n        }\n        this._set.push(item);\n        return true;\n    }\n\n    /**\n     * 是否存在该项\n     *\n     * @param item\n     * @returns {boolean}\n     */\n    has(item) {\n        return this._set.indexOf(item) > -1;\n    }\n\n    /**\n     * 删除某项\n     *\n     * @returns {boolean} success if true\n     */\n    remove(item) {\n        var i = this._set.indexOf(item);\n        if (i > -1) {\n            this._set.splice(i, 1);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * 清空\n     */\n    clear() {\n        this._set = [];\n    }\n}\n\nclass Stat {\n    constructor() {\n        this.files = new Set;\n    }\n    add(file) {\n        return this.files.add(file);\n    }\n    remove(file) {\n        this.files.remove(file);\n    }\n    getTotal() {\n        return this.files.size;\n    }\n    getFiles(flag) {\n        var files = this.files.toArray();\n        if (!flag) {\n            return files;\n        }\n        return files.filter((file) => {\n            return !!(file.getStatus() & flag);\n        });\n    }\n    stat(flag) {\n        let stat = {}, files = this.getFiles(flag);\n\n        files.forEach((file) => {\n            let status = file.getStatus();\n            stat[status] = (status in stat) ?  (stat[status] + 1) : 1;\n        });\n\n        stat['sum'] = files.length;\n\n        return stat;\n    }\n}\n\nclass Limiter {\n    constructor() {\n        this.limits = new Set;\n    }\n\n    add(limit) {\n        this.limits.add(limit);\n        return this;\n    }\n\n    remove(limit) {\n        this.limits.remove(limit);\n        return this;\n    }\n\n    isLimit() {\n        return this.limits.toArray().some((fn) => fn.call(this));\n    }\n}\n\nclass Filter {\n    constructor() {\n        this.filters = new Set;\n    }\n\n    add(filter) {\n        this.filters.add(filter);\n        return this;\n    }\n\n    remove(filter) {\n        this.filters.remove(filter);\n        return this;\n    }\n\n    filter(file) {\n        this.error = null;\n        return this.filters.toArray().every((filter) => {\n            let ret;\n            try {\n                ret = filter(file);\n            } catch (e) {\n                ret = e;\n            }\n            if (typeof ret === 'string') {\n                this.error = new FilterError(file, ret);\n                return false;\n            } else if (ret instanceof Error) {\n                this.error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n                return false;\n            }\n            return true;\n        });\n    }\n\n    getError() {\n        return this.error;\n    }\n}\n\nclass Pending {\n    constructor(threads) {\n        this.threads = threads || 2;\n        this.heading = new Set;\n        this.pending = new Set;\n    }\n\n    add(file) {\n        if (!this.pending.add(file)) return false;\n\n        file.session().always(() => this.pending.remove(file));\n\n        this.load();\n\n        return true;\n    }\n\n    size() {\n        return this.pending.size + this.heading.size;\n    }\n\n    process(file) {\n        if (!this.heading.add(file)) return;\n\n        file.session().always(() => {\n            this.heading.remove(file);\n            this.load();\n        });\n    }\n\n    load () {\n        var file;\n        while (this.heading.size < this.threads && (file = this.pending.shift())) {\n            if (file.prepare()) {\n                this.process(file);\n            }\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/context.js\n **/","import $ from 'jquery';\nimport Emitter from '../emitter';\nimport Html5Runtime from '../html5/runtime';\nimport FlashRuntime from '../flash/runtime';\nimport File from '../file';\n\nlet SWF_URL = '';\n\nclass FlashTriggerCollection {\n    constructor(context, onFiles) {\n        let overlay = $('<label></label>');\n        overlay.css({\n            position: 'fixed',\n            opacity: 0,\n            left: -100,\n            top: -100,\n            width: 50,\n            height: 50,\n            display: 'block',\n            cursor: 'pointer',\n            background: '#fff',\n            overflow: 'hidden',\n            zIndex: 99999\n        });\n        const runtime = new FlashRuntime(overlay, SWF_URL, () => {\n                return {\n                    accept: context.getAccept(),\n                    multiple: context.isMultiple()\n                };\n            });\n\n        runtime.on('select', (e) => {\n            onFiles(e.files, runtime);\n            this.current && this.current.emit('files', e.files, runtime);\n        });\n\n        runtime.on('rollOut', () => this.hideOverlay());\n        this.overlay = overlay.appendTo(document.body);\n    }\n\n    hideOverlay() {\n        this.overlay.css({\n            left: -100,\n            top: -100,\n            width: 50,\n            height: 50\n        });\n        if (this.current) {\n            this.current.emit('rollOut');\n            this.current = null;\n        }\n    }\n\n\n    add(trigger) {\n        const overlay = this.overlay, emitter = new Emitter;\n        trigger = trigger.on ? trigger : $(trigger);\n        trigger.on('mouseover.flashpicker', function () {\n            let rect = this.getBoundingClientRect();\n            overlay.css({\n                left: rect.left,\n                top: rect.top,\n                width: rect.width,\n                height: rect.height\n            });\n            emitter.emit('rollOver');\n            if (this.current && this.current !== emitter) {\n                this.current.emit('rollOut');\n            }\n            this.current = emitter;\n        });\n\n        emitter.destroy = () => {\n            if (this.current === emitter) {\n                this.hideOverlay();\n            }\n            emitter.removeAllListeners();\n            trigger.off('mouseover.flashpicker');\n        };\n\n        return emitter;\n    }\n}\n\nclass Html5TriggerCollection {\n    constructor(context, onFiles) {\n        const runtime = Html5Runtime.getInstance();\n\n        this._createInput = (label) => {\n            let input = $(document.createElement('input'));\n\n            input.attr('type', 'file');\n            input.css({\n                position:'absolute',\n                clip: 'rect(1px 1px 1px 1px)'\n            });\n\n            let accept = context.getAccept();\n            if (accept && accept.length > 0) {\n                accept = accept.map(function (item) {\n                    return item.mimeTypes;\n                });\n\n                input.attr('accept', accept.join(','));\n            }\n            if (context.isMultiple()) {\n                input.attr('multiple', 'multiple');\n            }\n\n            input.on('change', (e) => {\n                onFiles(e.target.files, runtime);\n                input.remove();\n                this._createInput(label);\n            });\n            label.html(input);\n        };\n    }\n\n    add(trigger) {\n        const label = $('<label></label>'), emitter = new Emitter;\n        label.css({\n            position: 'absolute',\n            opacity: 0,\n            top:0,left:0,\n            width: '100%',\n            height: '100%',\n            display: 'inline-block',\n            cursor: 'pointer',\n            background: '#fff',\n            overflow: 'hidden'\n        });\n        this._createInput(label);\n        trigger = trigger.append ? trigger : $(trigger);\n        trigger.append(label);\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            label.remove();\n        };\n\n        return emitter;\n    }\n}\n\nexport default class PickerCollector {\n    static setSWF(url) {\n        SWF_URL = url;\n    }\n    constructor(context) {\n\n        const onFiles = (files, runtime) => {\n            for (let i = 0, l = files.length; i < l && !context.isLimit(); i++) {\n                context.add(new File(runtime, files[i]));\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window)) {\n            this.triggerCollection = new Html5TriggerCollection(context, onFiles);\n        } else {\n            this.triggerCollection = new FlashTriggerCollection(context, onFiles);\n        }\n    }\n\n    addArea(area) {\n        return this.triggerCollection.add(area);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/picker.js\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 10\n ** module chunks = 0\n **/","import {Deferred} from 'jquery';\nimport Runtime from '../runtime';\nimport Transport from './transport';\n\nlet instance;\n\nexport default class Html5Runtime extends Runtime {\n    static getInstance() {\n        if (!instance) {\n            instance = new Html5Runtime;\n        }\n        return instance;\n    }\n\n    getAsDataUrl(blob, timeout) {\n        let i = Deferred(),\n            fr = new FileReader, timer;\n\n        fr.onloadend = () => {\n            if (fr.readyState == FileReader.DONE) {\n                i.resolve(fr.result);\n            } else {\n                i.reject();\n            }\n            clearTimeout(timer);\n            fr.onloadend = null;\n        };\n        fr.readAsDataURL(blob);\n\n        let abort = () => {\n            fr && fr.abort();\n            fr = null;\n        };\n        if (timeout) {\n            timer = setTimeout(abort, timeout);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    getTransport() {\n        if (!this.transport) {\n            this.transport = new Transport(this);\n        }\n        return this.transport;\n    }\n\n    canSlice() {\n        return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n    }\n\n    slice(blob, start, end) {\n        let blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\n        return blobSlice.call(blob, start, end);\n    }\n\n    md5(blob) {\n        const i = Deferred();\n\n        if (!window.SparkMD5) {\n            i.reject();\n            return i.promise();\n        }\n\n        let chunkSize = 2 * 1024 * 1024,\n            chunks = Math.ceil(blob.size / chunkSize),\n            chunk = 0,\n            spark = new SparkMD5.ArrayBuffer(),\n            blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\n        let fr = new FileReader;\n\n        var loadNext = () => {\n            if (!fr) return;\n            let start, end;\n\n            start = chunk * chunkSize;\n            end = Math.min(start + chunkSize, blob.size);\n\n            fr.onload = () => {\n                spark && spark.append(fr.result);\n            };\n\n            fr.onloadend = () => {\n                if (!fr) return;\n                if (fr.readyState == FileReader.DONE) {\n                    if (++chunk < chunks) {\n                        setTimeout(loadNext, 1);\n                    } else {\n                        setTimeout(() => {\n                            spark && i.resolve(spark.end());\n                            loadNext = blob = spark = null;\n                        }, 50);\n                    }\n                } else {\n                    i.reject();\n                }\n                fr.onloadend = fr.onload = null;\n            };\n\n            fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n        };\n\n        loadNext();\n\n        let ret = i.promise();\n        ret.abort = function () {\n            fr && fr.abort();\n            spark = null;\n            fr = null;\n        };\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/runtime.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport Status, {StatusName} from './status';\nimport {Deferred} from 'jquery';\n\nlet uid = 0;\nfunction guid() {\n    return 'FILE-' + (uid++).toString(16).toUpperCase();\n}\n\nconst RE_EXT = /\\.([^.]+)$/, RE_IMAGE = /\\/(jpg|jpeg|png|gif|bmp)$/i;\nfunction guessExt(blob) {\n    let m = blob.name && RE_EXT.exec(blob.name);\n    if (m) {\n        return m[1];\n    }\n    m = blob.type && RE_IMAGE.exec(blob.type);\n    if (m) {\n        return m[1];\n    }\n    return '';\n}\n\nfunction guessType(ext) {\n    if (['jpg','jpeg','png','gif','bmp'].indexOf(ext.toLowerCase())) {\n        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n    }\n    return null;\n}\n\nexport default class Progress {\n    constructor(total, loaded) {\n        this.total = total;\n        this.loaded = loaded;\n    }\n\n    get percentage() {\n        return this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100);\n    }\n}\n\nexport default class File extends Emitter {\n    constructor(runtime, source, filename) {\n        super();\n\n        this.id = guid();\n\n        this.name = source.name || filename || this.id;\n\n        var ext = guessExt(source).toLowerCase();\n\n        if (ext && !RE_EXT.test(this.name)) {\n            this.name += '.' + ext;\n        }\n\n        this.ext = ext;\n\n        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\n        this.lastModified = source.lastModified || (+new Date);\n\n        this.size = source.size || 0;\n\n        this.runtime = runtime;\n\n        this.source = source;\n\n        this.status = Status.INITED;\n\n        this.progress = new Progress(this.size, 0);\n    }\n\n    getContext() {\n        return this.context;\n    }\n\n    setContext(context) {\n        this.context = context;\n        this.setPropagationTarget(context);\n    }\n\n    getRuntime() {\n        return this.runtime;\n    }\n\n    isImage() {\n        return RE_IMAGE.test(this.type);\n    }\n\n    setStatus(status) {\n        let prevStatus = this.status;\n\n        if (prevStatus !== Status.CANCELLED && status !== prevStatus) {\n            this.status = status;\n            this.emit(Events.FILE_STATUS_CHANGE, status, prevStatus);\n        }\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    getStatusName() {\n        if (this.status in StatusName) {\n            return StatusName[this.status];\n        } else {\n            return 'unknow';\n        }\n    }\n\n    getSource() {\n        return this.source;\n    }\n\n    getAsDataUrl(timeout) {\n        if (!this._dataUrlPromise) {\n            this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n        }\n        return this._dataUrlPromise;\n    }\n\n    md5() {\n        if (!this._md5Promise) {\n            this._md5Promise = this.runtime.md5(this.source);\n        }\n        return this._md5Promise;\n    }\n\n    session() {\n        if (this._sessionPromise) {\n            return this._sessionPromise;\n        }\n\n        let session = Deferred();\n\n        session.progress((progress) => {\n            this.setStatus(Status.PROGRESS);\n            this.emit(Events.FILE_UPLOAD_PROGRESS, progress);\n        }).done((response) => {\n            this.response = response;\n            this._session = null;\n            this._sessionPromise = null;\n            this._flows = [];\n            this.setStatus(Status.SUCCESS);\n            this.emit(Events.FILE_UPLOAD_SUCCESS, response);\n        }).fail((error) => {\n            this._session = null;\n            this._sessionPromise = null;\n            let flow;\n            while (flow = this._flows.shift()) {\n                flow.abort();\n            }\n\n            if (error instanceof Error) {\n                this.setStatus(Status.ERROR);\n                this.emit(Events.FILE_UPLOAD_ERROR, error);\n            }\n        }).always(() => {\n            this.emit(Events.FILE_UPLOAD_COMPLETED, this.getStatus());\n        });\n\n        this._flows = [];\n        this._session = session;\n        this._sessionPromise = session.promise();\n\n        return this._sessionPromise;\n    }\n\n    prepare() {\n        if (this.status !== Status.PENDING || !this.context) {\n            return false;\n        }\n\n        this.session();\n        this.setStatus(Status.PROGRESS);\n\n        this.emit(Events.FILE_UPLOAD_START);\n\n        this.request = this.context.createFileRequest(this);\n\n        const prepare = this.context.invoke(Events.FILE_UPLOAD_PREPARING, this.request);\n\n        this._flows.push(prepare);\n\n        prepare.then((request) => {\n            this.emit(Events.FILE_UPLOAD_PREPARED, request);\n\n            const upload = this.runtime.getUploading().generate(request);\n\n            this._flows.push(upload);\n\n            upload.progress((e) => {\n                this.progress.total = e.total;\n                this.progress.loaded = e.loaded;\n                this._session.notify(this.progress);\n            });\n\n            return upload;\n        }).then((response) => this.complete(response), this._session.reject);\n\n        return true;\n    }\n\n    complete(response) {\n        if (this.status !== Status.PROGRESS) return;\n\n        let flow;\n        while (flow = this._flows.shift()) {\n            flow.abort();\n        }\n\n        this.progress.loaded = this.progress.total;\n        this._session.notify(this.progress);\n\n        response = this.request.createFileResponse(response);\n\n        this.setStatus(Status.END);\n        this.emit(Events.FILE_UPLOAD_END);\n\n        const complete = this.context.invoke(Events.FILE_UPLOAD_COMPLETING, response);\n\n        this._flows.push(complete);\n\n        complete.then(this._session.resolve, this._session.reject);\n    }\n\n    pending() {\n        if (this.status === Status.ERROR || this.status === Status.QUEUED) {\n            this.progress.total = this.size;\n            this.progress.loaded = 0;\n            this.setStatus(Status.PENDING);\n        }\n    }\n\n    abort() {\n        this._session && this._session.reject();\n        this._session = null;\n        this._sessionPromise = null;\n    }\n\n    cancel() {\n        this.setStatus(Status.CANCELLED);\n        this.emit(Events.FILE_CANCEL);\n        this.abort();\n        this.runtime.cancel(this.source);\n        this._dataUrlPromise && this._dataUrlPromise.abort();\n        this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n        this.removeAllListeners();\n    }\n\n    destroy() {\n        this.cancel();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/file.js\n **/","import Runtime from '../runtime';\nimport Transport from './transport';\n\nfunction getFlashVersion() {\n    let version;\n\n    try {\n        version = navigator.plugins['Shockwave Flash'];\n        version = version.description;\n    } catch (e1) {\n        try {\n            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n        } catch (e2) {\n            version = '0.0';\n        }\n    }\n    version = version.match(/\\d+/g);\n    return parseFloat(version[0] + '.' + version[1]);\n}\n\nfunction callFlash(movie, functionName, argumentArray) {\n    try {\n        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n    } catch (ex) {\n        throw \"Call to \" + functionName + \" failed\";\n    }\n}\n\nfunction createFlash(swf, callInterface) {\n    if (getFlashVersion() < 11.4) {\n        throw 'flash player is not available';\n    }\n    const div = document.createElement('div');\n    let url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n    let attrs = [\n        'id=\"' + callInterface + '-Picker\"',\n        'type=\"application/x-shockwave-flash\"',\n        'data=\"' + url + '\"',\n        'width=\"100%\" height=\"100%\"',\n        'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'\n    ];\n    if (window.ActiveXObject) {\n        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n    }\n    div.innerHTML = '<object ' + attrs.join(' ') + '>' +\n        '<param name=\"movie\" value=\"' + url + '\" />' +\n        '<param name=\"wmode\" value=\"transparent\" />' +\n        '<param name=\"allowscriptaccess\" value=\"always\" />' +\n    '</object>';\n\n    return div.firstChild;\n}\n\nlet _guid = +new Date;\nfunction guid(prefix) {\n    let ret = prefix + (_guid++).toString(16);\n    if (ret in window) {\n        return guid(prefix);\n    }\n    return ret;\n}\n\nexport default class FlashRuntime extends Runtime {\n    constructor(trigger, swf, options) {\n        super();\n\n        const callInterface = guid('FlashRuntime');\n\n        this.callInterface = callInterface;\n        window[callInterface] = this;\n\n        this.options = options;\n\n        const display = () => {\n            let w = trigger[0].offsetWidth, h = trigger[0].offsetHeight, flash;\n            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n                setTimeout(display, 1000);\n                return;\n            }\n\n            trigger.append(this.flash = flash);\n        };\n\n        display();\n    }\n    getOptions() {\n        let options = this.options;\n        if (typeof options === 'function') {\n            options = options();\n        }\n        return options;\n    }\n    getTransport(name, blob, options) {\n        return new Transport(this, name, blob, options);\n    }\n    send(name, blob, url, params) {\n        callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n    }\n    abort(blob) {\n        try {\n            callFlash(this.flash, 'exec', ['abort', blob.id]);\n        } catch (e) {}\n    }\n    cancel(blob) {\n        callFlash(this.flash, 'exec', ['cancel', blob.id]);\n    }\n    ping() {\n        callFlash(this.flash, 'exec', ['pang']);\n    }\n    destroy() {\n        delete window[this.callInterface];\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/runtime.js\n **/","import Emitter from './emitter';\nimport Events from './events';\nimport {NetworkError} from './errors';\nimport {Deferred} from 'jquery';\n\nexport default class Runtime extends Emitter {\n    md5(blob) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getAsDataUrl(file, timeout) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getTransport() {\n        return null;\n    }\n    getUploading() {\n        if (!this.uploading) {\n            this.uploading = new Uploading(this);\n        }\n        return this.uploading;\n    }\n    canSlice() {\n        return false;\n    }\n    slice(blob) {\n        throw new Error('this runtime current not support slice');\n    }\n\n    cancel(blob) {\n\n    }\n}\n\n\nclass Uploading {\n    constructor(runtime) {\n        this.runtime = runtime;\n    }\n\n    /**\n     * @param {FileRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(),\n            file = request.getFile(),\n            runtime = this.runtime;\n\n        let source = file.getSource(), size = file.size,\n            chunkSize = request.getChunkSize(),\n            useChunk = request.isChunkEnable(),\n            threads = request.getChunkProcessThreads(),\n            start = 0, end = 0, slots = [];\n\n        const getActives = () => {\n            return slots.reduce((sum, slot) => sum + (slot.state() === 'pending' ? 1 : 0), 0);\n        };\n\n        const readChunk = () => {\n            let slot, req, blob;\n            while (end < size && getActives() < threads) {\n                start = end;\n                end = Math.min(end + chunkSize, size);\n                blob = runtime.slice(source, start, end);\n                req = request.createChunkRequest(slots.length, blob);\n                slot = this.slot(req, request.getChunkRetries());\n                slot.progress(progress).done(done).fail(fail);\n                slots.push(slot);\n            }\n        };\n\n        const progress = () => {\n            let total = size - end, loaded = 0;\n            slots.forEach((slot) => {\n                total += slot.total;\n                loaded += slot.loaded;\n            });\n            i.notify({total, loaded});\n        };\n\n        const done = (res) => {\n            useChunk && readChunk();\n\n            if (end >= size && slots.every((slot) => slot.state() === 'resolved')) {\n                i.resolve(res);\n            }\n        };\n\n        const abort = () => {\n            slots.forEach((slot) => slot.abort());\n        };\n\n        const fail = (error) => {\n            i.reject(error);\n            abort();\n        };\n\n        if (useChunk) {\n            readChunk();\n        } else {\n            end = size;\n            let slot = this.slot(request.createChunkRequest(0, source), 0);\n            slot.progress(progress).done(done).fail(fail);\n            slots.push(slot);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    slot(request, retries) {\n        let i = Deferred(),\n            runtime = this.runtime,\n            context = request.getFile().getContext();\n\n        let slot = i.promise();\n\n        const progress = (e) => {\n            if (e.total) {\n                slot.total = e.total;\n            }\n            if (e.loaded) {\n                slot.loaded = e.loaded;\n            }\n            i.notify(e);\n        };\n\n        const process = () => {\n            var prepare, transport, completion;\n            slot.abort = function () {\n                prepare && prepare.abort();\n                transport && transport.abort();\n                completion && completion.abort();\n            };\n            slot.total = request.getBlob().size;\n            slot.loaded = 0;\n\n            prepare = context.invoke(Events.CHUNK_UPLOAD_PREPARING, request);\n\n            prepare.then((request) => {\n                transport = runtime.getTransport().generate(request);\n                transport.progress(progress);\n                return transport;\n            }).then((response) => {\n                completion = context.invoke(Events.CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n                return completion;\n            }).done(i.resolve).fail(error);\n        };\n\n        const error = (e) => {\n            if (e instanceof NetworkError && retries-- > 0) {\n                // retry\n                setTimeout(process, 500);\n            } else {\n                i.reject(e);\n            }\n            slot.abort();\n        };\n\n        process();\n\n        return slot;\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/runtime.js\n **/","import {TimeoutError, AbortError, NetworkError} from '../errors';\nimport {Deferred} from 'jquery';\n\nexport default class Html5Transport {\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred();\n\n        let timeoutTimer, withCredentials = false;\n        let xhr = new XMLHttpRequest;\n\n        if (request.isWithCredentials && !('withCredentials' in xhr) && ('XDomainRequest' in window)) {\n            xhr = new XDomainRequest;\n            withCredentials = true;\n        }\n\n        const clean = () => {\n            xhr.onload = xhr.onerror = null;\n            if (xhr.upload) {\n                xhr.upload.onprogress = null;\n            }\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n\n        const abort = () => {\n            clean();\n            try {\n                xhr.abort();\n            } catch (e) {}\n        };\n\n        const complete = (e) => {\n            clean();\n            if (!xhr.status && e.type === 'error') {\n                return i.reject(new AbortError(e.message));\n            }\n            if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n                return i.resolve(xhr.responseText);\n            }\n            return i.reject(new NetworkError(xhr.status, xhr.statusText));\n        };\n\n        if (xhr.upload) {\n            xhr.upload.onprogress = (e) => i.notify(e);\n        }\n        xhr.onerror = complete;\n        xhr.onload = complete;\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            if (withCredentials) {\n                xhr.open('POST', request.getUrl(), true);\n                xhr.withCredentials = true;\n            } else {\n                xhr.open('POST', request.getUrl());\n            }\n\n            request.getHeaders().forEach((header) => xhr.setRequestHeader(header.name, header.value));\n\n            const formData = new FormData, blob = request.getBlob();\n\n            request.getParams().toArray().forEach((param) => formData.append(param.name, param.value));\n\n            formData.append(request.getName(), blob, blob.name || 'blob');\n\n            xhr.send(formData);\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/transport.js\n **/","import {TimeoutError, AbortError, NetworkError} from '../errors';\nimport {Deferred} from 'jquery';\n\nexport default class FlashTransport {\n    constructor(flashRuntime) {\n        this.flashRuntime = flashRuntime;\n    }\n\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(), flashRuntime = this.flashRuntime, blob = request.getBlob();\n\n        let timeoutTimer;\n\n        const clean = () => {\n            flashRuntime.off('uploadprogress', progress);\n            flashRuntime.off('uploadcomplete', complete);\n            flashRuntime.off('uploaderror', error);\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n        const abort = () => {\n            clean();\n            flashRuntime.abort(blob.id);\n        };\n\n        const progress = (e) => {\n            if (e.id !== blob.id) return;\n            i.notify(e);\n        };\n\n        const complete = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            if (e.status === 304 || e.status >= 200 && e.status < 300) {\n                flashRuntime.cancel(blob);\n                return i.resolve(e.response);\n            }\n            return i.reject(new NetworkError(e.status, e.response));\n        };\n\n        const error = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            i.reject(new AbortError(e.message));\n        };\n        flashRuntime.on('uploadprogress', progress);\n        flashRuntime.on('uploadcomplete', complete);\n        flashRuntime.on('uploaderror', error);\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/transport.js\n **/"],"sourceRoot":""}