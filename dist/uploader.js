var UXUploader=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=r(i),u=n(2),a=r(u),s=n(3),l=r(s);t["default"]=o["default"],t.Events=a["default"],t.Status=l["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),a=r(u),s=n(5),l=r(s),c=n(11),f=r(c),h=n(12),d=r(h),p=function(){function e(t){i(this,e),this.context=t,this.runtime=f["default"].getInstance()}return o(e,[{key:"addArea",value:function(e){e=e.on?e:a["default"](e);var t=this.context,n=this.runtime,r=new l["default"],i=function(e){if(!e.isDefaultPrevented()){var i=(e.originalEvent||e).clipboardData,o=i.items,u=i.files;try{if(!o&&!u||i.getData("text/html"))return}catch(a){}var s=void 0,l=void 0,c=void 0,f=void 0,h=void 0;if(u&&u.length)for(s=u.length>0,l=0,c=u.length;c>l&&!t.isLimit()&&(f=new d["default"](n,u[l]),s=1,!t.add(f)||t.isMultiple());l++);else if(o&&o.length){var p=i.getData("text/plain");for(l=0,c=o.length;c>l&&!t.isLimit()&&(h=o[l],"file"!==h.kind||!(f=h.getAsFile())||(f=new d["default"](n,f,p),p=null,s=1,!t.add(f)||t.isMultiple()));l++);}s&&(e.preventDefault(),e.stopPropagation(),r.emit("paste",i))}};return e.on("paste",i),r.destroy=function(){r.removeAllListeners(),e.off("paste",i)},r}}],[{key:"isSupport",value:function(){return"DataTransfer"in window&&"FileList"in window}}]),e}();t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={QUEUE_UPLOAD_START:"queueuploadstart",QUEUE_UPLOAD_END:"queueuploadend",QUEUE_ADD:"queueadd",QUEUE_ERROR:"queueerror",QUEUE_STAT_CHANGE:"statchange",FILE_UPLOAD_START:"fileuploadstart",FILE_UPLOAD_PREPARING:"fileuploadpreparing",FILE_UPLOAD_PREPARED:"fileuploadprepared",CHUNK_UPLOAD_PREPARING:"chunkuploadpreparing",CHUNK_UPLOAD_COMPLETING:"chunkuploadcompleting",FILE_UPLOAD_PROGRESS:"fileuploadprogress",FILE_UPLOAD_END:"fileuploadend",FILE_UPLOAD_COMPLETING:"fileuploadcompleting",FILE_UPLOAD_SUCCESS:"fileuploadsuccess",FILE_UPLOAD_ERROR:"fileuploaderror",FILE_UPLOAD_COMPLETED:"fileuploadcompleted",FILE_CANCEL:"filecancel",FILE_STATUS_CHANGE:"filestatuschange"},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={ALL:255,PROCESS:31,INITED:1,QUEUED:2,PENDING:4,PROGRESS:8,END:16,SUCCESS:32,ERROR:64,CANCELLED:128};var r={1:"inited",2:"queued",4:"pending",8:"progress",16:"end",32:"success",64:"error",128:"cancelled"};t.StatusName=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.rawResponse=t,this.chunkRequest=n}return i(e,[{key:"getChunkRequest",value:function(){return this.chunkRequest}},{key:"getRawResponse",value:function(){return this.rawResponse}},{key:"getResponse",value:function(){return this.response||this.rawResponse}},{key:"setResponse",value:function(e){return this.response=e,this}}]),e}(),u=function(){function e(t,n,i){r(this,e),this.index=t,this.blob=n,this.fileRequest=i}return i(e,[{key:"getName",value:function(){return this.fileRequest.getName()}},{key:"getFile",value:function(){return this.fileRequest.getFile()}},{key:"getBlob",value:function(){return this.blob}},{key:"getIndex",value:function(){return this.index}},{key:"isMultiChunk",value:function(){return this.getFile().source!==this.blob}},{key:"getParams",value:function(){return this.params||(this.params=this.fileRequest.getParams().clone()),this.params}},{key:"getParam",value:function(e){return this.getParams().getParam(e)}},{key:"setParam",value:function(e,t){return this.getParams().setParam(e,t),this}},{key:"getFileRequest",value:function(){return this.fileRequest}},{key:"getUrl",value:function(){return this.url||this.fileRequest.getUrl()}},{key:"setUrl",value:function(e){return this.url=e,this}},{key:"getHeaders",value:function(){return this.headers||(this.headers=this.fileRequest.getHeaders().slice(0)),this.headers}},{key:"setHeader",value:function(e,t){var n=this.getHeaders();return n.push({name:e,value:t}),this}},{key:"isWithCredentials",value:function(){return this.fileRequest.isWithCredentials()}},{key:"getTimeout",value:function(){return this.fileRequest.getTimeout()}},{key:"createChunkResponse",value:function(e){return new o(e,this)}}]),e}(),a=function(){function e(t,n){r(this,e),this.rawResponse=t,t instanceof o&&(this.response=t.getResponse(),this.fromChunkResponse=!0),this.fileRequest=n}return i(e,[{key:"isFromMultiChunkResponse",value:function(){return this.fromChunkResponse?this.rawResponse.getChunkRequest().isMultiChunk():!1}},{key:"getFileRequest",value:function(){return this.fileRequest}},{key:"getRawResponse",value:function(){return this.rawResponse}},{key:"getResponse",value:function(){return this.response||this.rawResponse}},{key:"setResponse",value:function(e){return this.response=e,this}}]),e}(),s=function(){function e(t){if(r(this,e),Array.isArray(t))this.params=t.slice(0);else if("object"==typeof t){this.params=[];for(var n in t)t.hasOwnProperty(n)&&this.params.push({name:n,value:t[n]})}else this.params=[]}return i(e,[{key:"setParam",value:function(e,t){this.removeParam(e),this.addParam(e,t)}},{key:"addParam",value:function(e,t){this.params.push({name:e,value:t})}},{key:"removeParam",value:function(e){this.params=this.params.filter(function(t){return t.name!==e})}},{key:"getParam",value:function(e,t){var n=this.params.filter(function(t){return t.name===e}).map(function(e){return e.value});return t?n.shift():n}},{key:"clone",value:function(){return new e(this.params)}},{key:"toArray",value:function(){return this.params}},{key:"toString",value:function(){var e=this.params.map(function(e){return encodeURIComponent(e.name)+"="+(null==e.value?"":encodeURIComponent(e.value))});return e.join("&")}}]),e}(),l=262144,c=function(){function e(t){var n=void 0===arguments[1]?{}:arguments[1];r(this,e),this.file=t,this.name=n.name||"file",this.url=n.url,this.params=new s(n.params),this.headers=n.headers||[],this.withCredentials=n.withCredentials,this.timeout=n.timeout||0,this.chunkSize=n.chunkSize||0,this.chunkRetries=n.chunkRetries||0,this.chunkEnable=n.chunkEnable||!1,this.chunkProcessThreads=n.chunkProcessThreads||0}return i(e,[{key:"getFile",value:function(){return this.file}},{key:"getUrl",value:function(){return this.url||""}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUrl",value:function(e){return this.url=e,this}},{key:"getParams",value:function(){return this.params}},{key:"getParam",value:function(e){return this.getParams().getParam(e)}},{key:"setParam",value:function(e,t){return this.params.setParam(e,t),this}},{key:"getHeaders",value:function(){return this.headers}},{key:"setHeader",value:function(e,t){this.headers.push({name:e,value:t})}},{key:"isWithCredentials",value:function(){return this.withCredentials}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"getTimeout",value:function(){return this.timeout}},{key:"setTimeout",value:function(e){return this.timeout=e,this}},{key:"getChunkSize",value:function(){return this.chunkSize}},{key:"setChunkSize",value:function(e){return this.chunkSize=e,this}},{key:"getChunkRetries",value:function(){return this.chunkRetries}},{key:"setChunkRetries",value:function(e){return this.chunkRetries=e,0}},{key:"isChunkEnable",value:function(){return this.chunkEnable&&this.chunkSize>l&&this.file.getRuntime().canSlice()&&this.file.size>this.chunkSize}},{key:"setChunkEnable",value:function(e){return this.chunkEnable=e,this}},{key:"getChunkProcessThreads",value:function(){return this.chunkProcessThreads}},{key:"setChunkProcessThreads",value:function(e){return this.chunkProcessThreads=e,this}},{key:"createChunkRequest",value:function(e,t){return new u(e,t,this)}},{key:"createFileResponse",value:function(e){return new a(e,this)}}]),e}();t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){var r=t,i=null,o=void 0,a=u.Deferred(),s=a.promise();s.abort=function(){o=!0};var l=function(e){o||(e&&(i=e instanceof Error?e:new Error(e)),a.reject(i||new Error("Unknown")))},c=function(){o||(null!=i?l():a.resolve(r))},f=function(e){null==e||null!=r&&e.constructor!==r.constructor||(r=e)},h=function d(t){if(!o){if(t instanceof Error&&(i=t),null!=i)return l();f(t);var u=e.shift();if(!u)return c();var a=void 0;try{a=u.call(n,r)}catch(s){return l(s)}a&&a.then?a.then(d,l):d(a)}};return setTimeout(h,1),s}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),a=function(){function e(){r(this,e)}return o(e,[{key:"on",value:function(e,t){return e=e.toLowerCase(),this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this}},{key:"once",value:function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}e=e.toLowerCase();var r=this;return n.listener=t,this.on(e,n),this}},{key:"off",value:function(e,t){e=e.toLowerCase();var n=void 0;if(!this._events||!(n=this._events[e]))return this;for(var r=n.length;r-->0;)if(n[r]===t||n[r].listener===t){n.splice(r,1);break}return 0===n.length&&delete this._events[e],this}},{key:"removeAllListeners",value:function(e){return e?delete this._events[e.toLowerCase()]:this._events=[],this}},{key:"setPropagationTarget",value:function(t){t instanceof e&&(this.propagationTarget=t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return this.applyEmit(e,n),this}},{key:"applyEmit",value:function(e,t){var n=this;e=e.toLowerCase();var r=void 0;if(this._events&&(r=this._events[e])&&r.slice(0).forEach(function(e){return e.apply(n,t)}),this.propagationTarget){var i=t.slice(0);i.unshift(this),this.propagationTarget.applyEmit(e,i)}return this}},{key:"invoke",value:function(e,t){e=e.toLowerCase();var n=void 0;return this._events&&(n=this._events[e])||(n=[]),i(n.slice(0),t,this)}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;a=l=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=u,r=!0}},u=function(e){function t(e){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.name="AbortError"}return i(t,e),t}(Error);t.AbortError=u;var a=function(e){function t(e){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.name="TimeoutError"}return i(t,e),t}(Error);t.TimeoutError=a;var s=function(e){function t(e,n){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),this.name="NetworkError",this.status=e}return i(t,e),t}(Error);t.NetworkError=s;var l=function(e){function t(){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"queue limit"),this.name="QueueLimitError"}return i(t,e),t}(Error);t.QueueLimitError=l;var c=function(e){function t(e,n){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),this.name="FilterError",this.file=e}return i(t,e),t}(Error);t.FilterError=c;var f=function(e){function t(e,n){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.name="DuplicateError"}return i(t,e),t}(c);t.DuplicateError=f;var h=function(e){function t(e,n){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.name="FileExtensionError"}return i(t,e),t}(c);t.FileExtensionError=h;var d=function(e){function t(e,n){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.name="FileSizeError"}return i(t,e),t}(c);t.FileSizeError=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function u(e){function t(t,r){for(var i,o=t.items,u=t.files,a=0,s=u.length;s>a;a++){i=o&&o[a];var l=i&&i.webkitGetAsEntry&&i.webkitGetAsEntry();l&&l.isDirectory?n(l,r):e(u[a],r)}}function n(t,r){t.isFile?t.file(function(t){return e(t,r)}):t.isDirectory&&t.createReader().readEntries(function(e){for(var t=0,i=e.length;i>t;t++)n(e[t],r)})}return t}function a(){var e=f["default"](document),t=v["default"].getInstance(),n=0,r=0,i=void 0,o=u(function(e,n){!n||n.length<1||(e=new m["default"](t,e),n.some(function(t){return t.recieve(e)}))}),a=function(e){n=1,k.forEach(function(t){return t.start(e)})},s=function(e){var t=k.filter(function(t){return t.response(e)}),n=(e.originalEvent||e).dataTransfer;n&&(n.dropEffect=t.length?"copy":"none"),e.preventDefault()},l=function(e){n=0,r=0,k.forEach(function(t){return t.end(e)})},c=function(e){clearTimeout(i);var t="dragleave"===e.type;t||n||a(e),s(e),t&&(i=setTimeout(function(){return l(e)},100))},h=function(e){e.preventDefault(),clearTimeout(i),l(e);var t=k.filter(function(t){return t.contains(e.target)});if(!(t.length<1)){var n=(e.originalEvent||e).dataTransfer;try{if(n.getData("text/html"))return}catch(r){}o(n,t)}};e.on("dragenter dragover dragleave",c),e.on("drop",h)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;a=l=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=u,r=!0}},c=n(10),f=r(c),h=n(5),d=r(h),p=n(11),v=r(p),y=n(12),m=r(y),g=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.areaElement=e}return o(t,e),s(t,[{key:"contains",value:function(e){return this.areaElement.contains(e)}},{key:"start",value:function(e,t){this.emit("start",e,t)}},{key:"response",value:function(e,t){return t=t&&this.contains(e.target),this.emit("response",e,t),t}},{key:"end",value:function(e){this.emit("end",e)}}]),t}(d["default"]),k=[],E=function(){function e(t){i(this,e),k.length<1&&a(),k.push(this),this.context=t,this.areas=[]}return s(e,[{key:"addArea",value:function(e){var t=this;return e=new g(e),this.areas.push(e),e.destroy=function(){e.removeAllListeners();var n=t.areas.indexOf(e);n>-1&&t.areas.splice(n,1)},e}},{key:"contains",value:function(e){return this.areas.some(function(t){return t.contains(e)})}},{key:"start",value:function(e){var t=!this.context.isLimit();this.areas.forEach(function(n){return n.start(e,t)})}},{key:"response",value:function(e){var t=!this.context.isLimit(),n=this.areas.map(function(n){return n.response(e,t)});return t&&n.some(function(e){return!!e})}},{key:"recieve",value:function(e){return this.context.add(e)}},{key:"end",value:function(e){this.areas.forEach(function(t){return t.end(e)})}}],[{key:"isSupport",value:function(){return"DataTransfer"in window&&"FileList"in window}}]),e}();t["default"]=E,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;a=l=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=u,r=!0}},s=n(5),l=r(s),c=n(2),f=r(c),h=n(3),d=r(h),p=n(6),v=n(4),y=r(v),m=n(7),g=r(m),k=n(1),E=r(k),b=n(9),_=r(b),w=function(e){function t(e){var n=this;i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=e.processThreads,o=e.autoPending,u=e.queueCapcity,s=e.accept,l=e.sizeLimit,c=e.preventDuplicate,f=e.multiple;this.stat=new O,this.limiter=new R,this.filter=new C,this.accept=s,this.autoPending=o,this.multiple=null==f?!0:f,this.pending=new S(r),u&&u>0&&this.addLimit(function(){return n.stat.getTotal()>=u}),s&&s.length>0&&this.addFilter(function(e){if(s){var t=s.some(function(t){return t.extensions&&t.extensions.split(",").indexOf(e.ext)>-1});if(!t)return new p.FileExtensionError(e,e.ext+" is not allowed.")}}),l&&l>0&&this.addFilter(function(e){return e.size>l?new p.FileSizeError(e,e.size+" is greater than limit:"+l):void 0}),c&&this.addFilter(function(e){var t=n.stat.getFiles().some(function(t){return t.name===e.name&&t.size===e.size});return t?new p.DuplicateError(e,e.name+" already in queue"):void 0}),this.requestOptions=e.request||{}}return o(t,e),u(t,[{key:"createFileRequest",value:function(e){return new y["default"](e,this.requestOptions)}},{key:"isLimit",value:function(){return this.limiter.isLimit()}},{key:"addLimit",value:function(e){return this.limiter.add(e)}},{key:"addFilter",value:function(e){return this.filter.add(e)}},{key:"isAllow",value:function(e){return this.filter.filter(e)}},{key:"add",value:function(e){var t=this;return this.isLimit()?(this.emit(f["default"].QUEUE_ERROR,new p.QueueLimitError),!1):this.isAllow(e)?this.stat.add(e)?(e.setContext(this),e.setStatus(d["default"].QUEUED),e.on(f["default"].FILE_STATUS_CHANGE,function(n){n===d["default"].CANCELLED?t.stat.remove(e):n===d["default"].PENDING&&setTimeout(function(){t.pending.add(e)&&1===t.pending.size()&&t.emit(f["default"].QUEUE_UPLOAD_START)},1),t.emit(f["default"].QUEUE_STAT_CHANGE,t.stat),t.stat.getFiles(d["default"].PROCESS).length<1&&t.emit(f["default"].QUEUE_UPLOAD_END)}),this.emit(f["default"].QUEUE_ADD,e),this.emit(f["default"].QUEUE_STAT_CHANGE,this.stat),this.autoPending&&e.pending(),!0):(this.emit(f["default"].QUEUE_ERROR,new p.DuplicateError(e,e.name+" already in queue")),!1):(this.emit(f["default"].QUEUE_ERROR,this.filter.getError()),!1)}},{key:"setAutoPending",value:function(e){this.autoPending=e,this.autoPending&&this.stat.getFiles(d["default"].QUEUED).forEach(function(e){return e.pending()})}},{key:"setMultiple",value:function(e){this.multiple=e}},{key:"isMultiple",value:function(){return this.multiple}},{key:"getAccept",value:function(){return this.accept}},{key:"getStat",value:function(){return this.stat}},{key:"setSWF",value:function(e){_["default"].setSWF(e)}},{key:"getPickerCollector",value:function(){return this.picker||(this.picker=new _["default"](this)),this.picker}},{key:"getDndCollector",value:function(){return this.dnd||(this.dnd=new g["default"](this)),this.dnd}},{key:"getPasteCollector",value:function(){return this.paster||(this.paster=new E["default"](this)),this.paster}}]),t}(l["default"]);t["default"]=w;var P=function(){function e(){i(this,e),this._set=[]}return u(e,[{key:"size",get:function(){return this._set.length}},{key:"shift",value:function(){return this._set.shift()}},{key:"pop",value:function(){return this._set.pop()}},{key:"toArray",value:function(){return this._set.slice(0)}},{key:"add",value:function(e){return this.has(e)?!1:(this._set.push(e),!0)}},{key:"has",value:function(e){return this._set.indexOf(e)>-1}},{key:"remove",value:function(e){var t=this._set.indexOf(e);return t>-1?(this._set.splice(t,1),!0):!1}},{key:"clear",value:function(){this._set=[]}}]),e}(),O=function(){function e(){i(this,e),this.files=new P}return u(e,[{key:"add",value:function(e){return this.files.add(e)}},{key:"remove",value:function(e){this.files.remove(e)}},{key:"getTotal",value:function(){return this.files.size}},{key:"getFiles",value:function(e){var t=this.files.toArray();return e?t.filter(function(t){return!!(t.getStatus()&e)}):t}},{key:"stat",value:function t(e){var t={},n=this.getFiles(e);return n.forEach(function(e){var n=e.getStatus();t[n]=n in t?t[n]+1:1}),t.sum=n.length,t}}]),e}(),R=function(){function e(){i(this,e),this.limits=new P}return u(e,[{key:"add",value:function(e){return this.limits.add(e),this}},{key:"remove",value:function(e){return this.limits.remove(e),this}},{key:"isLimit",value:function(){var e=this;return this.limits.toArray().some(function(t){return t.call(e)})}}]),e}(),C=function(){function e(){i(this,e),this.filters=new P}return u(e,[{key:"add",value:function(e){return this.filters.add(e),this}},{key:"remove",value:function(e){return this.filters.remove(e),this}},{key:"filter",value:function(e){var t=this;return this.error=null,this.filters.toArray().every(function(n){var r=void 0;try{r=n(e)}catch(i){r=i}return"string"==typeof r?(t.error=new FilterError(e,r),!1):r instanceof Error?(t.error=r instanceof FilterError?r:new FilterError(e,r.toString()),!1):!0})}},{key:"getError",value:function(){return this.error}}]),e}(),S=function(){function e(t){i(this,e),this.threads=t||2,this.heading=new P,this.pending=new P}return u(e,[{key:"add",value:function(e){var t=this;return this.pending.add(e)?(e.session().always(function(){return t.pending.remove(e)}),this.load(),!0):!1}},{key:"size",value:function(){return this.pending.size+this.heading.size}},{key:"process",value:function(e){var t=this;this.heading.add(e)&&e.session().always(function(){t.heading.remove(e),t.load()})}},{key:"load",value:function(){for(var e;this.heading.size<this.threads&&(e=this.pending.shift());)e.prepare()&&this.process(e)}}]),e}();e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),a=r(u),s=n(5),l=r(s),c=n(11),f=r(c),h=n(13),d=r(h),p=n(12),v=r(p),y="",m=function(){function e(t,n){var r=this;i(this,e);var o=a["default"]("<label></label>");o.css({position:"fixed",opacity:0,left:-100,top:-100,width:50,height:50,display:"block",cursor:"pointer",background:"#fff",overflow:"hidden",zIndex:99999});var u=new d["default"](o,y,function(){return{accept:t.getAccept(),multiple:t.isMultiple()}});u.on("select",function(e){n(e.files,u),r.current&&r.current.emit("files",e.files,u)}),u.on("rollOut",function(){return r.hideOverlay()}),this.overlay=o.appendTo(document.body)}return o(e,[{key:"hideOverlay",value:function(){this.overlay.css({left:-100,top:-100,width:50,height:50}),this.current&&(this.current.emit("rollOut"),this.current=null)}},{key:"add",value:function(e){var t=this,n=this.overlay,r=new l["default"];return e=e.on?e:a["default"](e),e.on("mouseover.flashpicker",function(){var e=this.getBoundingClientRect();n.css({left:e.left,top:e.top,width:e.width,height:e.height}),r.emit("rollOver"),this.current&&this.current!==r&&this.current.emit("rollOut"),this.current=r}),r.destroy=function(){t.current===r&&t.hideOverlay(),r.removeAllListeners(),e.off("mouseover.flashpicker")},r}}]),e}(),g=function(){function e(t,n){var r=this;i(this,e);var o=f["default"].getInstance();this._createInput=function(e){var i=a["default"](document.createElement("input"));i.attr("type","file"),i.css({position:"absolute",clip:"rect(1px 1px 1px 1px)"});var u=t.getAccept();u&&u.length>0&&(u=u.map(function(e){return e.mimeTypes}),i.attr("accept",u.join(","))),t.isMultiple()&&i.attr("multiple","multiple"),i.on("change",function(t){n(t.target.files,o),i.remove(),r._createInput(e)}),e.html(i)}}return o(e,[{key:"add",value:function(e){var t=a["default"]("<label></label>"),n=new l["default"];return t.css({position:"absolute",opacity:0,top:0,left:0,width:"100%",height:"100%",display:"inline-block",cursor:"pointer",background:"#fff",overflow:"hidden"}),this._createInput(t),e=e.append?e:a["default"](e),e.append(t),n.destroy=function(){n.removeAllListeners(),t.remove()},n}}]),e}(),k=function(){function e(t){i(this,e);var n=function(e,n){for(var r=0,i=e.length;i>r&&!t.isLimit();r++)t.add(new v["default"](n,e[r]))};"DataTransfer"in window&&"FileList"in window?this.triggerCollection=new g(t,n):this.triggerCollection=new m(t,n)}return o(e,[{key:"addArea",value:function(e){return this.triggerCollection.add(e)}}],[{key:"setSWF",value:function(e){y=e}}]),e}();t["default"]=k,e.exports=t["default"]},function(e,t,n){e.exports=jQuery},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),s=n(14),l=r(s),c=n(15),f=r(c),h=void 0,d=function(e){function t(){i(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),u(t,[{key:"getAsDataUrl",value:function(e,t){var n=a.Deferred(),r=new FileReader,i=void 0;r.onloadend=function(){r.readyState==FileReader.DONE?n.resolve(r.result):n.reject(),clearTimeout(i),r.onloadend=null},r.readAsDataURL(e);var o=function(){r&&r.abort(),r=null};t&&(i=setTimeout(o,t));var u=n.promise();return u.abort=o,u}},{key:"getTransport",value:function(){return this.transport||(this.transport=new f["default"](this)),this.transport}},{key:"canSlice",value:function(){return!!(Blob.prototype.slice||Blob.prototype.mozSlice||Blob.prototype.webkitSlice)}},{key:"slice",value:function(e,t,n){var r=e.slice||e.mozSlice||e.webkitSlice;return r.call(e,t,n)}},{key:"md5",value:function(e){var t=a.Deferred();if(!window.SparkMD5)return t.reject(),t.promise();var n=2097152,r=Math.ceil(e.size/n),i=0,o=new SparkMD5.ArrayBuffer,u=e.mozSlice||e.webkitSlice||e.slice,s=new FileReader,l=function(){if(s){var a=void 0,c=void 0;a=i*n,c=Math.min(a+n,e.size),s.onload=function(){o&&o.append(s.result)},s.onloadend=function(){s&&(s.readyState==FileReader.DONE?++i<r?setTimeout(l,1):setTimeout(function(){o&&t.resolve(o.end()),l=e=o=null},50):t.reject(),s.onloadend=s.onload=null)},s.readAsArrayBuffer(u.call(e,a,c))}};l();var c=t.promise();return c.abort=function(){s&&s.abort(),o=null,s=null},c}}],[{key:"getInstance",value:function(){return h||(h=new t),h}}]),t}(l["default"]);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){return"FILE-"+(g++).toString(16).toUpperCase()}function a(e){var t=e.name&&k.exec(e.name);return t?t[1]:(t=e.type&&E.exec(e.type),t?t[1]:"")}function s(e){return["jpg","jpeg","png","gif","bmp"].indexOf(e.toLowerCase())?"image/"+("jpg"===e?"jpeg":e):null}Object.defineProperty(t,"__esModule",{value:!0});var l=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;a=l=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=u,r=!0}},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(5),h=r(f),d=n(2),p=r(d),v=n(3),y=r(v),m=n(10),g=0,k=/\.([^.]+)$/,E=/\/(jpg|jpeg|png|gif|bmp)$/i,b=function(){function e(t,n){o(this,e),this.total=t,this.loaded=n}return c(e,[{key:"percentage",get:function(){return this.loaded===this.total?100:Math.ceil(this.loaded/this.total*100)}}]),e}();t["default"]=b;var _=function(e){function t(e,n,r){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.id=u(),this.name=n.name||r||this.id;var i=a(n).toLowerCase();i&&!k.test(this.name)&&(this.name+="."+i),this.ext=i,this.type=n.type||s(this.ext)||"application/octet-stream",this.lastModified=n.lastModified||+new Date,this.size=n.size||0,this.runtime=e,this.source=n,this.status=y["default"].INITED,this.progress=new b(this.size,0)}return i(t,e),c(t,[{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(e){this.context=e,this.setPropagationTarget(e)}},{key:"getRuntime",value:function(){return this.runtime}},{key:"isImage",value:function(){return E.test(this.type)}},{key:"setStatus",value:function(e){var t=this.status;t!==y["default"].CANCELLED&&e!==t&&(this.status=e,this.emit(p["default"].FILE_STATUS_CHANGE,e,t))}},{key:"getStatus",value:function(){return this.status}},{key:"getStatusName",value:function(){return this.status in v.StatusName?v.StatusName[this.status]:"unknow"}},{key:"getSource",value:function(){return this.source}},{key:"getAsDataUrl",value:function(e){return this._dataUrlPromise||(this._dataUrlPromise=this.runtime.getAsDataUrl(this.source,e)),this._dataUrlPromise;
}},{key:"md5",value:function(){return this._md5Promise||(this._md5Promise=this.runtime.md5(this.source)),this._md5Promise}},{key:"session",value:function n(){var e=this;if(this._sessionPromise)return this._sessionPromise;var n=m.Deferred();return n.progress(function(t){e.setStatus(y["default"].PROGRESS),e.emit(p["default"].FILE_UPLOAD_PROGRESS,t)}).done(function(t){e.response=t,e._session=null,e._sessionPromise=null,e._flows=[],e.setStatus(y["default"].SUCCESS),e.emit(p["default"].FILE_UPLOAD_SUCCESS,t)}).fail(function(t){e._session=null,e._sessionPromise=null;for(var n=void 0;n=e._flows.shift();)n.abort();t instanceof Error&&(e.setStatus(y["default"].ERROR),e.emit(p["default"].FILE_UPLOAD_ERROR,t))}).always(function(){e.emit(p["default"].FILE_UPLOAD_COMPLETED,e.getStatus())}),this._flows=[],this._session=n,this._sessionPromise=n.promise(),this._sessionPromise}},{key:"prepare",value:function r(){var e=this;if(this.status!==y["default"].PENDING||!this.context)return!1;this.session(),this.setStatus(y["default"].PROGRESS),this.emit(p["default"].FILE_UPLOAD_START),this.request=this.context.createFileRequest(this);var r=this.context.invoke(p["default"].FILE_UPLOAD_PREPARING,this.request);return this._flows.push(r),r.then(function(t){e.emit(p["default"].FILE_UPLOAD_PREPARED,t);var n=e.runtime.getUploading().generate(t);return e._flows.push(n),n.progress(function(t){e.progress.total=t.total,e.progress.loaded=t.loaded,e._session.notify(e.progress)}),n}).then(function(t){return e.complete(t)},this._session.reject),!0}},{key:"complete",value:function f(e){if(this.status===y["default"].PROGRESS){for(var t=void 0;t=this._flows.shift();)t.abort();this.progress.loaded=this.progress.total,this._session.notify(this.progress),e=this.request.createFileResponse(e),this.setStatus(y["default"].END),this.emit(p["default"].FILE_UPLOAD_END);var f=this.context.invoke(p["default"].FILE_UPLOAD_COMPLETING,e);this._flows.push(f),f.then(this._session.resolve,this._session.reject)}}},{key:"pending",value:function(){(this.status===y["default"].ERROR||this.status===y["default"].QUEUED)&&(this.progress.total=this.size,this.progress.loaded=0,this.setStatus(y["default"].PENDING))}},{key:"abort",value:function(){this._session&&this._session.reject(),this._session=null,this._sessionPromise=null}},{key:"cancel",value:function(){this.setStatus(y["default"].CANCELLED),this.emit(p["default"].FILE_CANCEL),this.abort(),this.runtime.cancel(this.source),this._dataUrlPromise&&this._dataUrlPromise.abort(),this._md5Promise&&this._md5Promise.abort&&this._md5Promise.abort(),this.removeAllListeners()}},{key:"destroy",value:function(){this.cancel()}}]),t}(h["default"]);t["default"]=_,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function u(){var e=void 0;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}function a(e,t,n){try{e.CallFunction('<invoke name="'+t+'" returntype="javascript">'+__flash__argumentsToXML(n||[],0)+"</invoke>")}catch(r){throw"Call to "+t+" failed"}}function s(e,t){if(u()<11.4)throw"flash player is not available";var n=document.createElement("div"),r=e+(e.indexOf("?")>0?"&":"?")+"callInterface="+encodeURIComponent(t),i=['id="'+t+'-Picker"','type="application/x-shockwave-flash"','data="'+r+'"','width="100%" height="100%"','style="position:absolute;left:0;top:0;display:block;z-index:1;outline:0"'];return window.ActiveXObject&&i.push('classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"'),n.innerHTML="<object "+i.join(" ")+'><param name="movie" value="'+r+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.firstChild}function l(e){for(var t=!0;t;){var n=e;r=void 0,t=!1;var r=n+(y++).toString(16);if(!(r in window))return r;e=n,t=!0}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;a=l=s=void 0,r=!1;var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;return void 0===s?void 0:s.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=o,n=u,r=!0}},h=n(14),d=r(h),p=n(16),v=r(p),y=+new Date,m=function(e){function t(e,n,r){var o=this;i(this,t),f(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var u=l("FlashRuntime");this.callInterface=u,window[u]=this,this.options=r;var a=function c(){var t=e[0].offsetWidth,r=e[0].offsetHeight,i=void 0;return t&&r&&(i=s(n,u))?void e.append(o.flash=i):void setTimeout(c,1e3)};a()}return o(t,e),c(t,[{key:"getOptions",value:function(){var e=this.options;return"function"==typeof e&&(e=e()),e}},{key:"getTransport",value:function(e,t,n){return new v["default"](this,e,t,n)}},{key:"send",value:function(e,t,n,r){a(this.flash,"exec",["send",e,t.id,n,r])}},{key:"abort",value:function(e){try{a(this.flash,"exec",["abort",e.id])}catch(t){}}},{key:"cancel",value:function(e){a(this.flash,"exec",["cancel",e.id])}},{key:"ping",value:function(){a(this.flash,"exec",["pang"])}},{key:"destroy",value:function(){delete window[this.callInterface]}}]),t}(d["default"]);t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),l=n(2),c=r(l),f=n(6),h=n(10),d=function(e){function t(){i(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),u(t,[{key:"md5",value:function(e){var t=h.Deferred();return t.reject(),t.promise()}},{key:"getAsDataUrl",value:function(e,t){var n=h.Deferred();return n.reject(),n.promise()}},{key:"getTransport",value:function(){return null}},{key:"getUploading",value:function(){return this.uploading||(this.uploading=new p(this)),this.uploading}},{key:"canSlice",value:function(){return!1}},{key:"slice",value:function(e){throw new Error("this runtime current not support slice")}},{key:"cancel",value:function(e){}}]),t}(s["default"]);t["default"]=d;var p=function(){function e(t){i(this,e),this.runtime=t}return u(e,[{key:"generate",value:function(e){var t=this,n=h.Deferred(),r=e.getFile(),i=this.runtime,o=r.getSource(),u=r.size,a=e.getChunkSize(),s=e.isChunkEnable(),l=e.getChunkProcessThreads(),c=0,f=0,d=[],p=function(){return d.reduce(function(e,t){return e+("pending"===t.state()?1:0)},0)},v=function(){for(var n=void 0,r=void 0,s=void 0;u>f&&p()<l;)c=f,f=Math.min(f+a,u),s=i.slice(o,c,f),r=e.createChunkRequest(d.length,s),n=t.slot(r,e.getChunkRetries()),n.progress(y).done(m).fail(k),d.push(n)},y=function(){var e=u-f,t=0;d.forEach(function(n){e+=n.total,t+=n.loaded}),n.notify({total:e,loaded:t})},m=function(e){s&&v(),f>=u&&d.every(function(e){return"resolved"===e.state()})&&n.resolve(e)},g=function(){d.forEach(function(e){return e.abort()})},k=function(e){n.reject(e),g()};if(s)v();else{f=u;var E=this.slot(e.createChunkRequest(0,o),0);E.progress(y).done(m).fail(k),d.push(E)}var b=n.promise();return b.abort=g,b}},{key:"slot",value:function t(e,n){var r=h.Deferred(),i=this.runtime,o=e.getFile().getContext(),t=r.promise(),u=function(e){e.total&&(t.total=e.total),e.loaded&&(t.loaded=e.loaded),r.notify(e)},a=function(){var n,a,l;t.abort=function(){n&&n.abort(),a&&a.abort(),l&&l.abort()},t.total=e.getBlob().size,t.loaded=0,n=o.invoke(c["default"].CHUNK_UPLOAD_PREPARING,e),n.then(function(e){return a=i.getTransport().generate(e),a.progress(u),a}).then(function(t){return l=o.invoke(c["default"].CHUNK_UPLOAD_COMPLETING,e.createChunkResponse(t))}).done(r.resolve).fail(s)},s=function(e){e instanceof f.NetworkError&&n-->0?setTimeout(a,500):r.reject(e),t.abort()};return a(),t}}]),e}();e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),u=n(10),a=function(){function e(){r(this,e)}return i(e,[{key:"generate",value:function(e){var t=u.Deferred(),n=void 0,r=!1,i=new XMLHttpRequest;e.isWithCredentials&&!("withCredentials"in i)&&"XDomainRequest"in window&&(i=new XDomainRequest,r=!0);var a=function(){i.onload=i.onerror=null,i.upload&&(i.upload.onprogress=null),n&&clearTimeout(n)},s=function(){a();try{i.abort()}catch(e){}},l=function(e){return a(),i.status||"error"!==e.type?0===i.status||304===i.status||i.status>=200&&i.status<300?t.resolve(i.responseText):t.reject(new o.NetworkError(i.status,i.statusText)):t.reject(new o.AbortError(e.message))};i.upload&&(i.upload.onprogress=function(e){return t.notify(e)}),i.onerror=l,i.onload=l;var c=e.getTimeout();c>0&&(n=setTimeout(function(){s(),t.reject(new o.TimeoutError("timeout:"+c))},c));try{!function(){r?(i.open("POST",e.getUrl(),!0),i.withCredentials=!0):i.open("POST",e.getUrl()),e.getHeaders().forEach(function(e){return i.setRequestHeader(e.name,e.value)});var t=new FormData,n=e.getBlob();e.getParams().toArray().forEach(function(e){return t.append(e.name,e.value)}),t.append(e.getName(),n,n.name||"blob"),i.send(t)}()}catch(f){s(),t.reject(new o.AbortError(f.message))}var h=t.promise();return h.abort=s,h}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),u=n(10),a=function(){function e(t){r(this,e),this.flashRuntime=t}return i(e,[{key:"generate",value:function(e){var t=u.Deferred(),n=this.flashRuntime,r=e.getBlob(),i=void 0,a=function(){n.off("uploadprogress",l),n.off("uploadcomplete",c),n.off("uploaderror",f),i&&clearTimeout(i)},s=function(){a(),n.abort(r.id)},l=function(e){e.id===r.id&&t.notify(e)},c=function(e){return e.id===r.id?(a(),304===e.status||e.status>=200&&e.status<300?(n.cancel(r),t.resolve(e.response)):t.reject(new o.NetworkError(e.status,e.response))):void 0},f=function(e){e.id===r.id&&(a(),t.reject(new o.AbortError(e.message)))};n.on("uploadprogress",l),n.on("uploadcomplete",c),n.on("uploaderror",f);var h=e.getTimeout();h>0&&(i=setTimeout(function(){s(),t.reject(new o.TimeoutError("timeout:"+h))},h));try{n.send(e.getName(),r,e.getUrl(),e.getParams().toString())}catch(d){s(),t.reject(new o.AbortError(d.message))}var p=t.promise();return p.abort=s,p}}]),e}();t["default"]=a,e.exports=t["default"]}]);
//# sourceMappingURL=uploader.js.map