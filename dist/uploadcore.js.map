{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///uploadcore.js","webpack:///webpack/bootstrap 7d94c36ef60170c0d84b","webpack:///./src/index.js","webpack:///./src/core.js","webpack:///./src/emitter.js","webpack:///./src/util.js","webpack:///./src/events.js","webpack:///./src/status.js","webpack:///./src/errors.js","webpack:///./src/filerequest.js","webpack:///./src/collector/dnd.js","webpack:///./src/html5/runtime.js","webpack:///./src/runtime.js","webpack:///./src/html5/transport.js","webpack:///./src/file.js","webpack:///./src/collector/paste.js","webpack:///./src/collector/picker.js","webpack:///./src/flash/runtime.js","webpack:///./src/flash/transport.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Core","Events","_require","Status","UploadCore","VERSION","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","Emitter","_require2","QueueLimitError","FilterError","DuplicateError","FileExtensionError","FileSizeError","_require3","formatSize","parseSize","normalizeAccept","FileRequest","DndCollector","PasteCollector","PickerCollector","REQUEST_OPTIONS","_Emitter","options","arguments","undefined","_this","getPrototypeOf","autoPending","auto","capcity","queueCapcity","multiple","accept","sizeLimit","fileSizeLimit","pending","Pending","processThreads","stat","Stat","constraints","Constraints","filters","Filters","addConstraint","getTotal","addFilter","file","some","item","extensions","indexOf","ext","size","preventDuplicate","getFiles","name","Array","isArray","fitlers","forEach","filter","request","hasOwnProperty","requestOptions","constraint","add","_this2","isLimit","emit","QUEUE_ERROR","error","QUEUE_FILE_FILTERED","setStatus","QUEUED","on","FILE_STATUS_CHANGE","status","CANCELLED","remove","PENDING","setTimeout","QUEUE_UPLOAD_START","QUEUE_STAT_CHANGE","PROCESS","QUEUE_UPLOAD_END","setCore","QUEUE_FILE_ADDED","getStat","flag","picker","dnd","paster","url","setSWF","Set","_set","shift","pop","slice","has","push","splice","files","toArray","getStatus","ret","_this3","fn","every","e","Error","toString","threads","heading","_this4","session","always","load","_this5","prepare","process","HookInvoker","hooks","initialData","context","_data","_error","_aborted","Deferred","promise","abort","fail","reject","done","resolve","setData","data","next","hook","res","then","event","listener","toLowerCase","_events","that","off","apply","listeners","emitter","propagationTarget","_len","args","_key","applyEmit","pArgs","unshift","normalizeExtensions","split","map","exec","accepts","ACCEPTs","title","mimeTypes","createOptions","option","match","extend","source","isFunction","obj","Callbacks","fire","memory","_fired","firingIndex","firingStart","firingLength","list","firing","stopOnFalse","stack","disable","once","start","unique","ArrayFrom","empty","disabled","lock","locked","fireWith","fired","func","tuples","_state","deferred","_promise","state","fns","newDefer","tuple","returned","progress","notify","pipe","stateString","parseFloat","prefixesSI","base","index","Math","floor","log","min","powedPrecision","pow","round","units","t","g","k","u","images","audios","videos","from","arrayLike","FILE_UPLOAD_START","FILE_UPLOAD_PREPARING","FILE_UPLOAD_PREPARED","CHUNK_UPLOAD_PREPARING","CHUNK_UPLOAD_COMPLETING","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_END","FILE_UPLOAD_COMPLETING","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_ERROR","FILE_UPLOAD_COMPLETED","FILE_CANCEL","ALL","INITED","PROGRESS","END","SUCCESS","ERROR","StatusName",1,2,4,8,16,32,64,128,"_Error","_Error2","message","AbortError","_Error3","TimeoutError","_Error4","NetworkError","_Error5","_Error6","_Error7","_this6","_FilterError","_this7","_FilterError2","_this8","_FilterError3","_this9","_typeof","Symbol","ChunkResponse","rawResponse","chunkRequest","response","getResponse","getJson","JSON","parse","ChunkRequest","blob","fileRequest","getName","getFile","params","getParams","clone","getParam","setParam","getUrl","headers","getHeaders","isWithCredentials","getTimeout","FileResponse","getChunkRequest","isMultiChunk","Params","removeParam","addParam","param","single","encodeURIComponent","join","MIN_CHUNK_SIZE","action","withCredentials","timeout","chunkSize","chunkRetries","chunkEnable","chunkProcessThreads","retries","getChunkSize","getRuntime","canSlice","createReader","collector","dataTransfer","responders","collect","times","_break","readEntry","entry","isFile","isDirectory","readEntries","entries","l","items","MAX_NUM_ONCE","webkitGetAsEntry","window","document","addEventListener","runtime","Runtime","getInstance","started","enter","endTimer","dataTransferReader","File","total","responder","recieve","Collectors","move","dropEffect","preventDefault","end","drag","clearTimeout","isLeave","type","drop","contains","getData","ex","Area","area","areaElement","allowed","core","areas","destroy","removeAllListeners","r","isMultiple","Transport","Html5Runtime","_Runtime","fr","FileReader","timer","onloadend","readyState","DONE","result","readAsDataURL","transport","Blob","mozSlice","webkitSlice","blobSlice","SparkMD5","chunks","ceil","chunk","spark","ArrayBuffer","_loadNext","onload","append","readAsArrayBuffer","uploading","Uploading","getSource","useChunk","isChunkEnable","max","getChunkProcessThreads","slots","getActives","reduce","sum","slot","readChunk","req","createChunkRequest","getChunkRetries","getCore","completion","getBlob","invoke","getTransport","generate","createChunkResponse","Html5Transport","xhr","XMLHttpRequest","timeoutTimer","clean","onerror","upload","onprogress","complete","responseText","statusText","open","header","setRequestHeader","formData","FormData","send","guid","uid","toUpperCase","guessExt","RE_EXT","RE_IMAGE","guessType","Progress","change","percentage","filename","test","lastModified","Date","setPropagationTarget","prevStatus","_dataUrlPromise","getAsDataUrl","_md5Promise","md5","_sessionPromise","_session","_flows","flow","createFileRequest","getUploading","createFileResponse","cancel","paste","clipboardData","prevent","addRet","kind","getAsFile","stopPropagation","removeEventListener","FlashRuntime","SWF_URL","createElement","div","html","innerHTML","firstChild","removeChild","FlashTriggerCollection","onFiles","overlay","getAccept","current","hideOverlay","body","appendChild","style","left","top","width","height","trigger","mouseover","rect","getBoundingClientRect","right","bottom","attachEvent","detachEvent","Html5Trigger","label","onChange","destroyInput","createInput","input","setAttribute","Html5TriggerCollection","triggerCollection","getFlashVersion","version","navigator","plugins","description","e1","ActiveXObject","GetVariable","e2","callFlash","movie","functionName","argumentArray","CallFunction","__flash__argumentsToXML","createFlash","swf","callInterface","attrs","prefix","_guid","display","w","offsetWidth","h","offsetHeight","flash","FlashTransport","flashRuntime"],"mappings":"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","file":"uploadcore.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UploadCore\"] = factory();\n\telse\n\t\troot[\"UploadCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UploadCore\"] = factory();\n\telse\n\t\troot[\"UploadCore\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Core = __webpack_require__(1);\n\tvar Events = __webpack_require__(4);\n\t\n\tvar _require = __webpack_require__(5);\n\t\n\tvar Status = _require.Status;\n\t\n\tCore.Events = Events;\n\tCore.Status = Status;\n\tCore.UploadCore = Core;\n\tCore.VERSION = (\"2.1.1\");\n\tCore.Core = Core;\n\t\n\tmodule.exports = Core;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Emitter = __webpack_require__(2);\n\tvar Events = __webpack_require__(4);\n\t\n\tvar _require = __webpack_require__(5);\n\t\n\tvar Status = _require.Status;\n\t\n\tvar _require2 = __webpack_require__(6);\n\t\n\tvar QueueLimitError = _require2.QueueLimitError;\n\tvar FilterError = _require2.FilterError;\n\tvar DuplicateError = _require2.DuplicateError;\n\tvar FileExtensionError = _require2.FileExtensionError;\n\tvar FileSizeError = _require2.FileSizeError;\n\t\n\tvar _require3 = __webpack_require__(3);\n\t\n\tvar formatSize = _require3.formatSize;\n\tvar parseSize = _require3.parseSize;\n\tvar normalizeAccept = _require3.normalizeAccept;\n\t\n\tvar FileRequest = __webpack_require__(7);\n\tvar DndCollector = __webpack_require__(8);\n\tvar PasteCollector = __webpack_require__(13);\n\tvar PickerCollector = __webpack_require__(14);\n\t\n\tvar REQUEST_OPTIONS = ['name', 'url', 'params', 'action', 'data', 'headers', 'withCredentials', 'timeout', 'chunkEnable', 'chunkSize', 'chunkRetries', 'chunkProcessThreads'];\n\t\n\tvar Core = (function (_Emitter) {\n\t    _inherits(Core, _Emitter);\n\t\n\t    function Core() {\n\t        var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t        _classCallCheck(this, Core);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Core).call(this));\n\t\n\t        _this.autoPending = options.autoPending || options.auto;\n\t        _this.capcity = options.capcity || options.queueCapcity || 0;\n\t        _this.multiple = options.multiple == null ? true : options.multiple;\n\t\n\t        _this.accept = normalizeAccept(options.accept);\n\t        _this.sizeLimit = parseSize(options.sizeLimit || options.fileSizeLimit || 0);\n\t\n\t        _this.pending = new Pending(options.processThreads);\n\t        _this.stat = new Stat();\n\t        _this.constraints = new Constraints();\n\t        _this.filters = new Filters();\n\t\n\t        if (!_this.multiple) {\n\t            _this.capcity = 1;\n\t        }\n\t        if (_this.capcity > 0) {\n\t            _this.addConstraint(function () {\n\t                return _this.stat.getTotal() >= _this.capcity;\n\t            });\n\t        }\n\t\n\t        if (_this.accept && _this.accept.length > 0) {\n\t            _this.addFilter(function (file) {\n\t                if (!_this.accept.some(function (item) {\n\t                    return item.extensions && item.extensions.indexOf(file.ext) > -1;\n\t                })) {\n\t                    return new FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n\t                }\n\t            });\n\t        }\n\t\n\t        if (_this.sizeLimit > 0) {\n\t            _this.addFilter(function (file) {\n\t                if (file.size > _this.sizeLimit) {\n\t                    return new FileSizeError(file, 'filesize:' + formatSize(file.size) + ' is greater than limit:' + formatSize(_this.sizeLimit));\n\t                }\n\t            });\n\t        }\n\t\n\t        if (options.preventDuplicate) {\n\t            _this.addFilter(function (file) {\n\t                if (_this.stat.getFiles().some(function (item) {\n\t                    return item.name === file.name && item.size === file.size;\n\t                })) {\n\t                    return new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n\t                }\n\t            });\n\t        }\n\t\n\t        if (Array.isArray(options.filters)) {\n\t            options.fitlers.forEach(function (filter) {\n\t                return _this.addFilter(filter);\n\t            });\n\t        }\n\t\n\t        var request = options.request || {};\n\t        REQUEST_OPTIONS.forEach(function (key) {\n\t            if (options.hasOwnProperty(key)) {\n\t                request[key] = options[key];\n\t            }\n\t        });\n\t\n\t        _this.requestOptions = request;\n\t        return _this;\n\t    }\n\t\n\t    _createClass(Core, [{\n\t        key: 'createFileRequest',\n\t        value: function createFileRequest(file) {\n\t            return new FileRequest(file, this.requestOptions);\n\t        }\n\t    }, {\n\t        key: 'isLimit',\n\t        value: function isLimit() {\n\t            return this.constraints.some();\n\t        }\n\t    }, {\n\t        key: 'addConstraint',\n\t        value: function addConstraint(constraint) {\n\t            return this.constraints.add(constraint);\n\t        }\n\t    }, {\n\t        key: 'addFilter',\n\t        value: function addFilter(filter) {\n\t            return this.filters.add(filter);\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this2 = this;\n\t\n\t            if (this.isLimit()) {\n\t                this.emit(Events.QUEUE_ERROR, new QueueLimitError());\n\t                return -1;\n\t            }\n\t\n\t            var error = this.filters.filter(file);\n\t            if (!error && !this.stat.add(file)) {\n\t                error = new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n\t            }\n\t\n\t            if (error) {\n\t                this.emit(Events.QUEUE_FILE_FILTERED, file, error);\n\t                this.emit(Events.QUEUE_ERROR, error);\n\t                return 0;\n\t            }\n\t\n\t            file.setStatus(Status.QUEUED);\n\t\n\t            file.on(Events.FILE_STATUS_CHANGE, function (status) {\n\t                if (status === Status.CANCELLED) {\n\t                    _this2.stat.remove(file);\n\t                } else if (status === Status.PENDING) {\n\t                    setTimeout(function () {\n\t                        if (_this2.pending.add(file) && _this2.pending.size() === 1) {\n\t                            _this2.emit(Events.QUEUE_UPLOAD_START);\n\t                        }\n\t                    }, 1);\n\t                }\n\t\n\t                _this2.emit(Events.QUEUE_STAT_CHANGE, _this2.stat);\n\t\n\t                if (_this2.stat.getFiles(Status.PROCESS).length < 1) {\n\t                    _this2.emit(Events.QUEUE_UPLOAD_END);\n\t                }\n\t            });\n\t\n\t            file.setCore(this);\n\t\n\t            this.emit(Events.QUEUE_FILE_ADDED, file);\n\t\n\t            this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\t\n\t            if (this.autoPending) {\n\t                file.pending();\n\t            }\n\t\n\t            return 1;\n\t        }\n\t    }, {\n\t        key: 'isMultiple',\n\t        value: function isMultiple() {\n\t            return this.multiple;\n\t        }\n\t    }, {\n\t        key: 'isFull',\n\t        value: function isFull() {\n\t            return this.capcity > 0 && this.getTotal() >= this.capcity;\n\t        }\n\t    }, {\n\t        key: 'isEmpty',\n\t        value: function isEmpty() {\n\t            return this.getTotal() < 1;\n\t        }\n\t    }, {\n\t        key: 'getAccept',\n\t        value: function getAccept() {\n\t            return this.accept;\n\t        }\n\t    }, {\n\t        key: 'getStat',\n\t        value: function getStat() {\n\t            return this.stat;\n\t        }\n\t    }, {\n\t        key: 'getTotal',\n\t        value: function getTotal() {\n\t            return this.getStat().getTotal();\n\t        }\n\t    }, {\n\t        key: 'getFiles',\n\t        value: function getFiles(flag) {\n\t            return this.getStat().getFiles(flag);\n\t        }\n\t    }, {\n\t        key: 'stat',\n\t        value: function stat(flag) {\n\t            return this.getStat().stat(flag);\n\t        }\n\t    }, {\n\t        key: 'getPickerCollector',\n\t        value: function getPickerCollector() {\n\t            if (!this.picker) {\n\t                this.picker = new PickerCollector(this);\n\t            }\n\t            return this.picker;\n\t        }\n\t    }, {\n\t        key: 'getDndCollector',\n\t        value: function getDndCollector() {\n\t            if (!this.dnd) {\n\t                this.dnd = new DndCollector(this);\n\t            }\n\t            return this.dnd;\n\t        }\n\t    }, {\n\t        key: 'getPasteCollector',\n\t        value: function getPasteCollector() {\n\t            if (!this.paster) {\n\t                this.paster = new PasteCollector(this);\n\t            }\n\t            return this.paster;\n\t        }\n\t    }], [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            PickerCollector.setSWF(url);\n\t        }\n\t    }]);\n\t\n\t    return Core;\n\t})(Emitter);\n\t\n\tmodule.exports = Core;\n\t\n\tvar Set = (function () {\n\t    function Set() {\n\t        _classCallCheck(this, Set);\n\t\n\t        this._set = [];\n\t    }\n\t\n\t    /**\n\t     * 项目总数\n\t     *\n\t     * @returns {Number}\n\t     */\n\t\n\t    _createClass(Set, [{\n\t        key: 'size',\n\t        value: function size() {\n\t            return this._set.length;\n\t        }\n\t\n\t        /**\n\t         * 从头部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t\n\t    }, {\n\t        key: 'shift',\n\t        value: function shift() {\n\t            return this._set.shift();\n\t        }\n\t\n\t        /**\n\t         * 从尾部取出一项\n\t         *\n\t         * @returns {*}\n\t         */\n\t\n\t    }, {\n\t        key: 'pop',\n\t        value: function pop() {\n\t            return this._set.pop();\n\t        }\n\t\n\t        /**\n\t         * 获得所有项\n\t         *\n\t         * @returns {Array}\n\t         */\n\t\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this._set.slice(0);\n\t        }\n\t\n\t        /**\n\t         * 添加一项\n\t         *\n\t         * @param item\n\t         * @returns {boolean} success if true\n\t         */\n\t\n\t    }, {\n\t        key: 'add',\n\t        value: function add(item) {\n\t            if (this.has(item)) {\n\t                return false;\n\t            }\n\t            this._set.push(item);\n\t            return true;\n\t        }\n\t\n\t        /**\n\t         * 是否存在该项\n\t         *\n\t         * @param item\n\t         * @returns {boolean}\n\t         */\n\t\n\t    }, {\n\t        key: 'has',\n\t        value: function has(item) {\n\t            return this._set.indexOf(item) > -1;\n\t        }\n\t\n\t        /**\n\t         * 删除某项\n\t         *\n\t         * @returns {boolean} success if true\n\t         */\n\t\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(item) {\n\t            var i = this._set.indexOf(item);\n\t            if (i > -1) {\n\t                this._set.splice(i, 1);\n\t                return true;\n\t            }\n\t            return false;\n\t        }\n\t\n\t        /**\n\t         * 清空\n\t         */\n\t\n\t    }, {\n\t        key: 'clear',\n\t        value: function clear() {\n\t            this._set = [];\n\t        }\n\t    }]);\n\t\n\t    return Set;\n\t})();\n\t\n\tvar Stat = (function () {\n\t    function Stat() {\n\t        _classCallCheck(this, Stat);\n\t\n\t        this.files = new Set();\n\t    }\n\t\n\t    _createClass(Stat, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            return this.files.add(file);\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(file) {\n\t            this.files.remove(file);\n\t        }\n\t    }, {\n\t        key: 'getTotal',\n\t        value: function getTotal() {\n\t            return this.files.size();\n\t        }\n\t    }, {\n\t        key: 'getFiles',\n\t        value: function getFiles(flag) {\n\t            var files = this.files.toArray();\n\t            if (!flag) {\n\t                return files;\n\t            }\n\t            return files.filter(function (file) {\n\t                return !!(file.getStatus() & flag);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'stat',\n\t        value: function stat(flag) {\n\t            var ret = {},\n\t                files = this.getFiles(flag);\n\t\n\t            files.forEach(function (file) {\n\t                var status = file.getStatus();\n\t                ret[status] = status in ret ? ret[status] + 1 : 1;\n\t            });\n\t\n\t            ret['sum'] = files.length;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return Stat;\n\t})();\n\t\n\tvar Constraints = (function () {\n\t    function Constraints() {\n\t        _classCallCheck(this, Constraints);\n\t\n\t        this.constraints = new Set();\n\t    }\n\t\n\t    _createClass(Constraints, [{\n\t        key: 'add',\n\t        value: function add(constraint) {\n\t            this.constraints.add(constraint);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(constraint) {\n\t            this.constraints.remove(constraint);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'some',\n\t        value: function some() {\n\t            var _this3 = this;\n\t\n\t            return this.constraints.toArray().some(function (fn) {\n\t                return fn.call(_this3);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Constraints;\n\t})();\n\t\n\tvar Filters = (function () {\n\t    function Filters() {\n\t        _classCallCheck(this, Filters);\n\t\n\t        this.filters = new Set();\n\t    }\n\t\n\t    _createClass(Filters, [{\n\t        key: 'add',\n\t        value: function add(filter) {\n\t            this.filters.add(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'remove',\n\t        value: function remove(filter) {\n\t            this.filters.remove(filter);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'filter',\n\t        value: function filter(file) {\n\t            var error = null;\n\t            this.filters.toArray().every(function (filter) {\n\t                var ret = undefined;\n\t                try {\n\t                    ret = filter(file);\n\t                } catch (e) {\n\t                    ret = e;\n\t                }\n\t                if (typeof ret === 'string') {\n\t                    error = new FilterError(file, ret);\n\t                    return false;\n\t                } else if (ret instanceof Error) {\n\t                    error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n\t                    return false;\n\t                }\n\t                return true;\n\t            });\n\t            return error;\n\t        }\n\t    }]);\n\t\n\t    return Filters;\n\t})();\n\t\n\tvar Pending = (function () {\n\t    function Pending(threads) {\n\t        _classCallCheck(this, Pending);\n\t\n\t        this.threads = threads || 2;\n\t        this.heading = new Set();\n\t        this.pending = new Set();\n\t    }\n\t\n\t    _createClass(Pending, [{\n\t        key: 'add',\n\t        value: function add(file) {\n\t            var _this4 = this;\n\t\n\t            if (!this.pending.add(file)) return false;\n\t\n\t            file.session().always(function () {\n\t                return _this4.pending.remove(file);\n\t            });\n\t\n\t            this.load();\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'size',\n\t        value: function size() {\n\t            return this.pending.size() + this.heading.size();\n\t        }\n\t    }, {\n\t        key: 'process',\n\t        value: function process(file) {\n\t            var _this5 = this;\n\t\n\t            if (!this.heading.add(file)) return;\n\t\n\t            file.session().always(function () {\n\t                _this5.heading.remove(file);\n\t                _this5.load();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'load',\n\t        value: function load() {\n\t            var file;\n\t            while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n\t                if (file.prepare()) {\n\t                    this.process(file);\n\t                }\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return Pending;\n\t})();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar Deferred = _require.Deferred;\n\t\n\tvar Emitter = (function () {\n\t    function Emitter() {\n\t        _classCallCheck(this, Emitter);\n\t    }\n\t\n\t    _createClass(Emitter, [{\n\t        key: 'on',\n\t        value: function on(event, listener) {\n\t            event = event.toLowerCase();\n\t            if (!this._events) {\n\t                this._events = {};\n\t            }\n\t\n\t            if (!this._events[event]) {\n\t                this._events[event] = [];\n\t            }\n\t\n\t            this._events[event].push(listener);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'once',\n\t        value: function once(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var that = this;\n\t\n\t            function fn() {\n\t                that.off(event, fn);\n\t                listener.apply(this, arguments);\n\t            }\n\t\n\t            fn.listener = listener;\n\t\n\t            this.on(event, fn);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'off',\n\t        value: function off(event, listener) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                return this;\n\t            }\n\t\n\t            var i = listeners.length;\n\t            while (i-- > 0) {\n\t                if (listeners[i] === listener || listeners[i].listener === listener) {\n\t                    listeners.splice(i, 1);\n\t                    break;\n\t                }\n\t            }\n\t\n\t            if (listeners.length === 0) {\n\t                delete this._events[event];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'removeAllListeners',\n\t        value: function removeAllListeners(event) {\n\t            if (!event) {\n\t                this._events = [];\n\t            } else {\n\t                delete this._events[event.toLowerCase()];\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setPropagationTarget',\n\t        value: function setPropagationTarget(emitter) {\n\t            if (emitter instanceof Emitter) {\n\t                this.propagationTarget = emitter;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'emit',\n\t        value: function emit(event) {\n\t            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t                args[_key - 1] = arguments[_key];\n\t            }\n\t\n\t            this.applyEmit(event, args);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'applyEmit',\n\t        value: function applyEmit(event, args) {\n\t            var _this = this;\n\t\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (this._events && (listeners = this._events[event])) {\n\t                listeners.slice(0).forEach(function (fn) {\n\t                    return fn.apply(_this, args);\n\t                });\n\t            }\n\t\n\t            if (this.propagationTarget) {\n\t                var pArgs = args.slice(0);\n\t                pArgs.unshift(this);\n\t                this.propagationTarget.applyEmit(event, pArgs);\n\t            }\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'invoke',\n\t        value: function invoke(event, data) {\n\t            event = event.toLowerCase();\n\t\n\t            var listeners = undefined;\n\t\n\t            if (!this._events || !(listeners = this._events[event])) {\n\t                listeners = [];\n\t            }\n\t\n\t            return HookInvoker(listeners.slice(0), data, this);\n\t        }\n\t    }]);\n\t\n\t    return Emitter;\n\t})();\n\t\n\tmodule.exports = Emitter;\n\t\n\tfunction HookInvoker(hooks, initialData, context) {\n\t    var _data = initialData;\n\t    var _error = null;\n\t    var _aborted = undefined;\n\t\n\t    var i = Deferred();\n\t    var ret = i.promise();\n\t\n\t    ret.abort = function () {\n\t        _aborted = true;\n\t    };\n\t\n\t    var fail = function fail(e) {\n\t        if (_aborted) return;\n\t        if (e) {\n\t            _error = e instanceof Error ? e : new Error(e);\n\t        }\n\t        i.reject(_error || new Error('Unknown'));\n\t    };\n\t\n\t    var done = function done() {\n\t        if (_aborted) return;\n\t        if (_error != null) {\n\t            fail();\n\t        } else {\n\t            i.resolve(_data);\n\t        }\n\t    };\n\t\n\t    var setData = function setData(data) {\n\t        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n\t            _data = data;\n\t        }\n\t    };\n\t\n\t    var next = function next(data) {\n\t        if (_aborted) return;\n\t\n\t        if (data instanceof Error) {\n\t            _error = data;\n\t        }\n\t\n\t        if (_error != null) {\n\t            return fail();\n\t        }\n\t\n\t        setData(data);\n\t\n\t        var hook = hooks.shift();\n\t        if (!hook) {\n\t            return done();\n\t        }\n\t        var res = undefined;\n\t        try {\n\t            res = hook.call(context, _data);\n\t        } catch (e) {\n\t            return fail(e);\n\t        }\n\t\n\t        if (res && res.then) {\n\t            res.then(next, fail);\n\t        } else {\n\t            next(res);\n\t        }\n\t    };\n\t\n\t    setTimeout(next, 1);\n\t\n\t    return ret;\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.formatSize = function (size) {\n\t    size = parseFloat(size);\n\t    var prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n\t        base = 1024;\n\t    var index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n\t    index = Math.min(index, prefixesSI.length - 1);\n\t    var powedPrecision = Math.pow(10, index < 2 ? 0 : index > 2 ? 2 : 1);\n\t    size = size / Math.pow(base, index);\n\t    size = Math.round(size * powedPrecision) / powedPrecision;\n\t    return size + prefixesSI[index] + 'B';\n\t};\n\t\n\texports.parseSize = function (size) {\n\t    if (typeof size !== 'string') {\n\t        return size;\n\t    }\n\t\n\t    var units = {\n\t        t: 1099511627776,\n\t        g: 1073741824,\n\t        m: 1048576,\n\t        k: 1024\n\t    };\n\t\n\t    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n\t    var u = size[2];\n\t    size = +size[1];\n\t\n\t    if (units.hasOwnProperty(u)) {\n\t        size *= units[u];\n\t    }\n\t    return size;\n\t};\n\t\n\tvar ACCEPTs = {\n\t    images: {\n\t        title: 'Images',\n\t        extensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'svg', 'tiff', 'tif', 'ico', 'jpe', 'svgz', 'pct', 'psp', 'ai', 'psd', 'raw', 'webp']\n\t    },\n\t\n\t    audios: {\n\t        title: 'Audios',\n\t        extensions: ['aac', 'aif', 'flac', 'iff', 'm4a', 'm4b', 'mid', 'midi', 'mp3', 'mpa', 'mpc', 'oga', 'ogg', 'ra', 'ram', 'snd', 'wav', 'wma']\n\t    },\n\t\n\t    videos: {\n\t        title: 'Videos',\n\t        extensions: ['avi', 'divx', 'flv', 'm4v', 'mkv', 'mov', 'mp4', 'mpeg', 'mpg', 'ogm', 'ogv', 'ogx', 'rm', 'rmvb', 'smil', 'webm', 'wmv', 'xvid']\n\t    }\n\t};\n\t\n\tfunction normalizeExtensions(extensions) {\n\t    if (typeof extensions !== 'string') {\n\t        return '';\n\t    }\n\t\n\t    return extensions.toLowerCase().split(/ *[ ,;|+] */).map(function (ext) {\n\t        var m = /^\\*?\\.?(\\w+)$/.exec(ext);\n\t        return m ? m[1] : null;\n\t    }).filter(function (ext) {\n\t        return ext !== null;\n\t    });\n\t}\n\t\n\tfunction normalizeAccept(accepts) {\n\t    if (!accepts) return null;\n\t\n\t    if (!Array.isArray(accepts)) {\n\t        accepts = [accepts];\n\t    }\n\t\n\t    return accepts.map(function (accept) {\n\t        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n\t            return ACCEPTs[accept];\n\t        } else {\n\t            var extensions = normalizeExtensions(accept.extensions || accept);\n\t\n\t            return extensions.length ? {\n\t                title: accept.title || '',\n\t                extensions: extensions,\n\t                mimeTypes: accept.mimeTypes || ''\n\t            } : null;\n\t        }\n\t    }).filter(function (accept) {\n\t        return accept !== null;\n\t    });\n\t}\n\t\n\texports.normalizeAccept = normalizeAccept;\n\t\n\tfunction createOptions(option) {\n\t    var options = {};\n\t    (option.match(/\\S+/g) || []).forEach(function (flag) {\n\t        options[flag] = true;\n\t    });\n\t    return options;\n\t}\n\t\n\tfunction extend(target, source) {\n\t    for (var key in source) {\n\t        target[key] = source[key];\n\t    }\n\t    return target;\n\t}\n\t\n\texports.extend = extend;\n\t\n\tfunction isFunction(obj) {\n\t    return typeof obj === 'function';\n\t}\n\t\n\tvar ArrayFrom = Array.from || function (arrayLike) {\n\t    return [].slice.call(arrayLike);\n\t};\n\t\n\tfunction Callbacks(options) {\n\t    options = typeof options === \"string\" ? createOptions(options) : extend({}, options);\n\t\n\t    var firing = undefined,\n\t        memory = undefined,\n\t        _fired = undefined,\n\t        firingLength = undefined,\n\t        firingIndex = undefined,\n\t        firingStart = undefined,\n\t        list = [],\n\t        _this = undefined,\n\t        stack = !options.once && [];\n\t\n\t    function fire(data) {\n\t        memory = options.memory && data;\n\t        _fired = true;\n\t        firingIndex = firingStart || 0;\n\t        firingStart = 0;\n\t        firingLength = list.length;\n\t        firing = true;\n\t        for (; list && firingIndex < firingLength; firingIndex++) {\n\t            if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {\n\t                memory = false; // To prevent further calls using add\n\t                break;\n\t            }\n\t        }\n\t        firing = false;\n\t        if (list) {\n\t            if (stack) {\n\t                if (stack.length) {\n\t                    fire(stack.shift());\n\t                }\n\t            } else if (memory) {\n\t                list = [];\n\t            } else {\n\t                _this.disable();\n\t            }\n\t        }\n\t    }\n\t\n\t    _this = {\n\t        add: function add() {\n\t            if (list) {\n\t                var start = list.length;\n\t\n\t                (function add(args) {\n\t                    args.forEach(function (fn) {\n\t                        if (isFunction(fn)) {\n\t                            if (!options.unique || !_this.has(fn)) {\n\t                                list.push(fn);\n\t                            }\n\t                        } else if (Array.isArray(fn)) {\n\t                            add(fn);\n\t                        }\n\t                    });\n\t                })(ArrayFrom(arguments));\n\t\n\t                if (firing) {\n\t                    firingLength = list.length;\n\t                } else if (memory) {\n\t                    firingStart = start;\n\t                    fire(memory);\n\t                }\n\t            }\n\t            return this;\n\t        },\n\t        remove: function remove() {\n\t            if (list) {\n\t                ArrayFrom(arguments).forEach(function (fn) {\n\t                    var i = list.length;\n\t                    while (--i >= 0) {\n\t                        if (list[i] !== fn) continue;\n\t\n\t                        list.splice(i, 1);\n\t\n\t                        if (firing) {\n\t                            if (i <= firingLength) {\n\t                                firingLength--;\n\t                            }\n\t                            if (i <= firingIndex) {\n\t                                firingIndex--;\n\t                            }\n\t                        }\n\t                    }\n\t                });\n\t            }\n\t            return this;\n\t        },\n\t        has: function has(fn) {\n\t            return fn ? list.indexOf(fn) > -1 : !!(list && list.length);\n\t        },\n\t        empty: function empty() {\n\t            list = [];\n\t            firingLength = 0;\n\t            return this;\n\t        },\n\t        disable: function disable() {\n\t            list = stack = memory = null;\n\t            return this;\n\t        },\n\t        disabled: function disabled() {\n\t            return !list;\n\t        },\n\t        lock: function lock() {\n\t            stack = null;\n\t            if (!memory) {\n\t                _this.disable();\n\t            }\n\t            return this;\n\t        },\n\t        locked: function locked() {\n\t            return !stack;\n\t        },\n\t        fireWith: function fireWith(context, args) {\n\t            if (list && (!_fired || stack)) {\n\t                args = args || [];\n\t                args = [context, args.slice ? args.slice() : args];\n\t                if (firing) {\n\t                    stack.push(args);\n\t                } else {\n\t                    fire(args);\n\t                }\n\t            }\n\t            return this;\n\t        },\n\t        fire: function fire() {\n\t            _this.fireWith(this, arguments);\n\t            return this;\n\t        },\n\t        fired: function fired() {\n\t            return !!_fired;\n\t        }\n\t    };\n\t\n\t    return _this;\n\t};\n\t\n\tfunction Deferred(func) {\n\t    var tuples = [[\"resolve\", \"done\", Callbacks(\"once memory\"), \"resolved\"], [\"reject\", \"fail\", Callbacks(\"once memory\"), \"rejected\"], [\"notify\", \"progress\", Callbacks(\"memory\")]],\n\t        _state = \"pending\",\n\t        deferred = {},\n\t        _promise = {\n\t        state: function state() {\n\t            return _state;\n\t        },\n\t        always: function always() {\n\t            var args = ArrayFrom(arguments);\n\t            deferred.done(args).fail(args);\n\t            return this;\n\t        },\n\t        then: function then() /* fnDone, fnFail, fnProgress */{\n\t            var fns = arguments;\n\t            return Deferred(function (newDefer) {\n\t                tuples.forEach(function (tuple, i) {\n\t                    var fn = isFunction(fns[i]) && fns[i];\n\t                    deferred[tuple[1]](function () {\n\t                        var returned = fn && fn.apply(this, arguments);\n\t                        if (returned && isFunction(returned.promise)) {\n\t                            returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);\n\t                        } else {\n\t                            newDefer[tuple[0] + \"With\"](this === _promise ? newDefer.promise() : this, fn ? [returned] : arguments);\n\t                        }\n\t                    });\n\t                });\n\t                fns = null;\n\t            }).promise();\n\t        },\n\t        promise: function promise(obj) {\n\t            return obj != null ? extend(obj, _promise) : _promise;\n\t        }\n\t    };\n\t\n\t    _promise.pipe = _promise.then;\n\t\n\t    tuples.forEach(function (tuple, i) {\n\t        var list = tuple[2],\n\t            stateString = tuple[3];\n\t\n\t        _promise[tuple[1]] = list.add;\n\t\n\t        if (stateString) {\n\t            list.add(function () {\n\t                _state = stateString;\n\t            }, tuples[i ^ 1][2].disable, tuples[2][2].lock);\n\t        }\n\t\n\t        deferred[tuple[0]] = function () {\n\t            deferred[tuple[0] + \"With\"](this === deferred ? _promise : this, arguments);\n\t            return this;\n\t        };\n\t\n\t        deferred[tuple[0] + \"With\"] = list.fireWith;\n\t    });\n\t\n\t    _promise.promise(deferred);\n\t\n\t    if (func) {\n\t        func.call(deferred, deferred);\n\t    }\n\t\n\t    return deferred;\n\t}\n\t\n\texports.Deferred = Deferred;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n\t    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n\t    QUEUE_FILE_ADDED: 'queuefileadded', // 队列添加了一个文件\n\t    QUEUE_FILE_FILTERED: 'queuefilefiltered', // 队列过滤了一个文件\n\t    QUEUE_ERROR: 'queueerror', // 队列错误\n\t    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\t\n\t    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n\t    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n\t    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n\t    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n\t    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n\t    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n\t    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n\t    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n\t    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n\t    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n\t    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\t\n\t    FILE_CANCEL: 'filecancel', // 文件退出\n\t    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.Status = {\n\t    ALL: 255, // 所有状态\n\t\n\t    PROCESS: 31, // INITED -> END\n\t    INITED: 1, // 初始状态\n\t    QUEUED: 2, // 进入队列\n\t    PENDING: 4, // 队列中等待\n\t    PROGRESS: 8, // 上传中\n\t    END: 16, // 上传完成, 等待后续处理\n\t\n\t    SUCCESS: 32, // 上传成功\n\t    ERROR: 64, // 上传出错\n\t    CANCELLED: 128 // 上传取消 和 queued 相反, 退出队列\n\t};\n\t\n\texports.StatusName = {\n\t    1: 'inited',\n\t    2: 'queued',\n\t    4: 'pending',\n\t    8: 'progress',\n\t    16: 'end',\n\t    32: 'success',\n\t    64: 'error',\n\t    128: 'cancelled'\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Error = (function (_Error2) {\n\t    _inherits(_Error, _Error2);\n\t\n\t    function _Error(message) {\n\t        _classCallCheck(this, _Error);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(_Error).call(this, message));\n\t\n\t        _this.message = message;\n\t        return _this;\n\t    }\n\t\n\t    return _Error;\n\t})(Error);\n\t\n\tvar AbortError = (function (_Error3) {\n\t    _inherits(AbortError, _Error3);\n\t\n\t    function AbortError(message) {\n\t        _classCallCheck(this, AbortError);\n\t\n\t        var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(AbortError).call(this, message));\n\t\n\t        _this2.name = 'AbortError';\n\t        return _this2;\n\t    }\n\t\n\t    return AbortError;\n\t})(_Error);\n\t\n\tvar TimeoutError = (function (_Error4) {\n\t    _inherits(TimeoutError, _Error4);\n\t\n\t    function TimeoutError(message) {\n\t        _classCallCheck(this, TimeoutError);\n\t\n\t        var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(TimeoutError).call(this, message));\n\t\n\t        _this3.name = 'TimeoutError';\n\t        return _this3;\n\t    }\n\t\n\t    return TimeoutError;\n\t})(_Error);\n\t\n\tvar NetworkError = (function (_Error5) {\n\t    _inherits(NetworkError, _Error5);\n\t\n\t    function NetworkError(status, message) {\n\t        _classCallCheck(this, NetworkError);\n\t\n\t        var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(NetworkError).call(this, message));\n\t\n\t        _this4.name = 'NetworkError';\n\t        _this4.status = status;\n\t        return _this4;\n\t    }\n\t\n\t    return NetworkError;\n\t})(_Error);\n\t\n\tvar QueueLimitError = (function (_Error6) {\n\t    _inherits(QueueLimitError, _Error6);\n\t\n\t    function QueueLimitError() {\n\t        _classCallCheck(this, QueueLimitError);\n\t\n\t        var _this5 = _possibleConstructorReturn(this, Object.getPrototypeOf(QueueLimitError).call(this, 'queue limit'));\n\t\n\t        _this5.name = 'QueueLimitError';\n\t        return _this5;\n\t    }\n\t\n\t    return QueueLimitError;\n\t})(_Error);\n\t\n\tvar FilterError = (function (_Error7) {\n\t    _inherits(FilterError, _Error7);\n\t\n\t    function FilterError(file, message) {\n\t        _classCallCheck(this, FilterError);\n\t\n\t        var _this6 = _possibleConstructorReturn(this, Object.getPrototypeOf(FilterError).call(this, message));\n\t\n\t        _this6.name = 'FilterError';\n\t        _this6.file = file;\n\t        return _this6;\n\t    }\n\t\n\t    return FilterError;\n\t})(_Error);\n\t\n\tvar DuplicateError = (function (_FilterError) {\n\t    _inherits(DuplicateError, _FilterError);\n\t\n\t    function DuplicateError(file, message) {\n\t        _classCallCheck(this, DuplicateError);\n\t\n\t        var _this7 = _possibleConstructorReturn(this, Object.getPrototypeOf(DuplicateError).call(this, file, message));\n\t\n\t        _this7.name = 'DuplicateError';\n\t        return _this7;\n\t    }\n\t\n\t    return DuplicateError;\n\t})(FilterError);\n\t\n\tvar FileExtensionError = (function (_FilterError2) {\n\t    _inherits(FileExtensionError, _FilterError2);\n\t\n\t    function FileExtensionError(file, message) {\n\t        _classCallCheck(this, FileExtensionError);\n\t\n\t        var _this8 = _possibleConstructorReturn(this, Object.getPrototypeOf(FileExtensionError).call(this, file, message));\n\t\n\t        _this8.name = 'FileExtensionError';\n\t        return _this8;\n\t    }\n\t\n\t    return FileExtensionError;\n\t})(FilterError);\n\t\n\tvar FileSizeError = (function (_FilterError3) {\n\t    _inherits(FileSizeError, _FilterError3);\n\t\n\t    function FileSizeError(file, message) {\n\t        _classCallCheck(this, FileSizeError);\n\t\n\t        var _this9 = _possibleConstructorReturn(this, Object.getPrototypeOf(FileSizeError).call(this, file, message));\n\t\n\t        _this9.name = 'FileSizeError';\n\t        return _this9;\n\t    }\n\t\n\t    return FileSizeError;\n\t})(FilterError);\n\t\n\tmodule.exports = { AbortError: AbortError, TimeoutError: TimeoutError, NetworkError: NetworkError,\n\t    QueueLimitError: QueueLimitError, FilterError: FilterError, DuplicateError: DuplicateError, FileExtensionError: FileExtensionError, FileSizeError: FileSizeError };\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar parseSize = _require.parseSize;\n\t\n\tvar ChunkResponse = (function () {\n\t    /**\n\t     * @param {string|null} rawResponse\n\t     * @param {ChunkRequest} chunkRequest\n\t     */\n\t\n\t    function ChunkResponse(rawResponse, chunkRequest) {\n\t        _classCallCheck(this, ChunkResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.chunkRequest = chunkRequest;\n\t    }\n\t\n\t    _createClass(ChunkResponse, [{\n\t        key: 'getChunkRequest',\n\t        value: function getChunkRequest() {\n\t            return this.chunkRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            return this.response || this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getJson',\n\t        value: function getJson() {\n\t            var response = this.getResponse();\n\t            if (response == null) {\n\t                return null;\n\t            }\n\t            if (typeof response.getJson === 'function') {\n\t                return response.getJson();\n\t            }\n\t            if (typeof response === 'string') {\n\t                return response === '' ? null : JSON.parse(response);\n\t            }\n\t            return response;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return ChunkResponse;\n\t})();\n\t\n\tvar ChunkRequest = (function () {\n\t    /**\n\t     *\n\t     * @param {int} index\n\t     * @param {Blob} blob\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function ChunkRequest(index, blob, fileRequest) {\n\t        _classCallCheck(this, ChunkRequest);\n\t\n\t        this.index = index;\n\t        this.blob = blob;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(ChunkRequest, [{\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.fileRequest.getName();\n\t        }\n\t    }, {\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.fileRequest.getFile();\n\t        }\n\t    }, {\n\t        key: 'getBlob',\n\t        value: function getBlob() {\n\t            return this.blob;\n\t        }\n\t    }, {\n\t        key: 'getIndex',\n\t        value: function getIndex() {\n\t            return this.index;\n\t        }\n\t    }, {\n\t        key: 'isMultiChunk',\n\t        value: function isMultiChunk() {\n\t            return this.getFile().source !== this.blob;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            if (!this.params) {\n\t                this.params = this.fileRequest.getParams().clone();\n\t            }\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.getParams().setParam(name, value);\n\t\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || this.fileRequest.getUrl();\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            if (!this.headers) {\n\t                this.headers = this.fileRequest.getHeaders().slice(0);\n\t            }\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            var headers = this.getHeaders();\n\t            headers.push({ name: name, value: value });\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.fileRequest.isWithCredentials();\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.fileRequest.getTimeout();\n\t        }\n\t    }, {\n\t        key: 'createChunkResponse',\n\t        value: function createChunkResponse(response) {\n\t            return new ChunkResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return ChunkRequest;\n\t})();\n\t\n\tvar FileResponse = (function () {\n\t    /**\n\t     * @param {ChunkResponse|Object|string} rawResponse\n\t     * @param {FileRequest} fileRequest\n\t     */\n\t\n\t    function FileResponse(rawResponse, fileRequest) {\n\t        _classCallCheck(this, FileResponse);\n\t\n\t        this.rawResponse = rawResponse;\n\t        this.fileRequest = fileRequest;\n\t    }\n\t\n\t    _createClass(FileResponse, [{\n\t        key: 'isFromMultiChunkResponse',\n\t        value: function isFromMultiChunkResponse() {\n\t            if (this.rawResponse instanceof ChunkResponse) {\n\t                return this.rawResponse.getChunkRequest().isMultiChunk();\n\t            }\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'getFileRequest',\n\t        value: function getFileRequest() {\n\t            return this.fileRequest;\n\t        }\n\t    }, {\n\t        key: 'getRawResponse',\n\t        value: function getRawResponse() {\n\t            return this.rawResponse;\n\t        }\n\t    }, {\n\t        key: 'getResponse',\n\t        value: function getResponse() {\n\t            if (this.response != null) {\n\t                return this.response;\n\t            }\n\t            if (this.rawResponse instanceof ChunkResponse) {\n\t                return this.rawResponse.getResponse();\n\t            } else {\n\t                return this.rawResponse;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getJson',\n\t        value: function getJson() {\n\t            var response = this.getResponse();\n\t            if (response == null) {\n\t                return null;\n\t            }\n\t            if (typeof response.getJson === 'function') {\n\t                return response.getJson();\n\t            }\n\t            if (typeof response === 'string') {\n\t                return response === '' ? null : JSON.parse(response);\n\t            }\n\t            return response;\n\t        }\n\t    }, {\n\t        key: 'setResponse',\n\t        value: function setResponse(response) {\n\t            this.response = response;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return FileResponse;\n\t})();\n\t\n\tvar Params = (function () {\n\t    function Params(params) {\n\t        _classCallCheck(this, Params);\n\t\n\t        if (Array.isArray(params)) {\n\t            this.params = params.slice(0);\n\t        } else if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {\n\t            this.params = [];\n\t            for (var name in params) {\n\t                if (params.hasOwnProperty(name)) {\n\t                    this.params.push({ name: name, value: params[name] });\n\t                }\n\t            }\n\t        } else {\n\t            this.params = [];\n\t        }\n\t    }\n\t\n\t    _createClass(Params, [{\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.removeParam(name);\n\t            this.addParam(name, value);\n\t        }\n\t    }, {\n\t        key: 'addParam',\n\t        value: function addParam(name, value) {\n\t            this.params.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'removeParam',\n\t        value: function removeParam(name) {\n\t            this.params = this.params.filter(function (param) {\n\t                return param.name !== name;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name, single) {\n\t            var ret = this.params.filter(function (param) {\n\t                return param.name === name;\n\t            }).map(function (param) {\n\t                return param.value;\n\t            });\n\t\n\t            if (single) {\n\t                return ret.shift();\n\t            }\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'clone',\n\t        value: function clone() {\n\t            return new Params(this.params);\n\t        }\n\t    }, {\n\t        key: 'toArray',\n\t        value: function toArray() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'toString',\n\t        value: function toString() {\n\t            var params = this.params.map(function (param) {\n\t                return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n\t            });\n\t\n\t            return params.join('&'); //.replace( /%20/g, '+');\n\t        }\n\t    }]);\n\t\n\t    return Params;\n\t})();\n\t\n\tvar MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\t\n\tvar FileRequest = (function () {\n\t    function FileRequest(file) {\n\t        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t        _classCallCheck(this, FileRequest);\n\t\n\t        this.file = file;\n\t        this.name = options.name || 'file';\n\t        this.url = options.url || options.action;\n\t        this.params = new Params(options.params || options.data);\n\t        this.headers = options.headers || [];\n\t        this.withCredentials = options.withCredentials;\n\t        this.timeout = options.timeout || 0;\n\t        this.chunkSize = options.chunkSize || 0;\n\t        this.chunkRetries = options.chunkRetries || 0;\n\t        this.chunkEnable = options.chunkEnable || false;\n\t        this.chunkProcessThreads = options.chunkProcessThreads || 2;\n\t    }\n\t\n\t    _createClass(FileRequest, [{\n\t        key: 'getFile',\n\t        value: function getFile() {\n\t            return this.file;\n\t        }\n\t    }, {\n\t        key: 'getUrl',\n\t        value: function getUrl() {\n\t            return this.url || '';\n\t        }\n\t    }, {\n\t        key: 'getName',\n\t        value: function getName() {\n\t            return this.name;\n\t        }\n\t    }, {\n\t        key: 'setName',\n\t        value: function setName(name) {\n\t            this.name = name;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'setUrl',\n\t        value: function setUrl(url) {\n\t            this.url = url;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getParams',\n\t        value: function getParams() {\n\t            return this.params;\n\t        }\n\t    }, {\n\t        key: 'getParam',\n\t        value: function getParam(name) {\n\t            return this.getParams().getParam(name);\n\t        }\n\t    }, {\n\t        key: 'setParam',\n\t        value: function setParam(name, value) {\n\t            this.params.setParam(name, value);\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getHeaders',\n\t        value: function getHeaders() {\n\t            return this.headers;\n\t        }\n\t    }, {\n\t        key: 'setHeader',\n\t        value: function setHeader(name, value) {\n\t            this.headers.push({ name: name, value: value });\n\t        }\n\t    }, {\n\t        key: 'isWithCredentials',\n\t        value: function isWithCredentials() {\n\t            return this.withCredentials;\n\t        }\n\t    }, {\n\t        key: 'setWithCredentials',\n\t        value: function setWithCredentials(flag) {\n\t            this.withCredentials = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getTimeout',\n\t        value: function getTimeout() {\n\t            return this.timeout;\n\t        }\n\t    }, {\n\t        key: 'setTimeout',\n\t        value: function setTimeout(timeout) {\n\t            this.timeout = timeout;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkSize',\n\t        value: function getChunkSize() {\n\t            return parseSize(this.chunkSize);\n\t        }\n\t    }, {\n\t        key: 'setChunkSize',\n\t        value: function setChunkSize(chunkSize) {\n\t            this.chunkSize = chunkSize;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkRetries',\n\t        value: function getChunkRetries() {\n\t            return this.chunkRetries;\n\t        }\n\t    }, {\n\t        key: 'setChunkRetries',\n\t        value: function setChunkRetries(retries) {\n\t            this.chunkRetries = retries;\n\t            return 0;\n\t        }\n\t    }, {\n\t        key: 'isChunkEnable',\n\t        value: function isChunkEnable() {\n\t            var chunkSize = this.getChunkSize();\n\t            return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n\t        }\n\t    }, {\n\t        key: 'setChunkEnable',\n\t        value: function setChunkEnable(flag) {\n\t            this.chunkEnable = flag;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'getChunkProcessThreads',\n\t        value: function getChunkProcessThreads() {\n\t            return this.chunkProcessThreads;\n\t        }\n\t    }, {\n\t        key: 'setChunkProcessThreads',\n\t        value: function setChunkProcessThreads(threads) {\n\t            this.chunkProcessThreads = threads;\n\t            return this;\n\t        }\n\t    }, {\n\t        key: 'createChunkRequest',\n\t        value: function createChunkRequest(index, blob) {\n\t            return new ChunkRequest(index, blob, this);\n\t        }\n\t    }, {\n\t        key: 'createFileResponse',\n\t        value: function createFileResponse(response) {\n\t            return new FileResponse(response, this);\n\t        }\n\t    }]);\n\t\n\t    return FileRequest;\n\t})();\n\t\n\tmodule.exports = FileRequest;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Emitter = __webpack_require__(2);\n\tvar Runtime = __webpack_require__(9);\n\tvar File = __webpack_require__(12);\n\t\n\tvar MAX_NUM_ONCE = 100;\n\t\n\tfunction createReader(collector) {\n\t    return function (dataTransfer, responders) {\n\t        var items = dataTransfer.items,\n\t            files = dataTransfer.files;\n\t        var item = undefined,\n\t            times = MAX_NUM_ONCE;\n\t        var _break = false;\n\t\n\t        function collect(file) {\n\t            if (--times < 0 || !collector(file, responders)) {\n\t                _break = true;\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t\n\t        function readEntry(entry) {\n\t            if (_break) return;\n\t            if (entry.isFile) {\n\t                entry.file(function (file) {\n\t                    if (!_break) {\n\t                        collect(file);\n\t                    }\n\t                });\n\t            } else if (entry.isDirectory) {\n\t                entry.createReader().readEntries(function (entries) {\n\t                    if (_break) return;\n\t                    for (var i = 0, l = entries.length; i < l; i++) {\n\t                        if (_break) break;\n\t                        readEntry(entries[i]);\n\t                    }\n\t                });\n\t            }\n\t        }\n\t\n\t        for (var i = 0, l = files.length; i < l; i++) {\n\t            if (_break) break;\n\t            item = items && items[i];\n\t\n\t            var entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\t\n\t            if (entry && entry.isDirectory) {\n\t                readEntry(entry);\n\t            } else {\n\t                if (!collect(files[i])) {\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t    };\n\t}\n\t\n\tvar Area = (function (_Emitter) {\n\t    _inherits(Area, _Emitter);\n\t\n\t    function Area(area) {\n\t        _classCallCheck(this, Area);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Area).call(this));\n\t\n\t        _this.areaElement = area;\n\t        return _this;\n\t    }\n\t\n\t    _createClass(Area, [{\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areaElement.contains(target);\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e, allowed) {\n\t            this.emit('start', e, allowed);\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e, allowed) {\n\t            allowed = allowed && this.contains(e.target);\n\t            this.emit('response', e, allowed);\n\t            return allowed;\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.emit('end', e);\n\t        }\n\t    }]);\n\t\n\t    return Area;\n\t})(Emitter);\n\t\n\tvar Collectors = [];\n\t\n\tfunction prepare() {\n\t    if (!('DataTransfer' in window) || !('FileList' in window) || !document.addEventListener) {\n\t        return;\n\t    }\n\t\n\t    var runtime = Runtime.getInstance();\n\t\n\t    var started = 0,\n\t        enter = 0,\n\t        endTimer = undefined;\n\t    var dataTransferReader = createReader(function (file, responders) {\n\t        if (!responders || responders.length < 1) {\n\t            return false;\n\t        }\n\t        file = new File(runtime, file);\n\t        var total = responders.length;\n\t        return responders.some(function (responder) {\n\t            var ret = responder.recieve(file);\n\t            if (ret > 0) {\n\t                return true;\n\t            }\n\t            if (ret < 0) {\n\t                total -= 1;\n\t            }\n\t            return false;\n\t        }) || total > 0;\n\t    });\n\t\n\t    var start = function start(e) {\n\t        started = 1;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.start(e);\n\t        });\n\t    };\n\t\n\t    var move = function move(e) {\n\t        var has = Collectors.filter(function (responder) {\n\t            return responder.response(e);\n\t        }).length > 0;\n\t\n\t        var dataTransfer = e.dataTransfer;\n\t\n\t        if (dataTransfer) {\n\t            dataTransfer.dropEffect = has ? 'copy' : 'none';\n\t        }\n\t        e.preventDefault();\n\t    };\n\t\n\t    var end = function end(e) {\n\t        started = 0;\n\t        enter = 0;\n\t        Collectors.forEach(function (responder) {\n\t            return responder.end(e);\n\t        });\n\t    };\n\t\n\t    var drag = function drag(e) {\n\t        clearTimeout(endTimer);\n\t        var isLeave = e.type === 'dragleave';\n\t        if (!isLeave && !started) {\n\t            start(e);\n\t        }\n\t        move(e);\n\t        if (isLeave) {\n\t            endTimer = setTimeout(function () {\n\t                return end(e);\n\t            }, 100);\n\t        }\n\t    };\n\t    var drop = function drop(e) {\n\t        e.preventDefault();\n\t\n\t        clearTimeout(endTimer);\n\t        end(e);\n\t\n\t        var responders = Collectors.filter(function (responder) {\n\t            return responder.contains(e.target);\n\t        });\n\t\n\t        if (responders.length < 1) {\n\t            return;\n\t        }\n\t\n\t        var dataTransfer = e.dataTransfer;\n\t\n\t        try {\n\t            if (dataTransfer.getData('text/html')) {\n\t                return;\n\t            }\n\t        } catch (ex) {}\n\t\n\t        dataTransferReader(dataTransfer, responders);\n\t    };\n\t\n\t    document.addEventListener('dragenter', drag, false);\n\t    document.addEventListener('dragover', drag, false);\n\t    document.addEventListener('dragleave', drag, false);\n\t    document.addEventListener('drop', drop, false);\n\t}\n\t\n\tvar DndCollector = (function () {\n\t    function DndCollector(core) {\n\t        _classCallCheck(this, DndCollector);\n\t\n\t        if (Collectors.length < 1) {\n\t            prepare();\n\t        }\n\t        Collectors.push(this);\n\t\n\t        this.core = core;\n\t        this.areas = [];\n\t    }\n\t\n\t    _createClass(DndCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            var _this2 = this;\n\t\n\t            area = new Area(area);\n\t            this.areas.push(area);\n\t            area.destroy = function () {\n\t                area.removeAllListeners();\n\t                var i = _this2.areas.indexOf(area);\n\t                if (i > -1) {\n\t                    _this2.areas.splice(i, 1);\n\t                }\n\t            };\n\t\n\t            return area;\n\t        }\n\t    }, {\n\t        key: 'contains',\n\t        value: function contains(target) {\n\t            return this.areas.some(function (area) {\n\t                return area.contains(target);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'start',\n\t        value: function start(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.start(e);\n\t            });\n\t        }\n\t    }, {\n\t        key: 'response',\n\t        value: function response(e) {\n\t            return this.areas.map(function (area) {\n\t                return area.response(e);\n\t            }).some(function (r) {\n\t                return r !== false;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'recieve',\n\t        value: function recieve(file) {\n\t            var ret = this.core.add(file);\n\t            if (ret > 0 && !this.core.isMultiple()) {\n\t                return -1;\n\t            } else {\n\t                return ret;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'end',\n\t        value: function end(e) {\n\t            this.areas.forEach(function (area) {\n\t                return area.end(e);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return DndCollector;\n\t})();\n\t\n\tmodule.exports = DndCollector;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Runtime = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar Deferred = _require.Deferred;\n\t\n\tvar Transport = __webpack_require__(11);\n\t\n\tvar instance = undefined;\n\t\n\tvar Html5Runtime = (function (_Runtime) {\n\t    _inherits(Html5Runtime, _Runtime);\n\t\n\t    function Html5Runtime() {\n\t        _classCallCheck(this, Html5Runtime);\n\t\n\t        return _possibleConstructorReturn(this, Object.getPrototypeOf(Html5Runtime).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(Html5Runtime, [{\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(blob, timeout) {\n\t            var i = Deferred(),\n\t                fr = new FileReader(),\n\t                timer = undefined;\n\t\n\t            fr.onloadend = function () {\n\t                if (fr.readyState == FileReader.DONE) {\n\t                    i.resolve(fr.result);\n\t                } else {\n\t                    i.reject();\n\t                }\n\t                clearTimeout(timer);\n\t                fr.onloadend = null;\n\t            };\n\t            fr.readAsDataURL(blob);\n\t\n\t            var abort = function abort() {\n\t                fr && fr.abort();\n\t                fr = null;\n\t            };\n\t            if (timeout) {\n\t                timer = setTimeout(abort, timeout);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            if (!this.transport) {\n\t                this.transport = new Transport(this);\n\t            }\n\t            return this.transport;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob, start, end) {\n\t            var blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\t\n\t            return blobSlice.call(blob, start, end);\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = Deferred();\n\t\n\t            if (!window.SparkMD5) {\n\t                i.reject();\n\t                return i.promise();\n\t            }\n\t\n\t            var chunkSize = 2 * 1024 * 1024,\n\t                chunks = Math.ceil(blob.size / chunkSize),\n\t                chunk = 0,\n\t                spark = new SparkMD5.ArrayBuffer(),\n\t                blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\t\n\t            var fr = new FileReader();\n\t\n\t            var _loadNext = function loadNext() {\n\t                if (!fr) return;\n\t                var start = undefined,\n\t                    end = undefined;\n\t\n\t                start = chunk * chunkSize;\n\t                end = Math.min(start + chunkSize, blob.size);\n\t\n\t                fr.onload = function () {\n\t                    spark && spark.append(fr.result);\n\t                };\n\t\n\t                fr.onloadend = function () {\n\t                    if (!fr) return;\n\t                    if (fr.readyState == FileReader.DONE) {\n\t                        if (++chunk < chunks) {\n\t                            setTimeout(_loadNext, 1);\n\t                        } else {\n\t                            setTimeout(function () {\n\t                                spark && i.resolve(spark.end());\n\t                                _loadNext = blob = spark = null;\n\t                            }, 50);\n\t                        }\n\t                    } else {\n\t                        i.reject();\n\t                    }\n\t                    fr.onloadend = fr.onload = null;\n\t                };\n\t\n\t                fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n\t            };\n\t\n\t            _loadNext();\n\t\n\t            var ret = i.promise();\n\t            ret.abort = function () {\n\t                fr && fr.abort();\n\t                spark = null;\n\t                fr = null;\n\t            };\n\t\n\t            return ret;\n\t        }\n\t    }], [{\n\t        key: 'getInstance',\n\t        value: function getInstance() {\n\t            if (!instance) {\n\t                instance = new Html5Runtime();\n\t            }\n\t            return instance;\n\t        }\n\t    }]);\n\t\n\t    return Html5Runtime;\n\t})(Runtime);\n\t\n\tmodule.exports = Html5Runtime;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Emitter = __webpack_require__(2);\n\tvar Events = __webpack_require__(4);\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar Deferred = _require.Deferred;\n\t\n\tvar _require2 = __webpack_require__(6);\n\t\n\tvar NetworkError = _require2.NetworkError;\n\t\n\tvar Runtime = (function (_Emitter) {\n\t    _inherits(Runtime, _Emitter);\n\t\n\t    function Runtime() {\n\t        _classCallCheck(this, Runtime);\n\t\n\t        return _possibleConstructorReturn(this, Object.getPrototypeOf(Runtime).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(Runtime, [{\n\t        key: 'md5',\n\t        value: function md5(blob) {\n\t            var i = Deferred();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(file, timeout) {\n\t            var i = Deferred();\n\t            i.reject();\n\t            return i.promise();\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport() {\n\t            return null;\n\t        }\n\t    }, {\n\t        key: 'getUploading',\n\t        value: function getUploading() {\n\t            if (!this.uploading) {\n\t                this.uploading = new Uploading(this);\n\t            }\n\t            return this.uploading;\n\t        }\n\t    }, {\n\t        key: 'canSlice',\n\t        value: function canSlice() {\n\t            return false;\n\t        }\n\t    }, {\n\t        key: 'slice',\n\t        value: function slice(blob) {\n\t            throw new Error('this runtime current not support slice');\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {}\n\t    }]);\n\t\n\t    return Runtime;\n\t})(Emitter);\n\t\n\tmodule.exports = Runtime;\n\t\n\tvar Uploading = (function () {\n\t    function Uploading(runtime) {\n\t        _classCallCheck(this, Uploading);\n\t\n\t        this.runtime = runtime;\n\t    }\n\t\n\t    /**\n\t     * @param {FileRequest} request\n\t     * @returns {*}\n\t     */\n\t\n\t    _createClass(Uploading, [{\n\t        key: 'generate',\n\t        value: function generate(request) {\n\t            var _this2 = this;\n\t\n\t            var i = Deferred(),\n\t                file = request.getFile(),\n\t                runtime = this.runtime;\n\t\n\t            var source = file.getSource(),\n\t                size = file.size,\n\t                chunkSize = request.getChunkSize(),\n\t                useChunk = request.isChunkEnable(),\n\t                threads = Math.max(request.getChunkProcessThreads(), 1),\n\t                start = 0,\n\t                end = 0,\n\t                slots = [];\n\t\n\t            var getActives = function getActives() {\n\t                return slots.reduce(function (sum, slot) {\n\t                    return sum + (slot.state() === 'pending' ? 1 : 0);\n\t                }, 0);\n\t            };\n\t\n\t            var readChunk = function readChunk() {\n\t                var slot = undefined,\n\t                    req = undefined,\n\t                    blob = undefined;\n\t                while (end < size && getActives() < threads) {\n\t                    start = end;\n\t                    end = Math.min(end + chunkSize, size);\n\t                    blob = runtime.slice(source, start, end);\n\t                    req = request.createChunkRequest(slots.length, blob);\n\t                    slot = _this2.slot(req, request.getChunkRetries());\n\t                    slot.progress(progress).done(done).fail(fail);\n\t                    slots.push(slot);\n\t                }\n\t            };\n\t\n\t            var progress = function progress() {\n\t                var total = size - end,\n\t                    loaded = 0;\n\t                slots.forEach(function (slot) {\n\t                    total += slot.total;\n\t                    loaded += slot.loaded;\n\t                });\n\t                i.notify({ total: total, loaded: loaded });\n\t            };\n\t\n\t            var done = function done(res) {\n\t                useChunk && readChunk();\n\t\n\t                if (end >= size && slots.every(function (slot) {\n\t                    return slot.state() === 'resolved';\n\t                })) {\n\t                    i.resolve(res);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                slots.forEach(function (slot) {\n\t                    return slot.abort();\n\t                });\n\t            };\n\t\n\t            var fail = function fail(error) {\n\t                i.reject(error);\n\t                abort();\n\t            };\n\t\n\t            if (useChunk) {\n\t                readChunk();\n\t            } else {\n\t                end = size;\n\t                var slot = this.slot(request.createChunkRequest(0, source), 0);\n\t                slot.progress(progress).done(done).fail(fail);\n\t                slots.push(slot);\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }, {\n\t        key: 'slot',\n\t        value: function slot(request, retries) {\n\t            var i = Deferred(),\n\t                runtime = this.runtime,\n\t                core = request.getFile().getCore();\n\t\n\t            var ret = i.promise();\n\t\n\t            var progress = function progress(e) {\n\t                if (e.total) {\n\t                    ret.total = e.total;\n\t                }\n\t                if (e.loaded) {\n\t                    ret.loaded = e.loaded;\n\t                }\n\t                i.notify(e);\n\t            };\n\t\n\t            var process = function process() {\n\t                var prepare, transport, completion;\n\t                ret.abort = function () {\n\t                    prepare && prepare.abort();\n\t                    transport && transport.abort();\n\t                    completion && completion.abort();\n\t                };\n\t                ret.total = request.getBlob().size;\n\t                ret.loaded = 0;\n\t\n\t                prepare = core.invoke(Events.CHUNK_UPLOAD_PREPARING, request);\n\t\n\t                prepare.then(function (request) {\n\t                    transport = runtime.getTransport().generate(request);\n\t                    transport.progress(progress);\n\t                    return transport;\n\t                }).then(function (response) {\n\t                    completion = core.invoke(Events.CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n\t                    return completion;\n\t                }).done(i.resolve).fail(error);\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e instanceof NetworkError && retries-- > 0) {\n\t                    // retry\n\t                    setTimeout(process, 500);\n\t                } else {\n\t                    i.reject(e);\n\t                }\n\t                ret.abort();\n\t            };\n\t\n\t            process();\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return Uploading;\n\t})();\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar Deferred = _require.Deferred;\n\t\n\tvar _require2 = __webpack_require__(6);\n\t\n\tvar TimeoutError = _require2.TimeoutError;\n\tvar AbortError = _require2.AbortError;\n\tvar NetworkError = _require2.NetworkError;\n\t\n\tvar Html5Transport = (function () {\n\t    function Html5Transport() {\n\t        _classCallCheck(this, Html5Transport);\n\t    }\n\t\n\t    _createClass(Html5Transport, [{\n\t        key: 'generate',\n\t\n\t        /**\n\t         * @param {ChunkRequest} request\n\t         * @returns {*}\n\t         */\n\t        value: function generate(request) {\n\t            var i = Deferred();\n\t            var xhr = new XMLHttpRequest();\n\t\n\t            var timeoutTimer = undefined;\n\t\n\t            var clean = function clean() {\n\t                xhr.onload = xhr.onerror = null;\n\t                if (xhr.upload) {\n\t                    xhr.upload.onprogress = null;\n\t                }\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t\n\t            var abort = function abort() {\n\t                clean();\n\t                try {\n\t                    xhr.abort();\n\t                } catch (e) {}\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                clean();\n\t                if (!xhr.status && e.type === 'error') {\n\t                    return i.reject(new AbortError(e.message));\n\t                }\n\t                if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n\t                    return i.resolve(xhr.responseText);\n\t                }\n\t                return i.reject(new NetworkError(xhr.status, xhr.statusText));\n\t            };\n\t\n\t            if (xhr.upload) {\n\t                xhr.upload.onprogress = function (e) {\n\t                    return i.notify(e);\n\t                };\n\t            }\n\t            xhr.onerror = complete;\n\t            xhr.onload = complete;\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                (function () {\n\t                    xhr.open('POST', request.getUrl(), true);\n\t                    if (request.isWithCredentials()) {\n\t                        xhr.withCredentials = true;\n\t                    }\n\t\n\t                    request.getHeaders().forEach(function (header) {\n\t                        return xhr.setRequestHeader(header.name, header.value);\n\t                    });\n\t\n\t                    var formData = new FormData(),\n\t                        blob = request.getBlob();\n\t\n\t                    request.getParams().toArray().forEach(function (param) {\n\t                        return formData.append(param.name, param.value);\n\t                    });\n\t\n\t                    formData.append(request.getName(), blob, blob.name || 'blob');\n\t\n\t                    xhr.send(formData);\n\t                })();\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return Html5Transport;\n\t})();\n\t\n\tmodule.exports = Html5Transport;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Emitter = __webpack_require__(2);\n\tvar Events = __webpack_require__(4);\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar Deferred = _require.Deferred;\n\t\n\tvar _require2 = __webpack_require__(5);\n\t\n\tvar Status = _require2.Status;\n\tvar StatusName = _require2.StatusName;\n\t\n\tvar uid = 0;\n\tfunction guid() {\n\t    return 'FILE-' + (uid++).toString(16).toUpperCase();\n\t}\n\t\n\tvar RE_EXT = /\\.([^.]+)$/,\n\t    RE_IMAGE = /^image\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\n\tfunction guessExt(blob) {\n\t    var m = blob.name && RE_EXT.exec(blob.name);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    m = blob.type && RE_IMAGE.exec(blob.type);\n\t    if (m) {\n\t        return m[1];\n\t    }\n\t    return '';\n\t}\n\t\n\tfunction guessType(ext) {\n\t    if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'].indexOf(ext.toLowerCase()) > -1) {\n\t        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n\t    }\n\t    return null;\n\t}\n\t\n\tvar Progress = (function () {\n\t    function Progress(total, loaded) {\n\t        _classCallCheck(this, Progress);\n\t\n\t        this.change(total, loaded);\n\t    }\n\t\n\t    _createClass(Progress, [{\n\t        key: 'change',\n\t        value: function change(total, loaded) {\n\t            this.total = total;\n\t            this.loaded = loaded || 0;\n\t            this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100);\n\t        }\n\t    }, {\n\t        key: 'done',\n\t        value: function done() {\n\t            this.change(this.total, this.total);\n\t        }\n\t    }]);\n\t\n\t    return Progress;\n\t})();\n\t\n\tvar File = (function (_Emitter) {\n\t    _inherits(File, _Emitter);\n\t\n\t    function File(runtime, source, filename) {\n\t        _classCallCheck(this, File);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(File).call(this));\n\t\n\t        _this.id = guid();\n\t\n\t        _this.name = source.name || filename || _this.id;\n\t\n\t        var ext = guessExt(source).toLowerCase();\n\t\n\t        if (ext && !RE_EXT.test(_this.name)) {\n\t            _this.name += '.' + ext;\n\t        }\n\t\n\t        _this.ext = ext;\n\t\n\t        _this.type = source.type || guessType(_this.ext) || 'application/octet-stream';\n\t\n\t        _this.lastModified = source.lastModified || +new Date();\n\t\n\t        _this.size = source.size || 0;\n\t\n\t        _this.runtime = runtime;\n\t\n\t        _this.source = source;\n\t\n\t        _this.status = Status.INITED;\n\t\n\t        _this.progress = new Progress(_this.size, 0);\n\t        return _this;\n\t    }\n\t\n\t    _createClass(File, [{\n\t        key: 'getCore',\n\t        value: function getCore() {\n\t            return this.core;\n\t        }\n\t    }, {\n\t        key: 'setCore',\n\t        value: function setCore(core) {\n\t            this.core = core;\n\t            this.setPropagationTarget(core);\n\t        }\n\t    }, {\n\t        key: 'getRuntime',\n\t        value: function getRuntime() {\n\t            return this.runtime;\n\t        }\n\t    }, {\n\t        key: 'isImage',\n\t        value: function isImage() {\n\t            return RE_IMAGE.test(this.type);\n\t        }\n\t    }, {\n\t        key: 'setStatus',\n\t        value: function setStatus(status) {\n\t            var prevStatus = this.status;\n\t\n\t            if (prevStatus !== Status.CANCELLED && status !== prevStatus) {\n\t                this.status = status;\n\t                this.emit(Events.FILE_STATUS_CHANGE, status, prevStatus);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getStatus',\n\t        value: function getStatus() {\n\t            return this.status;\n\t        }\n\t    }, {\n\t        key: 'getStatusName',\n\t        value: function getStatusName() {\n\t            if (this.status in StatusName) {\n\t                return StatusName[this.status];\n\t            } else {\n\t                return 'unknow';\n\t            }\n\t        }\n\t    }, {\n\t        key: 'getSource',\n\t        value: function getSource() {\n\t            return this.source;\n\t        }\n\t    }, {\n\t        key: 'getAsDataUrl',\n\t        value: function getAsDataUrl(timeout) {\n\t            if (!this._dataUrlPromise) {\n\t                this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n\t            }\n\t            return this._dataUrlPromise;\n\t        }\n\t    }, {\n\t        key: 'md5',\n\t        value: function md5() {\n\t            if (!this._md5Promise) {\n\t                this._md5Promise = this.runtime.md5(this.source);\n\t            }\n\t            return this._md5Promise;\n\t        }\n\t    }, {\n\t        key: 'session',\n\t        value: function session() {\n\t            var _this2 = this;\n\t\n\t            if (this._sessionPromise) {\n\t                return this._sessionPromise;\n\t            }\n\t\n\t            var ret = Deferred();\n\t\n\t            ret.progress(function (progress) {\n\t                _this2.setStatus(Status.PROGRESS);\n\t                _this2.emit(Events.FILE_UPLOAD_PROGRESS, progress);\n\t            }).done(function (response) {\n\t                _this2.response = response;\n\t                _this2._session = null;\n\t                _this2._sessionPromise = null;\n\t                _this2._flows = [];\n\t                _this2.setStatus(Status.SUCCESS);\n\t                _this2.emit(Events.FILE_UPLOAD_SUCCESS, response);\n\t            }).fail(function (error) {\n\t                _this2._session = null;\n\t                _this2._sessionPromise = null;\n\t                var flow = undefined;\n\t                while (flow = _this2._flows.shift()) {\n\t                    flow.abort();\n\t                }\n\t\n\t                if (error instanceof Error) {\n\t                    _this2.setStatus(Status.ERROR);\n\t                    _this2.emit(Events.FILE_UPLOAD_ERROR, error);\n\t                }\n\t            }).always(function () {\n\t                _this2.emit(Events.FILE_UPLOAD_COMPLETED, _this2.getStatus());\n\t            });\n\t\n\t            this._flows = [];\n\t            this._session = ret;\n\t            this._sessionPromise = ret.promise();\n\t\n\t            return this._sessionPromise;\n\t        }\n\t    }, {\n\t        key: 'prepare',\n\t        value: function prepare() {\n\t            var _this3 = this;\n\t\n\t            if (this.status !== Status.PENDING || !this.core) {\n\t                return false;\n\t            }\n\t\n\t            this.session();\n\t            this.setStatus(Status.PROGRESS);\n\t\n\t            this.emit(Events.FILE_UPLOAD_START);\n\t\n\t            this.request = this.core.createFileRequest(this);\n\t\n\t            var ret = this.core.invoke(Events.FILE_UPLOAD_PREPARING, this.request);\n\t\n\t            this._flows.push(ret);\n\t\n\t            ret.then(function (request) {\n\t                _this3.emit(Events.FILE_UPLOAD_PREPARED, request);\n\t\n\t                var upload = _this3.runtime.getUploading().generate(request);\n\t\n\t                _this3._flows.push(upload);\n\t\n\t                upload.progress(function (e) {\n\t                    _this3.progress.change(e.total, e.loaded);\n\t                    _this3._session.notify(_this3.progress);\n\t                });\n\t\n\t                return upload;\n\t            }).then(function (response) {\n\t                return _this3.complete(response);\n\t            }, this._session.reject);\n\t\n\t            return true;\n\t        }\n\t    }, {\n\t        key: 'complete',\n\t        value: function complete(response) {\n\t            if (this.status !== Status.PROGRESS) return;\n\t\n\t            var flow = undefined;\n\t            while (flow = this._flows.shift()) {\n\t                flow.abort();\n\t            }\n\t\n\t            this.progress.done();\n\t            this._session.notify(this.progress);\n\t\n\t            response = this.request.createFileResponse(response);\n\t\n\t            this.setStatus(Status.END);\n\t            this.emit(Events.FILE_UPLOAD_END);\n\t\n\t            var ret = this.core.invoke(Events.FILE_UPLOAD_COMPLETING, response);\n\t\n\t            this._flows.push(ret);\n\t\n\t            ret.then(this._session.resolve, this._session.reject);\n\t        }\n\t    }, {\n\t        key: 'pending',\n\t        value: function pending() {\n\t            if (this.status === Status.ERROR || this.status === Status.QUEUED) {\n\t                this.progress.change(this.size, 0);\n\t                this.setStatus(Status.PENDING);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort() {\n\t            this._session && this._session.reject();\n\t            this._session = null;\n\t            this._sessionPromise = null;\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel() {\n\t            this.setStatus(Status.CANCELLED);\n\t            this.emit(Events.FILE_CANCEL);\n\t            this.abort();\n\t            this.runtime.cancel(this.source);\n\t            this._dataUrlPromise && this._dataUrlPromise.abort();\n\t            this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n\t            this.removeAllListeners();\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this.cancel();\n\t        }\n\t    }]);\n\t\n\t    return File;\n\t})(Emitter);\n\t\n\tmodule.exports = File;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Emitter = __webpack_require__(2);\n\tvar Runtime = __webpack_require__(9);\n\tvar File = __webpack_require__(12);\n\t\n\tvar PasteCollector = (function () {\n\t    function PasteCollector(core) {\n\t        _classCallCheck(this, PasteCollector);\n\t\n\t        this.core = core;\n\t        this.runtime = Runtime.getInstance();\n\t    }\n\t\n\t    _createClass(PasteCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            var core = this.core,\n\t                runtime = this.runtime,\n\t                emitter = new Emitter();\n\t\n\t            var paste = function paste(e) {\n\t\n\t                var clipboardData = e.clipboardData || window.clipboardData,\n\t                    items = clipboardData.items,\n\t                    files = clipboardData.files;\n\t\n\t                if (!files && !items) {\n\t                    return;\n\t                }\n\t\n\t                var prevent = undefined,\n\t                    i = undefined,\n\t                    l = undefined,\n\t                    file = undefined,\n\t                    item = undefined,\n\t                    addRet = undefined;\n\t\n\t                if (files && files.length) {\n\t                    // safari has files\n\t                    prevent = files.length > 0;\n\t                    for (i = 0, l = files.length; i < l; i++) {\n\t                        file = new File(runtime, files[i]);\n\t\n\t                        prevent = 1;\n\t\n\t                        addRet = core.add(file);\n\t                        if (addRet < 0 || addRet > 0 && !core.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                } else if (items && items.length) {\n\t                    // chrome has items\n\t                    var filename = clipboardData.getData('text/plain');\n\t                    for (i = 0, l = items.length; i < l && !core.isLimit(); i++) {\n\t                        item = items[i];\n\t\n\t                        if (item.kind !== 'file' || !(file = item.getAsFile())) {\n\t                            continue;\n\t                        }\n\t\n\t                        file = new File(runtime, file, filename);\n\t                        filename = null;\n\t\n\t                        prevent = 1;\n\t\n\t                        addRet = core.add(file);\n\t                        if (addRet < 0 || addRet > 0 && !core.isMultiple()) {\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                if (prevent) {\n\t                    e.preventDefault();\n\t                    e.stopPropagation();\n\t                    emitter.emit('paste', clipboardData);\n\t                }\n\t            };\n\t\n\t            if ('DataTransfer' in window && 'FileList' in window && area.addEventListener) {\n\t                area.addEventListener('paste', paste, false);\n\t            }\n\t\n\t            emitter.destroy = function () {\n\t                emitter.removeAllListeners();\n\t                if (area.removeEventListener) {\n\t                    area.removeEventListener('paste', paste, false);\n\t                }\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return PasteCollector;\n\t})();\n\t\n\tmodule.exports = PasteCollector;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Emitter = __webpack_require__(2);\n\tvar Html5Runtime = __webpack_require__(9);\n\tvar FlashRuntime = __webpack_require__(15);\n\tvar File = __webpack_require__(12);\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar extend = _require.extend;\n\t\n\tvar SWF_URL = '';\n\t\n\tvar createElement = (function () {\n\t    var div = document.createElement('div');\n\t    return function (html) {\n\t        div.innerHTML = html;\n\t        html = div.firstChild;\n\t        div.removeChild(html);\n\t        return html;\n\t    };\n\t})();\n\t\n\tvar FlashTriggerCollection = (function () {\n\t    function FlashTriggerCollection(core, onFiles) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, FlashTriggerCollection);\n\t\n\t        var overlay = createElement('<label style=\"position:fixed;left:-100px;top:-100px;width:50px;height:50px;display:block;cursor:pointer;overflow:hidden;z-index:99999;opacity:0;filter:alpha(opacity=0)\"></label>');\n\t\n\t        var runtime = new FlashRuntime(overlay, SWF_URL, function () {\n\t            return {\n\t                accept: core.getAccept(),\n\t                multiple: core.isMultiple()\n\t            };\n\t        });\n\t\n\t        runtime.on('select', function (e) {\n\t            onFiles(e.files, runtime);\n\t            _this.current && _this.current.emit('files', e.files, runtime);\n\t        });\n\t\n\t        runtime.on('rollOut', function () {\n\t            return _this.hideOverlay();\n\t        });\n\t\n\t        document.body.appendChild(overlay);\n\t        this.overlay = overlay;\n\t    }\n\t\n\t    _createClass(FlashTriggerCollection, [{\n\t        key: 'hideOverlay',\n\t        value: function hideOverlay() {\n\t            extend(this.overlay.style, {\n\t                left: '-100px',\n\t                top: '-100px',\n\t                width: '50px',\n\t                height: '50px'\n\t            });\n\t            if (this.current) {\n\t                this.current.emit('rollOut');\n\t                this.current = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            var _this2 = this;\n\t\n\t            var overlay = this.overlay,\n\t                emitter = new Emitter();\n\t            var mouseover = function mouseover() {\n\t                var rect = trigger.getBoundingClientRect();\n\t                extend(overlay.style, {\n\t                    left: rect.left + 'px',\n\t                    top: rect.top + 'px',\n\t                    width: rect.right - rect.left + 'px',\n\t                    height: rect.bottom - rect.top + 'px'\n\t                });\n\t                emitter.emit('rollOver');\n\t                if (_this2.current && _this2.current !== emitter) {\n\t                    _this2.current.emit('rollOut');\n\t                }\n\t                _this2.current = emitter;\n\t            };\n\t\n\t            if (trigger.addEventListener) {\n\t                trigger.addEventListener('mouseover', mouseover, false);\n\t            } else if (trigger.attachEvent) {\n\t                trigger.attachEvent(\"onmouseover\", mouseover);\n\t            }\n\t\n\t            emitter.destroy = function () {\n\t                if (_this2.current === emitter) {\n\t                    _this2.hideOverlay();\n\t                }\n\t                emitter.removeAllListeners();\n\t                if (trigger.removeEventListener) {\n\t                    trigger.removeEventListener('mouseover', mouseover, false);\n\t                } else if (trigger.detachEvent) {\n\t                    trigger.detachEvent(\"onmouseover\", mouseover);\n\t                }\n\t            };\n\t\n\t            return emitter;\n\t        }\n\t    }]);\n\t\n\t    return FlashTriggerCollection;\n\t})();\n\t\n\tvar Html5Trigger = (function (_Emitter) {\n\t    _inherits(Html5Trigger, _Emitter);\n\t\n\t    function Html5Trigger(trigger, core, onFiles) {\n\t        _classCallCheck(this, Html5Trigger);\n\t\n\t        var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(Html5Trigger).call(this));\n\t\n\t        _this3.trigger = trigger;\n\t        _this3.core = core;\n\t        _this3.label = createElement('<label style=\"position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;cursor:pointer;background:#fff;overflow:hidden;opacity:0\"></label>');\n\t\n\t        _this3.onChange = function (e) {\n\t            onFiles(e.target.files);\n\t            _this3.destroyInput();\n\t            _this3.createInput();\n\t        };\n\t        trigger.appendChild(_this3.label);\n\t        _this3.createInput();\n\t        return _this3;\n\t    }\n\t\n\t    _createClass(Html5Trigger, [{\n\t        key: 'createInput',\n\t        value: function createInput() {\n\t            var input = createElement('<input type=\"file\" style=\"position:absolute;clip:rect(1px 1px 1px 1px);\" />');\n\t\n\t            var accept = this.core.getAccept();\n\t            if (accept && accept.length > 0) {\n\t                accept = accept.map(function (item) {\n\t                    return item.mimeTypes || '.' + item.extensions.join(',.');\n\t                });\n\t\n\t                input.setAttribute('accept', accept.join(','));\n\t            }\n\t            if (this.core.isMultiple()) {\n\t                input.setAttribute('multiple', 'multiple');\n\t            }\n\t\n\t            input.addEventListener('change', this.onChange, false);\n\t\n\t            this.label.appendChild(input);\n\t            this.input = input;\n\t        }\n\t    }, {\n\t        key: 'destroyInput',\n\t        value: function destroyInput() {\n\t            if (!this.input) return;\n\t            this.input.removeEventListener('change', this.onChange, false);\n\t            this.label.removeChild(this.input);\n\t            this.input = null;\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            this.destroyInput();\n\t            this.removeAllListeners();\n\t            this.trigger.removeChild(this.label);\n\t        }\n\t    }]);\n\t\n\t    return Html5Trigger;\n\t})(Emitter);\n\t\n\tvar Html5TriggerCollection = (function () {\n\t    function Html5TriggerCollection(core, onFiles) {\n\t        _classCallCheck(this, Html5TriggerCollection);\n\t\n\t        var runtime = Html5Runtime.getInstance();\n\t        this.core = core;\n\t        this.onFiles = function (files) {\n\t            onFiles(files, runtime);\n\t        };\n\t    }\n\t\n\t    _createClass(Html5TriggerCollection, [{\n\t        key: 'add',\n\t        value: function add(trigger) {\n\t            return new Html5Trigger(trigger, this.core, this.onFiles);\n\t        }\n\t    }]);\n\t\n\t    return Html5TriggerCollection;\n\t})();\n\t\n\tvar PickerCollector = (function () {\n\t    _createClass(PickerCollector, null, [{\n\t        key: 'setSWF',\n\t        value: function setSWF(url) {\n\t            SWF_URL = url;\n\t        }\n\t    }]);\n\t\n\t    function PickerCollector(core) {\n\t        _classCallCheck(this, PickerCollector);\n\t\n\t        var onFiles = function onFiles(files, runtime) {\n\t            for (var i = 0, l = files.length; i < l; i++) {\n\t                if (core.add(new File(runtime, files[i])) < 0) {\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t\n\t        if ('DataTransfer' in window && 'FileList' in window) {\n\t            this.triggerCollection = new Html5TriggerCollection(core, onFiles);\n\t        } else {\n\t            this.triggerCollection = new FlashTriggerCollection(core, onFiles);\n\t        }\n\t    }\n\t\n\t    _createClass(PickerCollector, [{\n\t        key: 'addArea',\n\t        value: function addArea(area) {\n\t            return this.triggerCollection.add(area);\n\t        }\n\t    }]);\n\t\n\t    return PickerCollector;\n\t})();\n\t\n\tmodule.exports = PickerCollector;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Runtime = __webpack_require__(10);\n\tvar Transport = __webpack_require__(16);\n\t\n\tfunction getFlashVersion() {\n\t    var version = undefined;\n\t\n\t    try {\n\t        version = navigator.plugins['Shockwave Flash'];\n\t        version = version.description;\n\t    } catch (e1) {\n\t        try {\n\t            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n\t        } catch (e2) {\n\t            version = '0.0';\n\t        }\n\t    }\n\t    version = version.match(/\\d+/g);\n\t    return parseFloat(version[0] + '.' + version[1]);\n\t}\n\t\n\tfunction callFlash(movie, functionName, argumentArray) {\n\t    try {\n\t        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n\t    } catch (ex) {\n\t        throw \"Call to \" + functionName + \" failed\";\n\t    }\n\t}\n\t\n\tfunction createFlash(swf, callInterface) {\n\t    if (getFlashVersion() < 11.4) {\n\t        throw 'flash player is not available';\n\t    }\n\t    var div = document.createElement('div');\n\t    var url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n\t    var attrs = ['id=\"' + callInterface + '-Picker\"', 'type=\"application/x-shockwave-flash\"', 'data=\"' + url + '\"', 'width=\"100%\" height=\"100%\"', 'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'];\n\t    if (window.ActiveXObject) {\n\t        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n\t    }\n\t    div.innerHTML = '<object ' + attrs.join(' ') + '>' + '<param name=\"movie\" value=\"' + url + '\" />' + '<param name=\"wmode\" value=\"transparent\" />' + '<param name=\"allowscriptaccess\" value=\"always\" />' + '</object>';\n\t\n\t    return div.firstChild;\n\t}\n\t\n\tvar _guid = +new Date();\n\tfunction guid(prefix) {\n\t    var ret = prefix + (_guid++).toString(16);\n\t    if (ret in window) {\n\t        return guid(prefix);\n\t    }\n\t    return ret;\n\t}\n\t\n\tvar FlashRuntime = (function (_Runtime) {\n\t    _inherits(FlashRuntime, _Runtime);\n\t\n\t    function FlashRuntime(trigger, swf, options) {\n\t        _classCallCheck(this, FlashRuntime);\n\t\n\t        var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(FlashRuntime).call(this));\n\t\n\t        var callInterface = guid('FlashRuntime');\n\t\n\t        _this2.callInterface = callInterface;\n\t        window[callInterface] = _this2;\n\t\n\t        _this2.options = options;\n\t\n\t        var _this = _this2;\n\t        function display() {\n\t            var w = trigger.offsetWidth,\n\t                h = trigger.offsetHeight,\n\t                flash = undefined;\n\t            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n\t                setTimeout(display, 1000);\n\t                return;\n\t            }\n\t\n\t            trigger.appendChild(_this.flash = flash);\n\t        }\n\t\n\t        display();\n\t        return _this2;\n\t    }\n\t\n\t    _createClass(FlashRuntime, [{\n\t        key: 'getOptions',\n\t        value: function getOptions() {\n\t            var options = this.options;\n\t            if (typeof options === 'function') {\n\t                options = options();\n\t            }\n\t            return options;\n\t        }\n\t    }, {\n\t        key: 'getTransport',\n\t        value: function getTransport(name, blob, options) {\n\t            return new Transport(this, name, blob, options);\n\t        }\n\t    }, {\n\t        key: 'send',\n\t        value: function send(name, blob, url, params) {\n\t            callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n\t        }\n\t    }, {\n\t        key: 'abort',\n\t        value: function abort(blob) {\n\t            try {\n\t                callFlash(this.flash, 'exec', ['abort', blob.id]);\n\t            } catch (e) {}\n\t        }\n\t    }, {\n\t        key: 'cancel',\n\t        value: function cancel(blob) {\n\t            callFlash(this.flash, 'exec', ['cancel', blob.id]);\n\t        }\n\t    }, {\n\t        key: 'ping',\n\t        value: function ping() {\n\t            callFlash(this.flash, 'exec', ['pang']);\n\t        }\n\t    }, {\n\t        key: 'destroy',\n\t        value: function destroy() {\n\t            delete window[this.callInterface];\n\t        }\n\t    }]);\n\t\n\t    return FlashRuntime;\n\t})(Runtime);\n\t\n\tmodule.exports = FlashRuntime;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar _require = __webpack_require__(3);\n\t\n\tvar Deferred = _require.Deferred;\n\t\n\tvar _require2 = __webpack_require__(6);\n\t\n\tvar TimeoutError = _require2.TimeoutError;\n\tvar AbortError = _require2.AbortError;\n\tvar NetworkError = _require2.NetworkError;\n\t\n\tvar FlashTransport = (function () {\n\t    function FlashTransport(flashRuntime) {\n\t        _classCallCheck(this, FlashTransport);\n\t\n\t        this.flashRuntime = flashRuntime;\n\t    }\n\t\n\t    /**\n\t     * @param {ChunkRequest} request\n\t     * @returns {*}\n\t     */\n\t\n\t    _createClass(FlashTransport, [{\n\t        key: 'generate',\n\t        value: function generate(request) {\n\t            var i = Deferred(),\n\t                flashRuntime = this.flashRuntime,\n\t                blob = request.getBlob();\n\t\n\t            var timeoutTimer = undefined;\n\t\n\t            var clean = function clean() {\n\t                flashRuntime.off('uploadprogress', progress);\n\t                flashRuntime.off('uploadcomplete', complete);\n\t                flashRuntime.off('uploaderror', error);\n\t                if (timeoutTimer) {\n\t                    clearTimeout(timeoutTimer);\n\t                }\n\t            };\n\t            var abort = function abort() {\n\t                clean();\n\t                flashRuntime.abort(blob.id);\n\t            };\n\t\n\t            var progress = function progress(e) {\n\t                if (e.id !== blob.id) return;\n\t                i.notify(e);\n\t            };\n\t\n\t            var complete = function complete(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                if (e.status === 304 || e.status >= 200 && e.status < 300) {\n\t                    flashRuntime.cancel(blob);\n\t                    return i.resolve(e.response);\n\t                }\n\t                return i.reject(new NetworkError(e.status, e.response));\n\t            };\n\t\n\t            var error = function error(e) {\n\t                if (e.id !== blob.id) return;\n\t                clean();\n\t                i.reject(new AbortError(e.message));\n\t            };\n\t            flashRuntime.on('uploadprogress', progress);\n\t            flashRuntime.on('uploadcomplete', complete);\n\t            flashRuntime.on('uploaderror', error);\n\t\n\t            // Timeout\n\t            var timeout = request.getTimeout();\n\t            if (timeout > 0) {\n\t                timeoutTimer = setTimeout(function () {\n\t                    abort();\n\t                    i.reject(new TimeoutError('timeout:' + timeout));\n\t                }, timeout);\n\t            }\n\t\n\t            try {\n\t                flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n\t            } catch (e) {\n\t                abort();\n\t                i.reject(new AbortError(e.message));\n\t            }\n\t\n\t            var ret = i.promise();\n\t            ret.abort = abort;\n\t\n\t            return ret;\n\t        }\n\t    }]);\n\t\n\t    return FlashTransport;\n\t})();\n\t\n\tmodule.exports = FlashTransport;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** uploadcore.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7d94c36ef60170c0d84b\n **/","const Core = require('./core');\nconst Events = require('./events');\nconst {Status} = require('./status');\n\nCore.Events = Events;\nCore.Status = Status;\nCore.UploadCore = Core;\nCore.VERSION = VERSION;\nCore.Core = Core;\n\nmodule.exports = Core;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","const Emitter = require('./emitter');\nconst Events = require('./events');\nconst {Status} = require('./status');\nconst {QueueLimitError, FilterError, DuplicateError, FileExtensionError, FileSizeError} = require('./errors');\nconst {formatSize, parseSize, normalizeAccept} = require('./util');\nconst FileRequest = require('./filerequest');\nconst DndCollector = require('./collector/dnd');\nconst PasteCollector = require('./collector/paste');\nconst PickerCollector = require('./collector/picker');\n\nconst REQUEST_OPTIONS = ['name', 'url', 'params', 'action', 'data', 'headers', 'withCredentials', 'timeout', 'chunkEnable', 'chunkSize', 'chunkRetries', 'chunkProcessThreads'];\n\nclass Core extends Emitter {\n\n    constructor(options = {}) {\n        super();\n\n        this.autoPending = options.autoPending || options.auto;\n        this.capcity = options.capcity || options.queueCapcity || 0;\n        this.multiple = options.multiple == null ? true : options.multiple;\n\n        this.accept = normalizeAccept(options.accept);\n        this.sizeLimit = parseSize(options.sizeLimit || options.fileSizeLimit || 0);\n\n        this.pending = new Pending(options.processThreads);\n        this.stat = new Stat;\n        this.constraints = new Constraints;\n        this.filters = new Filters;\n\n        if (!this.multiple) {\n            this.capcity = 1;\n        }\n        if (this.capcity > 0) {\n            this.addConstraint(() => this.stat.getTotal() >= this.capcity);\n        }\n\n        if (this.accept && this.accept.length > 0) {\n            this.addFilter((file) => {\n                if (!this.accept.some((item) => {\n                    return item.extensions && item.extensions.indexOf(file.ext) > -1\n                }))\n                {\n                    return new FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n                }\n            });\n        }\n\n        if (this.sizeLimit > 0) {\n            this.addFilter((file) => {\n                if (file.size > this.sizeLimit) {\n                    return new FileSizeError(file, 'filesize:' + formatSize(file.size) + ' is greater than limit:' + formatSize(this.sizeLimit));\n                }\n            });\n        }\n\n        if (options.preventDuplicate) {\n            this.addFilter((file) => {\n                if (this.stat.getFiles().some((item) => item.name === file.name && item.size === file.size)) {\n                    return new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n                }\n            });\n        }\n\n        if (Array.isArray(options.filters)) {\n            options.fitlers.forEach(filter => this.addFilter(filter));\n        }\n\n        const request = options.request || {};\n        REQUEST_OPTIONS.forEach((key) => {\n            if (options.hasOwnProperty(key)) {\n                request[key] = options[key];\n            }\n        });\n\n        this.requestOptions = request;\n    }\n\n    createFileRequest(file) {\n        return new FileRequest(file, this.requestOptions);\n    }\n\n    isLimit() {\n        return this.constraints.some();\n    }\n\n    addConstraint(constraint) {\n        return this.constraints.add(constraint);\n    }\n\n    addFilter(filter) {\n        return this.filters.add(filter);\n    }\n\n    add(file) {\n        if (this.isLimit()) {\n            this.emit(Events.QUEUE_ERROR, new QueueLimitError);\n            return -1;\n        }\n\n        let error = this.filters.filter(file);\n        if (!error && !this.stat.add(file)) {\n            error = new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n        }\n\n        if (error) {\n            this.emit(Events.QUEUE_FILE_FILTERED, file, error);\n            this.emit(Events.QUEUE_ERROR, error);\n            return 0;\n        }\n\n        file.setStatus(Status.QUEUED);\n\n        file.on(Events.FILE_STATUS_CHANGE, (status) => {\n            if (status === Status.CANCELLED) {\n                this.stat.remove(file);\n            } else if (status === Status.PENDING) {\n                setTimeout(() => {\n                    if (this.pending.add(file) && this.pending.size() === 1) {\n                        this.emit(Events.QUEUE_UPLOAD_START);\n                    }\n                }, 1);\n            }\n\n            this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n            if (this.stat.getFiles(Status.PROCESS).length < 1) {\n                this.emit(Events.QUEUE_UPLOAD_END);\n            }\n        });\n\n        file.setCore(this);\n\n        this.emit(Events.QUEUE_FILE_ADDED, file);\n\n        this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n        if (this.autoPending) {\n            file.pending();\n        }\n\n        return 1;\n    }\n\n    isMultiple() {\n        return this.multiple;\n    }\n\n    isFull() {\n        return this.capcity > 0 && this.getTotal() >= this.capcity;\n    }\n\n    isEmpty() {\n        return this.getTotal() < 1;\n    }\n\n    getAccept() {\n        return this.accept;\n    }\n\n    getStat() {\n        return this.stat;\n    }\n\n    getTotal() {\n        return this.getStat().getTotal();\n    }\n\n    getFiles(flag) {\n        return this.getStat().getFiles(flag);\n    }\n\n    stat(flag) {\n        return this.getStat().stat(flag);\n    }\n\n    static setSWF(url) {\n        PickerCollector.setSWF(url);\n    }\n\n    getPickerCollector() {\n        if (!this.picker) {\n            this.picker = new PickerCollector(this);\n        }\n        return this.picker;\n    }\n\n    getDndCollector() {\n        if (!this.dnd) {\n            this.dnd = new DndCollector(this);\n        }\n        return this.dnd;\n    }\n\n    getPasteCollector() {\n        if (!this.paster) {\n            this.paster = new PasteCollector(this);\n        }\n        return this.paster;\n    }\n}\n\nmodule.exports = Core;\n\nclass Set {\n    constructor() {\n        this._set = [];\n    }\n\n    /**\n     * 项目总数\n     *\n     * @returns {Number}\n     */\n    size() {\n        return this._set.length;\n    }\n\n    /**\n     * 从头部取出一项\n     *\n     * @returns {*}\n     */\n    shift() {\n        return this._set.shift();\n    }\n\n    /**\n     * 从尾部取出一项\n     *\n     * @returns {*}\n     */\n    pop() {\n        return this._set.pop();\n    }\n\n    /**\n     * 获得所有项\n     *\n     * @returns {Array}\n     */\n    toArray() {\n        return this._set.slice(0);\n    }\n\n    /**\n     * 添加一项\n     *\n     * @param item\n     * @returns {boolean} success if true\n     */\n    add(item) {\n        if (this.has(item)) {\n            return false;\n        }\n        this._set.push(item);\n        return true;\n    }\n\n    /**\n     * 是否存在该项\n     *\n     * @param item\n     * @returns {boolean}\n     */\n    has(item) {\n        return this._set.indexOf(item) > -1;\n    }\n\n    /**\n     * 删除某项\n     *\n     * @returns {boolean} success if true\n     */\n    remove(item) {\n        var i = this._set.indexOf(item);\n        if (i > -1) {\n            this._set.splice(i, 1);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * 清空\n     */\n    clear() {\n        this._set = [];\n    }\n}\n\nclass Stat {\n    constructor() {\n        this.files = new Set;\n    }\n    add(file) {\n        return this.files.add(file);\n    }\n    remove(file) {\n        this.files.remove(file);\n    }\n    getTotal() {\n        return this.files.size();\n    }\n    getFiles(flag) {\n        var files = this.files.toArray();\n        if (!flag) {\n            return files;\n        }\n        return files.filter((file) => {\n            return !!(file.getStatus() & flag);\n        });\n    }\n    stat(flag) {\n        let ret = {}, files = this.getFiles(flag);\n\n        files.forEach((file) => {\n            let status = file.getStatus();\n            ret[status] = (status in ret) ?  (ret[status] + 1) : 1;\n        });\n\n        ret['sum'] = files.length;\n\n        return ret;\n    }\n}\n\nclass Constraints {\n    constructor() {\n        this.constraints = new Set;\n    }\n\n    add(constraint) {\n        this.constraints.add(constraint);\n        return this;\n    }\n\n    remove(constraint) {\n        this.constraints.remove(constraint);\n        return this;\n    }\n\n    some() {\n        return this.constraints.toArray().some((fn) => fn.call(this));\n    }\n}\n\nclass Filters {\n    constructor() {\n        this.filters = new Set;\n    }\n\n    add(filter) {\n        this.filters.add(filter);\n        return this;\n    }\n\n    remove(filter) {\n        this.filters.remove(filter);\n        return this;\n    }\n\n    filter(file) {\n        let error = null;\n        this.filters.toArray().every((filter) => {\n            let ret;\n            try {\n                ret = filter(file);\n            } catch (e) {\n                ret = e;\n            }\n            if (typeof ret === 'string') {\n                error = new FilterError(file, ret);\n                return false;\n            } else if (ret instanceof Error) {\n                error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n                return false;\n            }\n            return true;\n        });\n        return error;\n    }\n}\n\nclass Pending {\n    constructor(threads) {\n        this.threads = threads || 2;\n        this.heading = new Set;\n        this.pending = new Set;\n    }\n\n    add(file) {\n        if (!this.pending.add(file)) return false;\n\n        file.session().always(() => this.pending.remove(file));\n\n        this.load();\n\n        return true;\n    }\n\n    size() {\n        return this.pending.size() + this.heading.size();\n    }\n\n    process(file) {\n        if (!this.heading.add(file)) return;\n\n        file.session().always(() => {\n            this.heading.remove(file);\n            this.load();\n        });\n    }\n\n    load () {\n        var file;\n        while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n            if (file.prepare()) {\n                this.process(file);\n            }\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core.js\n **/","const {Deferred} = require('./util');\n\nclass Emitter {\n\n    on(event, listener) {\n        event = event.toLowerCase();\n        if (!this._events) {\n            this._events = {};\n        }\n\n        if (!this._events[event]) {\n            this._events[event] = [];\n        }\n\n        this._events[event].push(listener);\n\n        return this;\n    }\n\n    once(event, listener) {\n        event = event.toLowerCase();\n\n        let that = this;\n\n        function fn() {\n            that.off(event, fn);\n            listener.apply(this, arguments);\n        }\n\n        fn.listener = listener;\n\n        this.on(event, fn);\n\n        return this;\n    }\n\n    off(event, listener) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            return this;\n        }\n\n        let i = listeners.length;\n        while (i-- > 0) {\n            if (listeners[i] === listener || listeners[i].listener === listener) {\n                listeners.splice(i, 1);\n                break;\n            }\n        }\n\n        if (listeners.length === 0) {\n            delete this._events[event];\n        }\n\n        return this;\n    }\n\n    removeAllListeners(event) {\n        if (!event) {\n            this._events = [];\n        } else {\n            delete this._events[event.toLowerCase()];\n        }\n\n        return this;\n    }\n\n    setPropagationTarget(emitter) {\n        if (emitter instanceof Emitter) {\n            this.propagationTarget = emitter;\n        }\n    }\n\n    emit(event, ...args) {\n        this.applyEmit(event, args);\n\n        return this;\n    }\n\n    applyEmit(event, args) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (this._events && (listeners = this._events[event])) {\n            listeners.slice(0).forEach(fn => fn.apply(this, args));\n        }\n\n        if (this.propagationTarget) {\n            const pArgs = args.slice(0);\n            pArgs.unshift(this);\n            this.propagationTarget.applyEmit(event, pArgs);\n        }\n\n        return this;\n    }\n\n    invoke(event, data) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            listeners = [];\n        }\n\n        return HookInvoker(listeners.slice(0), data, this);\n    }\n}\n\nmodule.exports = Emitter;\n\nfunction HookInvoker(hooks, initialData, context) {\n    let _data = initialData;\n    let _error = null;\n    let _aborted;\n\n    const i = Deferred();\n    const ret = i.promise();\n\n    ret.abort = () => {\n        _aborted = true;\n    };\n\n    const fail = (e) => {\n        if (_aborted) return;\n        if (e) {\n            _error = e instanceof Error ? e : new Error(e);\n        }\n        i.reject(_error || new Error('Unknown'));\n    };\n\n    const done = () => {\n        if (_aborted) return;\n        if (_error != null) {\n            fail();\n        } else {\n            i.resolve(_data);\n        }\n    };\n\n    const setData = (data) => {\n        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n            _data = data;\n        }\n    };\n\n    const next = (data) => {\n        if (_aborted) return;\n\n        if (data instanceof Error) {\n            _error = data;\n        }\n\n        if (_error != null) {\n            return fail();\n        }\n\n        setData(data);\n\n        const hook = hooks.shift();\n        if (!hook) {\n            return done();\n        }\n        let res;\n        try {\n            res = hook.call(context, _data);\n        } catch (e) {\n            return fail(e);\n        }\n\n        if (res && res.then) {\n            res.then(next, fail);\n        } else {\n            next(res);\n        }\n    };\n\n    setTimeout(next, 1);\n\n    return ret;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/emitter.js\n **/","exports.formatSize = function (size) {\n    size = parseFloat(size);\n    const prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n        base = 1024;\n    let index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n    index = Math.min(index, prefixesSI.length - 1);\n    let powedPrecision = Math.pow(10, index < 2 ? 0 : (index > 2 ? 2 : 1));\n    size = size / Math.pow(base, index);\n    size = Math.round(size * powedPrecision) / powedPrecision;\n    return size + prefixesSI[index] + 'B';\n};\n\nexports.parseSize = function (size) {\n    if (typeof size !== 'string') {\n        return size;\n    }\n\n    const units = {\n        t: 1099511627776,\n        g: 1073741824,\n        m: 1048576,\n        k: 1024\n    };\n\n    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n    const u = size[2];\n    size = +size[1];\n\n    if (units.hasOwnProperty(u)) {\n        size *= units[u];\n    }\n    return size;\n};\n\nconst ACCEPTs = {\n    images: {\n        title: 'Images',\n        extensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'svg', 'tiff', 'tif', 'ico', 'jpe', 'svgz', 'pct', 'psp', 'ai', 'psd', 'raw', 'webp']\n    },\n\n    audios: {\n        title: 'Audios',\n        extensions: ['aac', 'aif', 'flac', 'iff', 'm4a', 'm4b', 'mid', 'midi', 'mp3', 'mpa', 'mpc', 'oga', 'ogg', 'ra', 'ram', 'snd', 'wav', 'wma']\n    },\n\n    videos: {\n        title: 'Videos',\n        extensions: ['avi', 'divx', 'flv', 'm4v', 'mkv', 'mov', 'mp4', 'mpeg', 'mpg', 'ogm', 'ogv', 'ogx', 'rm', 'rmvb', 'smil', 'webm', 'wmv', 'xvid']\n    }\n};\n\nfunction normalizeExtensions(extensions) {\n    if (typeof extensions !== 'string') {\n        return '';\n    }\n\n    return extensions.toLowerCase().split(/ *[ ,;|+] */).map((ext) => {\n        let m = /^\\*?\\.?(\\w+)$/.exec(ext);\n        return m ? m[1] : null;\n    }).filter(ext => ext !== null);\n}\n\nfunction normalizeAccept(accepts) {\n    if (!accepts) return null;\n\n    if (!Array.isArray(accepts)) {\n        accepts = [accepts];\n    }\n\n    return accepts.map((accept) => {\n        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n            return ACCEPTs[accept];\n        } else {\n            let extensions = normalizeExtensions(accept.extensions || accept);\n\n            return extensions.length ? {\n                title: accept.title || '',\n                extensions: extensions,\n                mimeTypes: accept.mimeTypes || ''\n            } : null;\n        }\n    }).filter(accept => accept !== null);\n}\n\nexports.normalizeAccept = normalizeAccept;\n\n    function createOptions(option) {\n    const options = {};\n    (option.match(/\\S+/g) || []).forEach((flag) => {\n        options[flag] = true;\n    });\n    return options;\n}\n\nfunction extend(target, source) {\n    for (let key in source) {\n        target[key] = source[key];\n    }\n    return target;\n}\n\nexports.extend = extend;\n\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\n\nconst ArrayFrom = Array.from || function (arrayLike) {\n    return [].slice.call(arrayLike);\n};\n\nfunction Callbacks(options) {\n    options = typeof options === \"string\"\n        ? createOptions(options)\n        : extend({}, options);\n\n    let firing, memory, fired, firingLength, firingIndex, firingStart,\n        list = [], _this,\n        stack = !options.once && [];\n\n    function fire(data) {\n        memory = options.memory && data;\n        fired = true;\n        firingIndex = firingStart || 0;\n        firingStart = 0;\n        firingLength = list.length;\n        firing = true;\n        for (; list && firingIndex < firingLength; firingIndex++) {\n            if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {\n                memory = false; // To prevent further calls using add\n                break;\n            }\n        }\n        firing = false;\n        if (list) {\n            if (stack) {\n                if (stack.length) {\n                    fire(stack.shift());\n                }\n            } else if (memory) {\n                list = [];\n            } else {\n                _this.disable();\n            }\n        }\n    }\n\n    _this = {\n        add() {\n            if (list) {\n                let start = list.length;\n\n                (function add(args) {\n                    args.forEach((fn) => {\n                        if (isFunction(fn)) {\n                            if (!options.unique || !_this.has(fn)) {\n                                list.push(fn);\n                            }\n                        } else if (Array.isArray(fn)) {\n                            add(fn);\n                        }\n                    });\n                })(ArrayFrom(arguments));\n\n                if (firing) {\n                    firingLength = list.length;\n                } else if (memory) {\n                    firingStart = start;\n                    fire(memory);\n                }\n            }\n            return this;\n        },\n\n        remove() {\n            if (list) {\n                ArrayFrom(arguments).forEach((fn) => {\n                    let i = list.length;\n                    while (--i >= 0) {\n                        if (list[i] !== fn) continue;\n\n                        list.splice(i, 1);\n\n                        if (firing) {\n                            if (i <= firingLength) {\n                                firingLength--;\n                            }\n                            if (i <= firingIndex) {\n                                firingIndex--;\n                            }\n                        }\n                    }\n                });\n            }\n            return this;\n        },\n\n        has(fn) {\n            return fn ? list.indexOf(fn) > -1 : !!(list && list.length);\n        },\n\n        empty() {\n            list = [];\n            firingLength = 0;\n            return this;\n        },\n\n        disable() {\n            list = stack = memory = null;\n            return this;\n        },\n\n        disabled() {\n            return !list;\n        },\n\n        lock() {\n            stack = null;\n            if (!memory) {\n                _this.disable();\n            }\n            return this;\n        },\n\n        locked() {\n            return !stack;\n        },\n\n        fireWith(context, args) {\n            if (list && (!fired || stack)) {\n                args = args || [];\n                args = [context, args.slice ? args.slice() : args];\n                if (firing) {\n                    stack.push(args);\n                } else {\n                    fire(args);\n                }\n            }\n            return this;\n        },\n\n        fire() {\n            _this.fireWith(this, arguments);\n            return this;\n        },\n\n        fired() {\n            return !!fired;\n        }\n    };\n\n    return _this;\n};\n\nfunction Deferred(func) {\n    let tuples = [\n        [\"resolve\", \"done\", Callbacks(\"once memory\"), \"resolved\"],\n        [\"reject\", \"fail\", Callbacks(\"once memory\"), \"rejected\"],\n        [\"notify\", \"progress\", Callbacks(\"memory\")]\n    ],\n    state = \"pending\", deferred = {},\n    promise = {\n        state() {\n            return state;\n        },\n\n        always() {\n            const args = ArrayFrom(arguments);\n            deferred.done(args).fail(args);\n            return this;\n        },\n\n        then(/* fnDone, fnFail, fnProgress */) {\n            let fns = arguments;\n            return Deferred((newDefer) => {\n                tuples.forEach((tuple, i) => {\n                    let fn = isFunction(fns[i]) && fns[i];\n                    deferred[tuple[1]](function () {\n                        const returned = fn && fn.apply(this, arguments);\n                        if (returned && isFunction(returned.promise)) {\n                            returned.promise()\n                                .done(newDefer.resolve)\n                                .fail(newDefer.reject)\n                                .progress(newDefer.notify);\n                        } else {\n                            newDefer[tuple[0] + \"With\"](\n                                this === promise ? newDefer.promise() : this,\n                                fn ? [returned] : arguments\n                            );\n                        }\n                    });\n                });\n                fns = null;\n            }).promise();\n        },\n\n        promise(obj) {\n            return obj != null ? extend(obj, promise) : promise;\n        }\n    };\n\n    promise.pipe = promise.then;\n\n    tuples.forEach((tuple, i) => {\n        let list = tuple[2],\n            stateString = tuple[3];\n\n        promise[tuple[1]] = list.add;\n\n        if (stateString) {\n            list.add(\n                () => { state = stateString; },\n                tuples[i^1][2].disable,\n                tuples[2][2].lock\n            );\n        }\n\n        deferred[tuple[0]] = function () {\n            deferred[tuple[0] + \"With\"](this === deferred ? promise : this, arguments);\n            return this;\n        };\n\n        deferred[tuple[0] + \"With\"] = list.fireWith;\n    });\n\n    promise.promise(deferred);\n\n    if (func) {\n        func.call(deferred, deferred);\n    }\n\n    return deferred;\n}\n\nexports.Deferred = Deferred;\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","module.exports = {\n    QUEUE_UPLOAD_START: 'queueuploadstart', // 队列上传开始\n    QUEUE_UPLOAD_END: 'queueuploadend', // 队列上传结束\n    QUEUE_FILE_ADDED: 'queuefileadded', // 队列添加了一个文件\n    QUEUE_FILE_FILTERED: 'queuefilefiltered', // 队列过滤了一个文件\n    QUEUE_ERROR: 'queueerror', // 队列错误\n    QUEUE_STAT_CHANGE: 'statchange', // 统计发生变化\n\n    FILE_UPLOAD_START: 'fileuploadstart', // 文件上传开始\n    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // 文件上传准备时\n    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // 文件上传准备好了\n    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // 分块上传准备时\n    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // 分块上传结束时\n    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // 文件上传进度中\n    FILE_UPLOAD_END: 'fileuploadend', // 文件上传结束\n    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // 文件上传结束时\n    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // 文件上传成功\n    FILE_UPLOAD_ERROR: 'fileuploaderror', // 文件上传失败\n    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // 文件上传完成了\n\n    FILE_CANCEL: 'filecancel', // 文件退出\n    FILE_STATUS_CHANGE: 'filestatuschange' // 文件状态发生变化\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","exports.Status = {\n    ALL: 255, // 所有状态\n\n    PROCESS: 31, // INITED -> END\n    INITED: 1, // 初始状态\n    QUEUED: 2, // 进入队列\n    PENDING: 4, // 队列中等待\n    PROGRESS: 8, // 上传中\n    END: 16, // 上传完成, 等待后续处理\n\n    SUCCESS: 32,  // 上传成功\n    ERROR: 64, // 上传出错\n    CANCELLED: 128  // 上传取消 和 queued 相反, 退出队列\n};\n\nexports.StatusName = {\n    1: 'inited',\n    2: 'queued',\n    4: 'pending',\n    8: 'progress',\n    16: 'end',\n    32: 'success',\n    64: 'error',\n    128: 'cancelled'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/status.js\n **/","class _Error extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n    }\n}\n\nclass AbortError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'AbortError';\n    }\n}\n\nclass TimeoutError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'TimeoutError';\n    }\n}\n\nclass NetworkError extends _Error {\n    constructor(status, message) {\n        super(message);\n        this.name = 'NetworkError';\n        this.status = status;\n    }\n}\n\nclass QueueLimitError extends _Error {\n    constructor() {\n        super('queue limit');\n        this.name = 'QueueLimitError';\n    }\n}\n\nclass FilterError extends _Error {\n    constructor(file, message) {\n        super(message);\n        this.name = 'FilterError';\n        this.file = file;\n    }\n}\n\nclass DuplicateError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'DuplicateError';\n    }\n}\n\nclass FileExtensionError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileExtensionError';\n    }\n}\n\nclass FileSizeError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileSizeError';\n    }\n}\n\n\nmodule.exports = {AbortError, TimeoutError, NetworkError,\n    QueueLimitError, FilterError, DuplicateError, FileExtensionError, FileSizeError};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors.js\n **/","const {parseSize} = require('./util');\n\nclass ChunkResponse {\n    /**\n     * @param {string|null} rawResponse\n     * @param {ChunkRequest} chunkRequest\n     */\n    constructor(rawResponse, chunkRequest) {\n        this.rawResponse = rawResponse;\n        this.chunkRequest = chunkRequest;\n    }\n\n    getChunkRequest() {\n        return this.chunkRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        return this.response || this.rawResponse;\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass ChunkRequest {\n    /**\n     *\n     * @param {int} index\n     * @param {Blob} blob\n     * @param {FileRequest} fileRequest\n     */\n    constructor(index, blob, fileRequest) {\n        this.index = index;\n        this.blob = blob;\n        this.fileRequest = fileRequest;\n    }\n\n    getName() {\n        return this.fileRequest.getName();\n    }\n\n    getFile() {\n        return this.fileRequest.getFile();\n    }\n\n    getBlob() {\n        return this.blob;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    isMultiChunk() {\n        return this.getFile().source !== this.blob;\n    }\n\n    getParams() {\n        if (!this.params) {\n            this.params = this.fileRequest.getParams().clone();\n        }\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.getParams().setParam(name, value);\n\n        return this;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getUrl() {\n        return this.url || this.fileRequest.getUrl();\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getHeaders() {\n        if (!this.headers) {\n            this.headers = this.fileRequest.getHeaders().slice(0);\n        }\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        var headers = this.getHeaders();\n        headers.push({name: name, value: value});\n        return this;\n    }\n\n    isWithCredentials() {\n        return this.fileRequest.isWithCredentials();\n    }\n\n    getTimeout() {\n        return this.fileRequest.getTimeout();\n    }\n\n    createChunkResponse(response) {\n        return new ChunkResponse(response, this);\n    }\n}\n\nclass FileResponse {\n    /**\n     * @param {ChunkResponse|Object|string} rawResponse\n     * @param {FileRequest} fileRequest\n     */\n    constructor(rawResponse, fileRequest) {\n        this.rawResponse = rawResponse;\n        this.fileRequest = fileRequest;\n    }\n\n    isFromMultiChunkResponse() {\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getChunkRequest().isMultiChunk();\n        }\n        return false;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        if (this.response != null) {\n            return this.response;\n        }\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getResponse();\n        } else {\n            return this.rawResponse;\n        }\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass Params {\n    constructor(params) {\n        if (Array.isArray(params)) {\n            this.params = params.slice(0);\n        } else if (typeof params === 'object') {\n            this.params = [];\n            for (let name in params) {\n                if (params.hasOwnProperty(name)) {\n                    this.params.push({name, value: params[name]});\n                }\n            }\n        } else {\n            this.params = [];\n        }\n    }\n\n    setParam(name, value) {\n        this.removeParam(name);\n        this.addParam(name, value);\n    }\n\n    addParam(name, value) {\n        this.params.push({name, value});\n    }\n\n    removeParam(name) {\n        this.params = this.params.filter((param) => param.name !== name);\n    }\n\n    getParam(name, single) {\n        let ret = this.params.filter((param) => param.name === name)\n            .map((param) => param.value);\n\n        if (single) {\n            return ret.shift();\n        }\n\n        return ret;\n    }\n\n    clone() {\n        return new Params(this.params);\n    }\n\n    toArray() {\n        return this.params;\n    }\n\n    toString() {\n        const params = this.params.map((param) => {\n            return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n        });\n\n        return params.join('&'); //.replace( /%20/g, '+');\n    }\n}\n\nconst MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\nclass FileRequest {\n    constructor(file, options = {}) {\n        this.file = file;\n        this.name = options.name || 'file';\n        this.url = options.url || options.action;\n        this.params = new Params(options.params || options.data);\n        this.headers = options.headers || [];\n        this.withCredentials = options.withCredentials;\n        this.timeout = options.timeout || 0;\n        this.chunkSize = options.chunkSize || 0;\n        this.chunkRetries = options.chunkRetries || 0;\n        this.chunkEnable = options.chunkEnable || false;\n        this.chunkProcessThreads = options.chunkProcessThreads || 2;\n    }\n\n    getFile() {\n        return this.file;\n    }\n\n    getUrl() {\n        return this.url || '';\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    setName(name) {\n        this.name = name;\n        return this;\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getParams() {\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.params.setParam(name, value);\n        return this;\n    }\n\n    getHeaders() {\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        this.headers.push({name: name, value: value});\n    }\n\n    isWithCredentials() {\n        return this.withCredentials;\n    }\n\n    setWithCredentials(flag) {\n        this.withCredentials = flag;\n        return this;\n    }\n\n    getTimeout() {\n        return this.timeout;\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n        return this;\n    }\n\n    getChunkSize() {\n        return parseSize(this.chunkSize);\n    }\n\n    setChunkSize(chunkSize) {\n        this.chunkSize = chunkSize;\n        return this;\n    }\n\n    getChunkRetries() {\n        return this.chunkRetries;\n    }\n\n    setChunkRetries(retries) {\n        this.chunkRetries = retries;\n        return 0;\n    }\n\n    isChunkEnable() {\n        const chunkSize = this.getChunkSize();\n        return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE\n            && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n    }\n\n    setChunkEnable(flag) {\n        this.chunkEnable = flag;\n        return this;\n    }\n\n    getChunkProcessThreads() {\n        return this.chunkProcessThreads;\n    }\n\n    setChunkProcessThreads(threads) {\n        this.chunkProcessThreads = threads;\n        return this;\n    }\n\n    createChunkRequest(index, blob) {\n        return new ChunkRequest(index, blob, this);\n    }\n\n    createFileResponse(response) {\n        return new FileResponse(response, this);\n    }\n}\n\nmodule.exports = FileRequest;\n\n\n/** WEBPACK FOOTER **\n ** ./src/filerequest.js\n **/","const Emitter = require('../emitter');\nconst Runtime = require('../html5/runtime');\nconst File = require('../file');\n\nconst MAX_NUM_ONCE = 100;\n\nfunction createReader(collector) {\n    return (dataTransfer, responders) => {\n        const items = dataTransfer.items,\n            files = dataTransfer.files;\n        let item, times = MAX_NUM_ONCE;\n        let _break = false;\n\n        function collect(file) {\n            if (--times < 0 || !collector(file, responders)) {\n                _break = true;\n                return false;\n            }\n            return true;\n        }\n\n        function readEntry(entry) {\n            if (_break) return;\n            if (entry.isFile) {\n                entry.file((file) => {\n                    if (!_break) {\n                        collect(file);\n                    }\n                });\n            } else if (entry.isDirectory) {\n                entry.createReader().readEntries((entries) => {\n                    if (_break) return;\n                    for (let i = 0, l = entries.length; i < l; i++) {\n                        if (_break) break;\n                        readEntry(entries[i]);\n                    }\n                });\n            }\n        }\n\n        for (let i = 0, l = files.length; i < l; i++) {\n            if (_break) break;\n            item = items && items[i];\n\n            let entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\n            if (entry && entry.isDirectory) {\n                readEntry(entry);\n            } else {\n                if (!collect(files[i])) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nclass Area extends Emitter {\n    constructor(area) {\n        super();\n\n        this.areaElement = area;\n    }\n\n    contains(target) {\n        return this.areaElement.contains(target);\n    }\n\n    start(e, allowed) {\n        this.emit('start', e, allowed);\n    }\n\n    response(e, allowed) {\n        allowed = allowed && this.contains(e.target);\n        this.emit('response', e, allowed);\n        return allowed;\n    }\n\n    end(e) {\n        this.emit('end', e);\n    }\n}\n\nconst Collectors = [];\n\nfunction prepare() {\n    if (!('DataTransfer' in window) || !('FileList' in window) || !document.addEventListener) {\n        return;\n    }\n\n    const runtime = Runtime.getInstance();\n\n    let started = 0, enter = 0, endTimer;\n    const dataTransferReader = createReader((file, responders) => {\n        if (!responders || responders.length < 1) {\n            return false;\n        }\n        file = new File(runtime, file);\n        let total = responders.length;\n        return responders.some((responder) => {\n            const ret = responder.recieve(file);\n            if (ret > 0) {\n                return true;\n            }\n            if (ret < 0) {\n                total -= 1;\n            }\n            return false;\n        }) || total > 0;\n    });\n\n    const start = (e) => {\n        started = 1;\n        Collectors.forEach((responder) => responder.start(e));\n    };\n\n    const move = (e) => {\n        const has = Collectors.filter(responder => responder.response(e)).length > 0;\n\n        const dataTransfer = e.dataTransfer;\n\n        if (dataTransfer) {\n            dataTransfer.dropEffect = has ? 'copy' : 'none';\n        }\n        e.preventDefault();\n    };\n\n    const end = (e) => {\n        started = 0;\n        enter = 0;\n        Collectors.forEach((responder) => responder.end(e));\n    };\n\n    const drag = (e) => {\n        clearTimeout(endTimer);\n        let isLeave = e.type === 'dragleave';\n        if (!isLeave && !started) {\n            start(e);\n        }\n        move(e);\n        if (isLeave) {\n            endTimer = setTimeout(() => end(e), 100);\n        }\n    };\n    const drop = (e) => {\n        e.preventDefault();\n\n        clearTimeout(endTimer);\n        end(e);\n\n        const responders = Collectors.filter((responder) => responder.contains(e.target));\n\n        if (responders.length < 1) {\n            return;\n        }\n\n        let dataTransfer = e.dataTransfer;\n\n        try {\n            if (dataTransfer.getData('text/html')) {\n                return;\n            }\n        } catch (ex) {}\n\n        dataTransferReader(dataTransfer, responders);\n    };\n\n    document.addEventListener('dragenter', drag, false);\n    document.addEventListener('dragover', drag, false);\n    document.addEventListener('dragleave', drag, false);\n    document.addEventListener('drop', drop, false);\n}\n\nclass DndCollector {\n\n    constructor(core) {\n        if (Collectors.length < 1) {\n            prepare();\n        }\n        Collectors.push(this);\n\n        this.core = core;\n        this.areas = [];\n    }\n\n    addArea(area) {\n        area = new Area(area);\n        this.areas.push(area);\n        area.destroy = () => {\n            area.removeAllListeners();\n            let i = this.areas.indexOf(area);\n            if (i > -1) {\n                this.areas.splice(i, 1);\n            }\n        };\n\n        return area;\n    }\n\n    contains(target) {\n        return this.areas.some((area) => area.contains(target));\n    }\n\n    start(e) {\n        this.areas.forEach((area) => area.start(e));\n    }\n\n    response(e) {\n        return this.areas.map((area) => area.response(e)).some(r => r !== false);\n    }\n\n    recieve(file) {\n        const ret = this.core.add(file);\n        if (ret > 0 && !this.core.isMultiple()) {\n            return -1;\n        } else {\n            return ret;\n        }\n    }\n\n    end(e) {\n        this.areas.forEach((area) => area.end(e));\n    }\n}\n\nmodule.exports = DndCollector;\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/dnd.js\n **/","const Runtime = require('../runtime');\nconst {Deferred} = require('../util');\nconst Transport = require('./transport');\n\nlet instance;\n\nclass Html5Runtime extends Runtime {\n    static getInstance() {\n        if (!instance) {\n            instance = new Html5Runtime;\n        }\n        return instance;\n    }\n\n    getAsDataUrl(blob, timeout) {\n        let i = Deferred(),\n            fr = new FileReader, timer;\n\n        fr.onloadend = () => {\n            if (fr.readyState == FileReader.DONE) {\n                i.resolve(fr.result);\n            } else {\n                i.reject();\n            }\n            clearTimeout(timer);\n            fr.onloadend = null;\n        };\n        fr.readAsDataURL(blob);\n\n        let abort = () => {\n            fr && fr.abort();\n            fr = null;\n        };\n        if (timeout) {\n            timer = setTimeout(abort, timeout);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    getTransport() {\n        if (!this.transport) {\n            this.transport = new Transport(this);\n        }\n        return this.transport;\n    }\n\n    canSlice() {\n        return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n    }\n\n    slice(blob, start, end) {\n        let blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\n        return blobSlice.call(blob, start, end);\n    }\n\n    md5(blob) {\n        const i = Deferred();\n\n        if (!window.SparkMD5) {\n            i.reject();\n            return i.promise();\n        }\n\n        let chunkSize = 2 * 1024 * 1024,\n            chunks = Math.ceil(blob.size / chunkSize),\n            chunk = 0,\n            spark = new SparkMD5.ArrayBuffer(),\n            blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\n        let fr = new FileReader;\n\n        var loadNext = () => {\n            if (!fr) return;\n            let start, end;\n\n            start = chunk * chunkSize;\n            end = Math.min(start + chunkSize, blob.size);\n\n            fr.onload = () => {\n                spark && spark.append(fr.result);\n            };\n\n            fr.onloadend = () => {\n                if (!fr) return;\n                if (fr.readyState == FileReader.DONE) {\n                    if (++chunk < chunks) {\n                        setTimeout(loadNext, 1);\n                    } else {\n                        setTimeout(() => {\n                            spark && i.resolve(spark.end());\n                            loadNext = blob = spark = null;\n                        }, 50);\n                    }\n                } else {\n                    i.reject();\n                }\n                fr.onloadend = fr.onload = null;\n            };\n\n            fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n        };\n\n        loadNext();\n\n        let ret = i.promise();\n        ret.abort = function () {\n            fr && fr.abort();\n            spark = null;\n            fr = null;\n        };\n\n        return ret;\n    }\n}\n\nmodule.exports = Html5Runtime;\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/runtime.js\n **/","const Emitter = require('./emitter');\nconst Events = require('./events');\nconst {Deferred} = require('./util');\nconst {NetworkError} = require('./errors');\n\nclass Runtime extends Emitter {\n    md5(blob) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getAsDataUrl(file, timeout) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getTransport() {\n        return null;\n    }\n    getUploading() {\n        if (!this.uploading) {\n            this.uploading = new Uploading(this);\n        }\n        return this.uploading;\n    }\n    canSlice() {\n        return false;\n    }\n    slice(blob) {\n        throw new Error('this runtime current not support slice');\n    }\n\n    cancel(blob) {\n\n    }\n}\n\nmodule.exports = Runtime;\n\nclass Uploading {\n    constructor(runtime) {\n        this.runtime = runtime;\n    }\n\n    /**\n     * @param {FileRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(),\n            file = request.getFile(),\n            runtime = this.runtime;\n\n        let source = file.getSource(), size = file.size,\n            chunkSize = request.getChunkSize(),\n            useChunk = request.isChunkEnable(),\n            threads = Math.max(request.getChunkProcessThreads(), 1),\n            start = 0, end = 0, slots = [];\n\n        const getActives = () => {\n            return slots.reduce((sum, slot) => sum + (slot.state() === 'pending' ? 1 : 0), 0);\n        };\n\n        const readChunk = () => {\n            let slot, req, blob;\n            while (end < size && getActives() < threads) {\n                start = end;\n                end = Math.min(end + chunkSize, size);\n                blob = runtime.slice(source, start, end);\n                req = request.createChunkRequest(slots.length, blob);\n                slot = this.slot(req, request.getChunkRetries());\n                slot.progress(progress).done(done).fail(fail);\n                slots.push(slot);\n            }\n        };\n\n        const progress = () => {\n            let total = size - end, loaded = 0;\n            slots.forEach((slot) => {\n                total += slot.total;\n                loaded += slot.loaded;\n            });\n            i.notify({total, loaded});\n        };\n\n        const done = (res) => {\n            useChunk && readChunk();\n\n            if (end >= size && slots.every((slot) => slot.state() === 'resolved')) {\n                i.resolve(res);\n            }\n        };\n\n        const abort = () => {\n            slots.forEach((slot) => slot.abort());\n        };\n\n        const fail = (error) => {\n            i.reject(error);\n            abort();\n        };\n\n        if (useChunk) {\n            readChunk();\n        } else {\n            end = size;\n            let slot = this.slot(request.createChunkRequest(0, source), 0);\n            slot.progress(progress).done(done).fail(fail);\n            slots.push(slot);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    slot(request, retries) {\n        let i = Deferred(),\n            runtime = this.runtime,\n            core = request.getFile().getCore();\n\n        let ret = i.promise();\n\n        const progress = (e) => {\n            if (e.total) {\n                ret.total = e.total;\n            }\n            if (e.loaded) {\n                ret.loaded = e.loaded;\n            }\n            i.notify(e);\n        };\n\n        const process = () => {\n            var prepare, transport, completion;\n            ret.abort = function () {\n                prepare && prepare.abort();\n                transport && transport.abort();\n                completion && completion.abort();\n            };\n            ret.total = request.getBlob().size;\n            ret.loaded = 0;\n\n            prepare = core.invoke(Events.CHUNK_UPLOAD_PREPARING, request);\n\n            prepare.then((request) => {\n                transport = runtime.getTransport().generate(request);\n                transport.progress(progress);\n                return transport;\n            }).then((response) => {\n                completion = core.invoke(Events.CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n                return completion;\n            }).done(i.resolve).fail(error);\n        };\n\n        const error = (e) => {\n            if (e instanceof NetworkError && retries-- > 0) {\n                // retry\n                setTimeout(process, 500);\n            } else {\n                i.reject(e);\n            }\n            ret.abort();\n        };\n\n        process();\n\n        return ret;\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/runtime.js\n **/","const {Deferred} = require('../util');\nconst {TimeoutError, AbortError, NetworkError} = require('../errors');\n\nclass Html5Transport {\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred();\n        const xhr = new XMLHttpRequest;\n\n        let timeoutTimer;\n\n        const clean = () => {\n            xhr.onload = xhr.onerror = null;\n            if (xhr.upload) {\n                xhr.upload.onprogress = null;\n            }\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n\n        const abort = () => {\n            clean();\n            try {\n                xhr.abort();\n            } catch (e) {}\n        };\n\n        const complete = (e) => {\n            clean();\n            if (!xhr.status && e.type === 'error') {\n                return i.reject(new AbortError(e.message));\n            }\n            if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n                return i.resolve(xhr.responseText);\n            }\n            return i.reject(new NetworkError(xhr.status, xhr.statusText));\n        };\n\n        if (xhr.upload) {\n            xhr.upload.onprogress = (e) => i.notify(e);\n        }\n        xhr.onerror = complete;\n        xhr.onload = complete;\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            xhr.open('POST', request.getUrl(), true);\n            if (request.isWithCredentials()) {\n                xhr.withCredentials = true;\n            }\n\n            request.getHeaders().forEach((header) => xhr.setRequestHeader(header.name, header.value));\n\n            const formData = new FormData, blob = request.getBlob();\n\n            request.getParams().toArray().forEach((param) => formData.append(param.name, param.value));\n\n            formData.append(request.getName(), blob, blob.name || 'blob');\n\n            xhr.send(formData);\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\nmodule.exports = Html5Transport;\n\n\n/** WEBPACK FOOTER **\n ** ./src/html5/transport.js\n **/","const Emitter = require('./emitter');\nconst Events = require('./events');\nconst {Deferred} = require('./util');\nconst {Status, StatusName} = require('./status');\n\nlet uid = 0;\nfunction guid() {\n    return 'FILE-' + (uid++).toString(16).toUpperCase();\n}\n\nconst RE_EXT = /\\.([^.]+)$/, RE_IMAGE = /^image\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\nfunction guessExt(blob) {\n    let m = blob.name && RE_EXT.exec(blob.name);\n    if (m) {\n        return m[1];\n    }\n    m = blob.type && RE_IMAGE.exec(blob.type);\n    if (m) {\n        return m[1];\n    }\n    return '';\n}\n\nfunction guessType(ext) {\n    if (['jpg','jpeg','png','gif','bmp','webp'].indexOf(ext.toLowerCase()) > -1) {\n        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n    }\n    return null;\n}\n\nclass Progress {\n    constructor(total, loaded) {\n        this.change(total, loaded);\n    }\n\n    change(total, loaded) {\n        this.total = total;\n        this.loaded = loaded || 0;\n        this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100)\n    }\n\n    done() {\n        this.change(this.total, this.total);\n    }\n}\n\nclass File extends Emitter {\n    constructor(runtime, source, filename) {\n        super();\n\n        this.id = guid();\n\n        this.name = source.name || filename || this.id;\n\n        var ext = guessExt(source).toLowerCase();\n\n        if (ext && !RE_EXT.test(this.name)) {\n            this.name += '.' + ext;\n        }\n\n        this.ext = ext;\n\n        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\n        this.lastModified = source.lastModified || (+new Date);\n\n        this.size = source.size || 0;\n\n        this.runtime = runtime;\n\n        this.source = source;\n\n        this.status = Status.INITED;\n\n        this.progress = new Progress(this.size, 0);\n    }\n\n    getCore() {\n        return this.core;\n    }\n\n    setCore(core) {\n        this.core = core;\n        this.setPropagationTarget(core);\n    }\n\n    getRuntime() {\n        return this.runtime;\n    }\n\n    isImage() {\n        return RE_IMAGE.test(this.type);\n    }\n\n    setStatus(status) {\n        let prevStatus = this.status;\n\n        if (prevStatus !== Status.CANCELLED && status !== prevStatus) {\n            this.status = status;\n            this.emit(Events.FILE_STATUS_CHANGE, status, prevStatus);\n        }\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    getStatusName() {\n        if (this.status in StatusName) {\n            return StatusName[this.status];\n        } else {\n            return 'unknow';\n        }\n    }\n\n    getSource() {\n        return this.source;\n    }\n\n    getAsDataUrl(timeout) {\n        if (!this._dataUrlPromise) {\n            this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n        }\n        return this._dataUrlPromise;\n    }\n\n    md5() {\n        if (!this._md5Promise) {\n            this._md5Promise = this.runtime.md5(this.source);\n        }\n        return this._md5Promise;\n    }\n\n    session() {\n        if (this._sessionPromise) {\n            return this._sessionPromise;\n        }\n\n        let ret = Deferred();\n\n        ret.progress((progress) => {\n            this.setStatus(Status.PROGRESS);\n            this.emit(Events.FILE_UPLOAD_PROGRESS, progress);\n        }).done((response) => {\n            this.response = response;\n            this._session = null;\n            this._sessionPromise = null;\n            this._flows = [];\n            this.setStatus(Status.SUCCESS);\n            this.emit(Events.FILE_UPLOAD_SUCCESS, response);\n        }).fail((error) => {\n            this._session = null;\n            this._sessionPromise = null;\n            let flow;\n            while (flow = this._flows.shift()) {\n                flow.abort();\n            }\n\n            if (error instanceof Error) {\n                this.setStatus(Status.ERROR);\n                this.emit(Events.FILE_UPLOAD_ERROR, error);\n            }\n        }).always(() => {\n            this.emit(Events.FILE_UPLOAD_COMPLETED, this.getStatus());\n        });\n\n        this._flows = [];\n        this._session = ret;\n        this._sessionPromise = ret.promise();\n\n        return this._sessionPromise;\n    }\n\n    prepare() {\n        if (this.status !== Status.PENDING || !this.core) {\n            return false;\n        }\n\n        this.session();\n        this.setStatus(Status.PROGRESS);\n\n        this.emit(Events.FILE_UPLOAD_START);\n\n        this.request = this.core.createFileRequest(this);\n\n        let ret = this.core.invoke(Events.FILE_UPLOAD_PREPARING, this.request);\n\n        this._flows.push(ret);\n\n        ret.then((request) => {\n            this.emit(Events.FILE_UPLOAD_PREPARED, request);\n\n            const upload = this.runtime.getUploading().generate(request);\n\n            this._flows.push(upload);\n\n            upload.progress((e) => {\n                this.progress.change(e.total, e.loaded);\n                this._session.notify(this.progress);\n            });\n\n            return upload;\n        }).then((response) => this.complete(response), this._session.reject);\n\n        return true;\n    }\n\n    complete(response) {\n        if (this.status !== Status.PROGRESS) return;\n\n        let flow;\n        while (flow = this._flows.shift()) {\n            flow.abort();\n        }\n\n        this.progress.done();\n        this._session.notify(this.progress);\n\n        response = this.request.createFileResponse(response);\n\n        this.setStatus(Status.END);\n        this.emit(Events.FILE_UPLOAD_END);\n\n        let ret = this.core.invoke(Events.FILE_UPLOAD_COMPLETING, response);\n\n        this._flows.push(ret);\n\n        ret.then(this._session.resolve, this._session.reject);\n    }\n\n    pending() {\n        if (this.status === Status.ERROR || this.status === Status.QUEUED) {\n            this.progress.change(this.size, 0);\n            this.setStatus(Status.PENDING);\n        }\n    }\n\n    abort() {\n        this._session && this._session.reject();\n        this._session = null;\n        this._sessionPromise = null;\n    }\n\n    cancel() {\n        this.setStatus(Status.CANCELLED);\n        this.emit(Events.FILE_CANCEL);\n        this.abort();\n        this.runtime.cancel(this.source);\n        this._dataUrlPromise && this._dataUrlPromise.abort();\n        this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n        this.removeAllListeners();\n    }\n\n    destroy() {\n        this.cancel();\n    }\n}\n\nmodule.exports = File;\n\n\n/** WEBPACK FOOTER **\n ** ./src/file.js\n **/","const Emitter = require('../emitter');\nconst Runtime = require('../html5/runtime');\nconst File = require('../file');\n\nclass PasteCollector {\n    constructor(core) {\n        this.core = core;\n        this.runtime = Runtime.getInstance();\n    }\n\n    addArea(area) {\n        const core = this.core,\n            runtime = this.runtime,\n            emitter = new Emitter;\n\n        const paste = (e) => {\n\n            const clipboardData = e.clipboardData || window.clipboardData,\n                items = clipboardData.items,\n                files = clipboardData.files;\n\n            if (!files && !items) {\n                return;\n            }\n\n            let prevent, i, l, file, item, addRet;\n\n            if (files && files.length) {\n                // safari has files\n                prevent = files.length > 0;\n                for (i = 0, l = files.length; i < l; i++) {\n                    file = new File(runtime, files[i]);\n\n                    prevent = 1;\n\n                    addRet = core.add(file);\n                    if (addRet < 0 || (addRet > 0 && !core.isMultiple())) {\n                        break;\n                    }\n                }\n            } else if (items && items.length) {\n                // chrome has items\n                let filename = clipboardData.getData('text/plain');\n                for (i = 0, l = items.length; i < l && !core.isLimit(); i++) {\n                    item = items[i];\n\n                    if (item.kind !== 'file' || !(file = item.getAsFile())) {\n                        continue;\n                    }\n\n                    file = new File(runtime, file, filename);\n                    filename = null;\n\n                    prevent = 1;\n\n                    addRet = core.add(file);\n                    if (addRet < 0 || (addRet > 0 && !core.isMultiple())) {\n                        break;\n                    }\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n                e.stopPropagation();\n                emitter.emit('paste', clipboardData);\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window) && area.addEventListener) {\n            area.addEventListener('paste', paste, false);\n        }\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            if (area.removeEventListener) {\n                area.removeEventListener('paste', paste, false);\n            }\n        };\n\n        return emitter;\n    }\n}\n\nmodule.exports = PasteCollector;\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/paste.js\n **/","const Emitter = require('../emitter');\nconst Html5Runtime = require('../html5/runtime');\nconst FlashRuntime = require('../flash/runtime');\nconst File = require('../file');\nconst {extend} = require('../util');\n\n\nlet SWF_URL = '';\n\nconst createElement = (() => {\n    const div = document.createElement('div');\n    return (html) => {\n        div.innerHTML = html;\n        html = div.firstChild;\n        div.removeChild(html);\n        return html;\n    };\n})();\n\nclass FlashTriggerCollection {\n    constructor(core, onFiles) {\n        const overlay = createElement('<label style=\"position:fixed;left:-100px;top:-100px;width:50px;height:50px;display:block;cursor:pointer;overflow:hidden;z-index:99999;opacity:0;filter:alpha(opacity=0)\"></label>');\n\n        const runtime = new FlashRuntime(overlay, SWF_URL, () => {\n            return {\n                accept: core.getAccept(),\n                multiple: core.isMultiple()\n            };\n        });\n\n        runtime.on('select', (e) => {\n            onFiles(e.files, runtime);\n            this.current && this.current.emit('files', e.files, runtime);\n        });\n\n        runtime.on('rollOut', () => this.hideOverlay());\n\n        document.body.appendChild(overlay);\n        this.overlay = overlay;\n    }\n\n    hideOverlay() {\n        extend(this.overlay.style, {\n            left: '-100px',\n            top: '-100px',\n            width: '50px',\n            height: '50px'\n        });\n        if (this.current) {\n            this.current.emit('rollOut');\n            this.current = null;\n        }\n    }\n\n\n    add(trigger) {\n        const overlay = this.overlay, emitter = new Emitter;\n        const mouseover = () => {\n            const rect = trigger.getBoundingClientRect();\n            extend(overlay.style, {\n                left: rect.left + 'px',\n                top: rect.top + 'px',\n                width: (rect.right - rect.left) + 'px',\n                height: (rect.bottom - rect.top) + 'px'\n            });\n            emitter.emit('rollOver');\n            if (this.current && this.current !== emitter) {\n                this.current.emit('rollOut');\n            }\n            this.current = emitter;\n        };\n\n        if (trigger.addEventListener) {\n            trigger.addEventListener('mouseover', mouseover, false);\n        } else if (trigger.attachEvent) {\n            trigger.attachEvent(\"onmouseover\", mouseover);\n        }\n\n        emitter.destroy = () => {\n            if (this.current === emitter) {\n                this.hideOverlay();\n            }\n            emitter.removeAllListeners();\n            if (trigger.removeEventListener) {\n                trigger.removeEventListener('mouseover', mouseover, false);\n            } else if (trigger.detachEvent) {\n                trigger.detachEvent(\"onmouseover\", mouseover);\n            }\n        };\n\n        return emitter;\n    }\n}\n\nclass Html5Trigger extends Emitter {\n    constructor(trigger, core, onFiles) {\n        super();\n\n        this.trigger = trigger;\n        this.core = core;\n        this.label = createElement('<label style=\"position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;cursor:pointer;background:#fff;overflow:hidden;opacity:0\"></label>');\n\n        this.onChange = (e) => {\n            onFiles(e.target.files);\n            this.destroyInput();\n            this.createInput();\n        };\n        trigger.appendChild(this.label);\n        this.createInput();\n    }\n\n    createInput() {\n        const input = createElement('<input type=\"file\" style=\"position:absolute;clip:rect(1px 1px 1px 1px);\" />');\n\n        let accept = this.core.getAccept();\n        if (accept && accept.length > 0) {\n            accept = accept.map((item) => {\n                return item.mimeTypes || ('.' + item.extensions.join(',.'));\n            });\n\n            input.setAttribute('accept', accept.join(','));\n        }\n        if (this.core.isMultiple()) {\n            input.setAttribute('multiple', 'multiple');\n        }\n\n        input.addEventListener('change', this.onChange, false);\n\n        this.label.appendChild(input);\n        this.input = input;\n    }\n\n    destroyInput() {\n        if (!this.input) return;\n        this.input.removeEventListener('change', this.onChange, false);\n        this.label.removeChild(this.input);\n        this.input = null;\n    }\n\n    destroy() {\n        this.destroyInput();\n        this.removeAllListeners();\n        this.trigger.removeChild(this.label);\n    }\n}\n\nclass Html5TriggerCollection {\n    constructor(core, onFiles) {\n        const runtime = Html5Runtime.getInstance();\n        this.core = core;\n        this.onFiles = (files) => {\n            onFiles(files, runtime);\n        };\n    }\n\n    add(trigger) {\n        return new Html5Trigger(trigger, this.core, this.onFiles);\n    }\n}\n\nclass PickerCollector {\n    static setSWF(url) {\n        SWF_URL = url;\n    }\n    constructor(core) {\n\n        const onFiles = (files, runtime) => {\n            for (let i = 0, l = files.length; i < l; i++) {\n                if (core.add(new File(runtime, files[i])) < 0) {\n                    break;\n                }\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window)) {\n            this.triggerCollection = new Html5TriggerCollection(core, onFiles);\n        } else {\n            this.triggerCollection = new FlashTriggerCollection(core, onFiles);\n        }\n    }\n\n    addArea(area) {\n        return this.triggerCollection.add(area);\n    }\n}\n\nmodule.exports = PickerCollector;\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector/picker.js\n **/","const Runtime = require('../runtime');\nconst Transport = require('./transport');\n\nfunction getFlashVersion() {\n    let version;\n\n    try {\n        version = navigator.plugins['Shockwave Flash'];\n        version = version.description;\n    } catch (e1) {\n        try {\n            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n        } catch (e2) {\n            version = '0.0';\n        }\n    }\n    version = version.match(/\\d+/g);\n    return parseFloat(version[0] + '.' + version[1]);\n}\n\nfunction callFlash(movie, functionName, argumentArray) {\n    try {\n        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n    } catch (ex) {\n        throw \"Call to \" + functionName + \" failed\";\n    }\n}\n\nfunction createFlash(swf, callInterface) {\n    if (getFlashVersion() < 11.4) {\n        throw 'flash player is not available';\n    }\n    const div = document.createElement('div');\n    let url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n    let attrs = [\n        'id=\"' + callInterface + '-Picker\"',\n        'type=\"application/x-shockwave-flash\"',\n        'data=\"' + url + '\"',\n        'width=\"100%\" height=\"100%\"',\n        'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'\n    ];\n    if (window.ActiveXObject) {\n        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n    }\n    div.innerHTML = '<object ' + attrs.join(' ') + '>' +\n        '<param name=\"movie\" value=\"' + url + '\" />' +\n        '<param name=\"wmode\" value=\"transparent\" />' +\n        '<param name=\"allowscriptaccess\" value=\"always\" />' +\n    '</object>';\n\n    return div.firstChild;\n}\n\nlet _guid = +new Date;\nfunction guid(prefix) {\n    let ret = prefix + (_guid++).toString(16);\n    if (ret in window) {\n        return guid(prefix);\n    }\n    return ret;\n}\n\nclass FlashRuntime extends Runtime {\n    constructor(trigger, swf, options) {\n        super();\n\n        const callInterface = guid('FlashRuntime');\n\n        this.callInterface = callInterface;\n        window[callInterface] = this;\n\n        this.options = options;\n\n        const _this = this;\n        function display() {\n            let w = trigger.offsetWidth, h = trigger.offsetHeight, flash;\n            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n                setTimeout(display, 1000);\n                return;\n            }\n\n            trigger.appendChild(_this.flash = flash);\n        }\n\n        display();\n    }\n    getOptions() {\n        let options = this.options;\n        if (typeof options === 'function') {\n            options = options();\n        }\n        return options;\n    }\n    getTransport(name, blob, options) {\n        return new Transport(this, name, blob, options);\n    }\n    send(name, blob, url, params) {\n        callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n    }\n    abort(blob) {\n        try {\n            callFlash(this.flash, 'exec', ['abort', blob.id]);\n        } catch (e) {}\n    }\n    cancel(blob) {\n        callFlash(this.flash, 'exec', ['cancel', blob.id]);\n    }\n    ping() {\n        callFlash(this.flash, 'exec', ['pang']);\n    }\n    destroy() {\n        delete window[this.callInterface];\n    }\n}\n\nmodule.exports = FlashRuntime;\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/runtime.js\n **/","const {Deferred} = require('../util');\nconst {TimeoutError, AbortError, NetworkError} = require('../errors');\n\nclass FlashTransport {\n    constructor(flashRuntime) {\n        this.flashRuntime = flashRuntime;\n    }\n\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(), flashRuntime = this.flashRuntime, blob = request.getBlob();\n\n        let timeoutTimer;\n\n        const clean = () => {\n            flashRuntime.off('uploadprogress', progress);\n            flashRuntime.off('uploadcomplete', complete);\n            flashRuntime.off('uploaderror', error);\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n        const abort = () => {\n            clean();\n            flashRuntime.abort(blob.id);\n        };\n\n        const progress = (e) => {\n            if (e.id !== blob.id) return;\n            i.notify(e);\n        };\n\n        const complete = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            if (e.status === 304 || e.status >= 200 && e.status < 300) {\n                flashRuntime.cancel(blob);\n                return i.resolve(e.response);\n            }\n            return i.reject(new NetworkError(e.status, e.response));\n        };\n\n        const error = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            i.reject(new AbortError(e.message));\n        };\n        flashRuntime.on('uploadprogress', progress);\n        flashRuntime.on('uploadcomplete', complete);\n        flashRuntime.on('uploaderror', error);\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\nmodule.exports = FlashTransport;\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash/transport.js\n **/"],"sourceRoot":""}